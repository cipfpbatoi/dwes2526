
<!doctype html>
<html lang="ca" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://cipfpbatoi.github.io/dwes2526/04phpoo.html">
      
      
      
      
      <link rel="icon" href="imagenes/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Desenvolupament d'Aplicacions Web: POO, Separació de Lògica i Presentació, Gestió d'Errors i Proves - Desenvolupament web en entorn de Servidor</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-X6D0LR7TC8"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-X6D0LR7TC8",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-X6D0LR7TC8",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="Teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#desenvolupament-daplicacions-web-poo-separacio-de-logica-i-presentacio-gestio-derrors-i-proves" class="md-skip">
          Salta el contingut
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Capçalera">
    <a href="index.html" title="Desenvolupament web en entorn de Servidor" class="md-header__button md-logo" aria-label="Desenvolupament web en entorn de Servidor" data-md-component="logo">
      
  <img src="imagenes/logofp.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Desenvolupament web en entorn de Servidor
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Desenvolupament d'Aplicacions Web: POO, Separació de Lògica i Presentació, Gestió d'Errors i Proves
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="Teal"  aria-label="Canviar a mode nit"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Canviar a mode nit" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="light-blue" data-md-color-accent="Teal"  aria-label="Canviar a mode dia"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Canviar a mode dia" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Cerca" placeholder="Cerca" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Cerca">
        
        <button type="reset" class="md-search__icon md-icon" title="Neteja" aria-label="Neteja" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicialitzant cerca
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navegació" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="Desenvolupament web en entorn de Servidor" class="md-nav__button md-logo" aria-label="Desenvolupament web en entorn de Servidor" data-md-component="logo">
      
  <img src="imagenes/logofp.png" alt="logo">

    </a>
    Desenvolupament web en entorn de Servidor
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Inicio
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="01arquitecturas.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.- Arquitectures Web
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="02php.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.- Programació web amb PHP
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="03MVC_Laravel.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.- Arquitectura MVC amb Laravel
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="04dades_Laravel.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.- Accés segur i estructurat a bases de dades amb Laravel
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="05seguretat_Laravel.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5.- Aplicacions segures i reactives en Laravel
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="06Nodejs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6.- Desenvolupament d'APIs REST amb Node.js
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="desenvolupament-daplicacions-web-poo-separacio-de-logica-i-presentacio-gestio-derrors-i-proves">Desenvolupament d'Aplicacions Web: POO, Separació de Lògica i Presentació, Gestió d'Errors i Proves<a class="headerlink" href="#desenvolupament-daplicacions-web-poo-separacio-de-logica-i-presentacio-gestio-derrors-i-proves" title="Permanent link">&para;</a></h1>
<details class="abstract">
<summary>Duració i criteris d'avaluació</summary>
<p>Duració estimada: 20 hores</p>
<hr />
<table>
<thead>
<tr>
<th>Resultat d'aprenentatge</th>
<th>Criteris d'avaluació</th>
</tr>
</thead>
<tbody>
<tr>
<td>5. Desenvolupa aplicacions Web identificant i aplicant mecanismes per a separar el codi de presentació de la lògica de negoci.</td>
<td>a) S'han identificat els avantatges de separar la lògica de negoci dels aspectes de presentació de l'aplicació. <br/> b) S'han analitzat tecnologies i mecanismes que permeten realitzar aquesta separació i les seues característiques principals. <br/> c) S'han utilitzat objectes i controls en el servidor per a generar l'aspecte visual de l'aplicació Web en el client. <br/> d) S’han utilitzat formularis generats de forma dinàmica per a respondre als esdeveniments de l'aplicació Web. <br/> e) S'han identificat i aplicat els paràmetres relatius a la configuració de l'aplicació Web. <br/> f) S'han escrit aplicacions Web amb manteniment d'estat i separació de la lògica de negoci. <br/> g) S'han aplicat els principis de la programació orientada a objectes. <br/> g) S'ha provat i documentat el codi.</td>
</tr>
</tbody>
</table>
</details>
<h2 id="1-concepte-de-classes-i-objectes">1. Concepte de classes i Objectes<a class="headerlink" href="#1-concepte-de-classes-i-objectes" title="Permanent link">&para;</a></h2>
<p>PHP segueix un paradigma de programació orientada a objectes (POO) basada en classes.</p>
<p>Un classe és un plantilla que defineix les propietats i mètodes per a poder crear objectes. D'aquest manera, un objecte és una instància d'una classe.</p>
<p>Tant les propietats com els mètodes es defineixen amb una visibilitat (qui pot accedir)</p>
<ul>
<li>Privat - <code>private</code>: Només pot accedir la pròpia classe.</li>
<li>Protegit - <code>protected</code>: Només pot accedir la pròpia classe o els seus descendents.</li>
<li>Público - <code>public</code>: Pot accedir qualsevol altra classe.</li>
</ul>
<p>Per a declarar una classe, s'utilitza la paraula clau <code>class</code> seguit del nom de la classe. Per a instanciar un objecte a partir de la classe, s'utilitza <code>new</code>:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="k">class</span> <span class="nc">NomClase</span> <span class="p">{</span>
<span class="linenos" data-linenos="3 "></span><span class="c1">// propiedades</span>
<span class="linenos" data-linenos="4 "></span><span class="c1">// y métodos</span>
<span class="linenos" data-linenos="5 "></span><span class="p">}</span>
<span class="linenos" data-linenos="6 "></span>
<span class="linenos" data-linenos="7 "></span><span class="nv">$ob</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NomClase</span><span class="p">();</span>
</code></pre></div>
<div class="admonition important">
<p class="admonition-title">Classes amb majúscula</p>
<p>Totes les classes comencen per lletra majúscula.</p>
</div>
<p>Quan un projecte creix, és normal modelar les classes mitjançant UML (recordeu Entorns de Desenvolupament?). La classes es representen mitjançant un quadrat, separant el nom, de les propietats i els mètodes:</p>
<p><img alt="UML" src="imagenes/03/uml.png" width="500" /></p>
<p>Una vegada que hem creat un objecte, s'utilitza l'operador <code>-&gt;</code> per a accedir a una propietat o un mètode:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="x">$objeto-&gt;propiedad;</span>
<span class="linenos" data-linenos="2 "></span><span class="x">$objeto-&gt;método(parámetros);</span>
</code></pre></div>
<p>Si des de dins de la classe, volem accedir a una propietat o mètode de la mateixa classe, utilitzarem la referència <code>$this</code>;</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="x">$this-&gt;propiedad;</span>
<span class="linenos" data-linenos="2 "></span><span class="x">$this-&gt;método(parámetros);  </span>
</code></pre></div>
<p>Així doncs, com a exemple, codificaríem una persona en el fitxer <code>Persona.php</code> com:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">class</span> <span class="nc">Persona </span><span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="k">private</span> <span class="nx">string</span> <span class="nv">$nombre</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">setNombre</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$nom</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 6 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">nombre</span><span class="o">=</span><span class="nv">$nom</span><span class="p">;</span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos=" 8 "></span>
<span class="linenos" data-linenos=" 9 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">imprimir</span><span class="p">(){</span>
<span class="linenos" data-linenos="10 "></span>        <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">nombre</span><span class="p">;</span>
<span class="linenos" data-linenos="11 "></span>        <span class="k">echo</span> <span class="s1">&#39;&lt;br&gt;&#39;</span><span class="p">;</span>
<span class="linenos" data-linenos="12 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="13 "></span><span class="p">}</span>
<span class="linenos" data-linenos="14 "></span>
<span class="linenos" data-linenos="15 "></span><span class="nv">$bruno </span><span class="o">=</span> <span class="k">new</span> <span class="nx">Persona</span><span class="p">();</span> <span class="c1">// creamos un objeto</span>
<span class="linenos" data-linenos="16 "></span><span class="nv">$bruno</span><span class="o">-&gt;</span><span class="na">setNombre</span><span class="p">(</span><span class="s2">&quot;Bruno Díaz&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos="17 "></span><span class="nv">$bruno</span><span class="o">-&gt;</span><span class="na">imprimir</span><span class="p">();</span>
</code></pre></div>
<p>Encara que es poden declarar diverses classes en el mateix arxiu, és una mala pràctica. Així doncs, cada fitxer contedrá una sola classe, i es nomenarà amb el nom de la classe.</p>
<h2 id="2-principis-de-la-poo">2. Principis de la POO<a class="headerlink" href="#2-principis-de-la-poo" title="Permanent link">&para;</a></h2>
<h3 id="encapsulacio">Encapsulació<a class="headerlink" href="#encapsulacio" title="Permanent link">&para;</a></h3>
<p>Les propietats es defineixen privades o protegides (si volem que les classes heretades puguen accedir).</p>
<p>Per a cada propietat, s'afigen mètodes públics (<em>getter/setter</em>):</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="x">public setPropiedad(tipo $param)</span>
<span class="linenos" data-linenos="2 "></span><span class="x">public getPropiedad() : tipo</span>
</code></pre></div>
<p>Les constants es defineixen públiques perquè siguen accessibles per tots els recursos.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">class</span> <span class="nc">MayorMenor </span><span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="k">private</span> <span class="nx">int</span> <span class="nv">$mayor</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span>    <span class="k">private</span> <span class="nx">int</span> <span class="nv">$menor</span><span class="p">;</span>
<span class="linenos" data-linenos=" 5 "></span>
<span class="linenos" data-linenos=" 6 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">setMayor</span><span class="p">(</span><span class="nx">int </span><span class="nv">$may</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 7 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">mayor </span><span class="o">=</span> <span class="nv">$may</span><span class="p">;</span>
<span class="linenos" data-linenos=" 8 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos=" 9 "></span>
<span class="linenos" data-linenos="10 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">setMenor</span><span class="p">(</span><span class="nx">int </span><span class="nv">$men</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="11 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">menor </span><span class="o">=</span> <span class="nv">$men</span><span class="p">;</span>
<span class="linenos" data-linenos="12 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="13 "></span>
<span class="linenos" data-linenos="14 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">getMayor</span><span class="p">()</span> <span class="o">:</span> <span class="nx">int </span><span class="p">{</span>
<span class="linenos" data-linenos="15 "></span>        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">mayor</span><span class="p">;</span>
<span class="linenos" data-linenos="16 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="17 "></span>
<span class="linenos" data-linenos="18 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">getMenor</span><span class="p">()</span> <span class="o">:</span> <span class="nx">int </span><span class="p">{</span>
<span class="linenos" data-linenos="19 "></span>        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">menor</span><span class="p">;</span>
<span class="linenos" data-linenos="20 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="21 "></span><span class="p">}</span>
</code></pre></div>
<h4 id="rebent-i-enviant-objectes">Rebent i enviant objectes<a class="headerlink" href="#rebent-i-enviant-objectes" title="Permanent link">&para;</a></h4>
<p>És recomanable indicar-ho en la mena de paràmetres. Si l'objecte pot retornar nuls es posa <code>?</code> davant del nom de la classe.</p>
<div class="admonition important">
<p class="admonition-title">Objectes per referència</p>
<p>Els objectes que s'envien i reben com a paràmetres sempre es passen per referència.</p>
</div>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="hll"><span class="linenos" data-linenos=" 2 "></span><span class="k">function</span> <span class="nf">maymen</span><span class="p">(</span><span class="k">array</span> <span class="nv">$numeros</span><span class="p">)</span> <span class="o">:</span> <span class="o">?</span><span class="nx">MayorMenor </span><span class="p">{</span>
</span><span class="linenos" data-linenos=" 3 "></span>    <span class="nv">$a </span><span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nv">$numeros</span><span class="p">);</span>
<span class="linenos" data-linenos=" 4 "></span>    <span class="nv">$b </span><span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="nv">$numeros</span><span class="p">);</span>
<span class="linenos" data-linenos=" 5 "></span>
<span class="linenos" data-linenos=" 6 "></span>    <span class="nv">$result </span><span class="o">=</span> <span class="k">new</span> <span class="nx">MayorMenor</span><span class="p">();</span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="nv">$result</span><span class="o">-&gt;</span><span class="na">setMayor</span><span class="p">(</span><span class="nv">$a</span><span class="p">);</span>
<span class="linenos" data-linenos=" 8 "></span>    <span class="nv">$result</span><span class="o">-&gt;</span><span class="na">setMenor</span><span class="p">(</span><span class="nv">$b</span><span class="p">);</span>
<span class="linenos" data-linenos=" 9 "></span>
<span class="linenos" data-linenos="10 "></span>    <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span>
<span class="linenos" data-linenos="11 "></span><span class="p">}</span>
<span class="linenos" data-linenos="12 "></span>
<span class="linenos" data-linenos="13 "></span><span class="nv">$resultado </span><span class="o">=</span>  <span class="nx">maymen</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">76</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">388</span><span class="p">,</span><span class="mi">41</span><span class="p">,</span><span class="mi">39</span><span class="p">,</span><span class="mi">25</span><span class="p">,</span><span class="mi">97</span><span class="p">,</span><span class="mi">22</span><span class="p">]);</span>
<span class="linenos" data-linenos="14 "></span><span class="k">echo</span> <span class="s2">&quot;&lt;br&gt;Mayor: &quot;</span><span class="o">.</span><span class="nv">$resultado</span><span class="o">-&gt;</span><span class="na">getMayor</span><span class="p">();</span>
<span class="linenos" data-linenos="15 "></span><span class="k">echo</span> <span class="s2">&quot;&lt;br&gt;Menor: &quot;</span><span class="o">.</span><span class="nv">$resultado</span><span class="o">-&gt;</span><span class="na">getMenor</span><span class="p">();</span>
</code></pre></div>
<h4 id="constructor">Constructor<a class="headerlink" href="#constructor" title="Permanent link">&para;</a></h4>
<p>El constructor dels objectes es defineix mitjançant el mètode màgic <code>__construct</code>.
Pot o no tindre paràmetres, però només pot haver-hi un únic constructor.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">class</span> <span class="nc">Persona </span><span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="k">private</span> <span class="nx">string</span> <span class="nv">$nombre</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="hll"><span class="linenos" data-linenos=" 5 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$nom</span><span class="p">)</span> <span class="p">{</span>
</span><span class="linenos" data-linenos=" 6 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">nombre</span> <span class="o">=</span> <span class="nv">$nom</span><span class="p">;</span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos=" 8 "></span>
<span class="linenos" data-linenos=" 9 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">imprimir</span><span class="p">(){</span>
<span class="linenos" data-linenos="10 "></span>      <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">nombre</span><span class="p">;</span>
<span class="linenos" data-linenos="11 "></span>      <span class="k">echo</span> <span class="s1">&#39;&lt;br&gt;&#39;</span><span class="p">;</span>
<span class="linenos" data-linenos="12 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="13 "></span><span class="p">}</span>
<span class="linenos" data-linenos="14 "></span>
<span class="linenos" data-linenos="15 "></span><span class="nv">$bruno </span><span class="o">=</span> <span class="k">new</span> <span class="nx">Persona</span><span class="p">(</span><span class="s2">&quot;Bruno Díaz&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos="16 "></span><span class="nv">$bruno</span><span class="o">-&gt;</span><span class="na">imprimir</span><span class="p">();</span>
</code></pre></div>
<h5 id="constructors-en-php-8">Constructors en PHP 8<a class="headerlink" href="#constructors-en-php-8" title="Permanent link">&para;</a></h5>
<p>Una de les grans novetats que ofereix PHP 8 és la simplificació dels constructors amb paràmetres, la qual cosa es coneix com a promoció de les propietats del constructor*.</p>
<p>Per a això, en comptes d'haver de declarar les propietats com a privades o protegides, i després dins del constructor haver d'assignar els paràmetres a estàs propietats, el propi constructor promociona les propietats.</p>
<p>Vegem-ho millor amb un exemple. Imaginem una classe <code>Punt</code> on vulguem emmagatzemar les seues coordenades:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">class</span> <span class="nc">Punto</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="k">protected</span> <span class="nx">float</span> <span class="nv">$x</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span>    <span class="k">protected</span> <span class="nx">float</span> <span class="nv">$y</span><span class="p">;</span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="k">protected</span> <span class="nx">float</span> <span class="nv">$z</span><span class="p">;</span>
<span class="linenos" data-linenos=" 6 "></span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span>
<span class="linenos" data-linenos=" 8 "></span>        <span class="nx">float</span> <span class="nv">$x</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
<span class="linenos" data-linenos=" 9 "></span>        <span class="nx">float</span> <span class="nv">$y</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
<span class="linenos" data-linenos="10 "></span>        <span class="nx">float</span> <span class="nv">$z</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="linenos" data-linenos="11 "></span>    <span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="12 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">x</span> <span class="o">=</span> <span class="nv">$x</span><span class="p">;</span>
<span class="linenos" data-linenos="13 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">y</span> <span class="o">=</span> <span class="nv">$y</span><span class="p">;</span>
<span class="linenos" data-linenos="14 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">z</span> <span class="o">=</span> <span class="nv">$z</span><span class="p">;</span>
<span class="linenos" data-linenos="15 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="16 "></span><span class="p">}</span>
</code></pre></div>
<p>En PHP 8, quedaria de la següent manera (molt més curt, la qual cosa facilita la seua llegibilitat):</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="k">class</span> <span class="nc">Punto</span> <span class="p">{</span>
<span class="linenos" data-linenos="3 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span>
<span class="linenos" data-linenos="4 "></span>        <span class="k">protected</span> <span class="nx">float</span> <span class="nv">$x</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
<span class="linenos" data-linenos="5 "></span>        <span class="k">protected</span> <span class="nx">float</span> <span class="nv">$y</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
<span class="linenos" data-linenos="6 "></span>        <span class="k">protected</span> <span class="nx">float</span> <span class="nv">$z</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
<span class="linenos" data-linenos="7 "></span>    <span class="p">)</span> <span class="p">{}</span>
<span class="linenos" data-linenos="8 "></span><span class="p">}</span>
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">L'ordre importa</p>
<p>A l'hora de codificar l'ordre dels elements ha de ser:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">declare</span><span class="p">(</span><span class="nx">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
<span class="linenos" data-linenos=" 3 "></span>
<span class="linenos" data-linenos=" 4 "></span><span class="k">class</span> <span class="nc">NombreClase</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="c1">// propiedades</span>
<span class="linenos" data-linenos=" 6 "></span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="c1">// constructor</span>
<span class="linenos" data-linenos=" 8 "></span>
<span class="linenos" data-linenos=" 9 "></span>    <span class="c1">// getters - setters</span>
<span class="linenos" data-linenos="10 "></span>
<span class="linenos" data-linenos="11 "></span>    <span class="c1">// resto de métodos</span>
<span class="linenos" data-linenos="12 "></span><span class="p">}</span>
<span class="linenos" data-linenos="13 "></span><span class="cp">?&gt;</span>
</code></pre></div>
</div>
<h4 id="classes-estatiques">Classes estàtiques<a class="headerlink" href="#classes-estatiques" title="Permanent link">&para;</a></h4>
<p>Són aquelles que tenen propietats i/o mètodes estàtics (també es coneixen com <em>de classe</em>, perquè el seu valor es comparteix entre totes les instàncies de la mateixa classe).</p>
<p>Es declaren amb <code>static</code> i es referencien amb <code>::</code>.</p>
<ul>
<li>Si volem accedir a un mètode estàtic, s'anteposa el nom de la classe: <code>Producte::nuevoProducto()</code>.</li>
<li>Si des d'un mètode volem accedir a una propietat estàtica de la mateixa classe, s'utilitza la referència <code>self</code>: <code>self::$numProductos</code></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">class</span> <span class="nc">Producto</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="k">const</span> <span class="no">IVA</span> <span class="o">=</span> <span class="mf">0.23</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span>    <span class="k">private</span> <span class="k">static</span> <span class="nv">$numProductos</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
<span class="linenos" data-linenos=" 5 "></span>
<span class="linenos" data-linenos=" 6 "></span>    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">nuevoProducto</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 7 "></span>        <span class="nx">self</span><span class="o">::</span><span class="nv">$numProductos</span><span class="o">++</span><span class="p">;</span>
<span class="linenos" data-linenos=" 8 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos=" 9 "></span><span class="p">}</span>
<span class="linenos" data-linenos="10 "></span>
<span class="linenos" data-linenos="11 "></span><span class="nx">Producto</span><span class="o">::</span><span class="na">nuevoProducto</span><span class="p">();</span>
<span class="linenos" data-linenos="12 "></span><span class="nv">$impuesto</span> <span class="o">=</span> <span class="nx">Producto</span><span class="o">::</span><span class="na">IVA</span><span class="p">;</span>
</code></pre></div>
<p>També podem tindre classes normals que tinguen alguna propietat estàtica:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">class</span> <span class="nc">Producto </span><span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="k">const</span> <span class="no">IVA </span><span class="o">=</span> <span class="mf">0.23</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span>    <span class="k">private</span> <span class="k">static</span> <span class="nv">$numProductos </span><span class="o">=</span> <span class="mi">0</span><span class="p">;</span> 
<span class="linenos" data-linenos=" 5 "></span>    <span class="k">private</span> <span class="nv">$codigo</span><span class="p">;</span>
<span class="linenos" data-linenos=" 6 "></span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">string </span><span class="nv">$cod</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 8 "></span>        <span class="nx">self</span><span class="o">::</span><span class="nv">$numProductos</span><span class="o">++</span><span class="p">;</span>
<span class="linenos" data-linenos=" 9 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">codigo </span><span class="o">=</span> <span class="nv">$cod</span><span class="p">;</span>
<span class="linenos" data-linenos="10 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="11 "></span>
<span class="linenos" data-linenos="12 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">mostrarResumen</span><span class="p">()</span> <span class="o">:</span> <span class="nx">string </span><span class="p">{</span>
<span class="linenos" data-linenos="13 "></span>        <span class="k">return</span> <span class="s2">&quot;El producto &quot;</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">codigo</span><span class="o">.</span><span class="s2">&quot; es el número &quot;</span><span class="o">.</span><span class="nx">self</span><span class="o">::</span><span class="nv">$numProductos</span><span class="p">;</span>
<span class="linenos" data-linenos="14 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="15 "></span><span class="p">}</span>
<span class="linenos" data-linenos="16 "></span>
<span class="linenos" data-linenos="17 "></span><span class="nv">$prod1 </span><span class="o">=</span> <span class="k">new</span> <span class="nx">Producto</span><span class="p">(</span><span class="s2">&quot;PS5&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos="18 "></span><span class="nv">$prod2 </span><span class="o">=</span> <span class="k">new</span> <span class="nx">Producto</span><span class="p">(</span><span class="s2">&quot;XBOX Series X&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos="19 "></span><span class="nv">$prod3 </span><span class="o">=</span> <span class="k">new</span> <span class="nx">Producto</span><span class="p">(</span><span class="s2">&quot;Nintendo Switch&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos="20 "></span><span class="k">echo</span> <span class="nv">$prod3</span><span class="o">-&gt;</span><span class="na">mostrarResumen</span><span class="p">();</span>
</code></pre></div>
<h4 id="introspeccio">Introspecció<a class="headerlink" href="#introspeccio" title="Permanent link">&para;</a></h4>
<p>En treballar amb classes i objectes, existeixen un conjunt de funcions ja definides pel llenguatge que permeten obtindre informació sobre els objectes:</p>
<ul>
<li><code>instanceof</code>: permet comprovar si un objecte és d'una determinada classe</li>
<li><code>get_class</code>: retorna el nom de la classe</li>
<li><code>get_declared_class</code>: retorna un array amb els noms de les classes definides</li>
<li><code>class_àlies</code>: crea un àlies</li>
<li><code>class_exists</code> / <code>method_exists</code> / <code>property_exists</code>: <code>true</code> si la classe / mètode / propietat està definida</li>
<li><code>get_class_methods</code> / <code>get_class_vars</code> / <code>get_object_vars</code>: Retorna un array amb els noms dels mètodes / propietats d'una classe / propietats d'un objecte que són accessibles des d'on es fa la crida.</li>
</ul>
<p>Un exemple d'aquestes funcions pot ser el següent:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="nv">$p </span><span class="o">=</span> <span class="k">new</span> <span class="nx">Producto</span><span class="p">(</span><span class="s2">&quot;PS5&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos=" 3 "></span><span class="k">if</span> <span class="p">(</span><span class="nv">$p instanceof Producto</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 4 "></span>    <span class="k">echo</span> <span class="s2">&quot;Es un producto&quot;</span><span class="p">;</span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="k">echo</span> <span class="s2">&quot;La clase es &quot;</span><span class="o">.</span><span class="nb">get_class</span><span class="p">(</span><span class="nv">$p</span><span class="p">);</span>
<span class="linenos" data-linenos=" 6 "></span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="nb">class_alias</span><span class="p">(</span><span class="s2">&quot;Producto&quot;</span><span class="p">,</span> <span class="s2">&quot;Articulo&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos=" 8 "></span>    <span class="nv">$c </span><span class="o">=</span> <span class="k">new</span> <span class="nx">Articulo</span><span class="p">(</span><span class="s2">&quot;Nintendo Switch&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos=" 9 "></span>    <span class="k">echo</span> <span class="s2">&quot;Un articulo es un &quot;</span><span class="o">.</span><span class="nb">get_class</span><span class="p">(</span><span class="nv">$c</span><span class="p">);</span>
<span class="linenos" data-linenos="10 "></span>
<span class="linenos" data-linenos="11 "></span>    <span class="nb">print_r</span><span class="p">(</span><span class="nb">get_class_methods</span><span class="p">(</span><span class="s2">&quot;Producto&quot;</span><span class="p">));</span>
<span class="linenos" data-linenos="12 "></span>    <span class="nb">print_r</span><span class="p">(</span><span class="nb">get_class_vars</span><span class="p">(</span><span class="s2">&quot;Producto&quot;</span><span class="p">));</span>
<span class="linenos" data-linenos="13 "></span>    <span class="nb">print_r</span><span class="p">(</span><span class="nb">get_object_vars</span><span class="p">(</span><span class="nv">$p</span><span class="p">));</span>
<span class="linenos" data-linenos="14 "></span>
<span class="linenos" data-linenos="15 "></span>    <span class="k">if</span> <span class="p">(</span><span class="nb">method_exists</span><span class="p">(</span><span class="nv">$p</span><span class="p">,</span> <span class="s2">&quot;mostrarResumen&quot;</span><span class="p">))</span> <span class="p">{</span>
<span class="linenos" data-linenos="16 "></span>        <span class="nv">$p</span><span class="o">-&gt;</span><span class="na">mostrarResumen</span><span class="p">();</span>
<span class="linenos" data-linenos="17 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="18 "></span><span class="p">}</span>
</code></pre></div>
<div class="admonition caution">
<p class="admonition-title">Clonat</p>
<p>En assignar dos objectes no es copien, es crea una nova referència. Si volem una còpia, cal clonar-ho mitjançant el mètode <code>clone(object) : object</code></p>
<p>Si volem modificar el clonat per defecte, cal definir el mètode màgic <code>__clone()</code> que es dirà després de copiar totes les propietats.</p>
<p>Més informació en <a href="https://www.php.net/manual/es/language.oop5.cloning.php">https://www.php.net/manual/es/language.oop5.cloning.php</a></p>
</div>
<h3 id="herencia">Herència<a class="headerlink" href="#herencia" title="Permanent link">&para;</a></h3>
<p>PHP suporta herència simple, de manera que una classe només pot heretar d'una altra, no de dues classes alhora. Per a això s'utilitza la paraula clau <code>extends</code>. Si volem que la classe A hereta de la classe B farem:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="x">class A extends B</span>
</code></pre></div>
<p>El fill hereta els atributs i mètodes públics i protegits.</p>
<div class="admonition warning">
<p class="admonition-title">Cada classe en un arxiu</p>
</div>
<p>Com ja hem comentat, hauríem de col·locar cada classe en un arxiu diferent per a posteriorment utilitzar-lo mitjançant <code>include</code>. En els següent exemple els hem col·locats junt per a facilitar la seua llegibilitat.</p>
<p>Per exemple, tenim una classe <code>Producte</code> i una <code>Tv</code> que hereta de <code>Producte</code>:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">class</span> <span class="nc">Producto</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="k">public</span> <span class="nv">$codigo</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span>    <span class="k">public</span> <span class="nv">$nombre</span><span class="p">;</span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="k">public</span> <span class="nv">$nombreCorto</span><span class="p">;</span>
<span class="linenos" data-linenos=" 6 "></span>    <span class="k">public</span> <span class="nv">$PVP</span><span class="p">;</span>
<span class="linenos" data-linenos=" 7 "></span>
<span class="linenos" data-linenos=" 8 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">mostrarResumen</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 9 "></span>        <span class="k">echo</span> <span class="s2">&quot;&lt;p&gt;Prod:&quot;</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">codigo</span><span class="o">.</span><span class="s2">&quot;&lt;/p&gt;&quot;</span><span class="p">;</span>
<span class="linenos" data-linenos="10 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="11 "></span><span class="p">}</span>
<span class="linenos" data-linenos="12 "></span>
<span class="linenos" data-linenos="13 "></span><span class="k">class</span> <span class="nc">Tv</span> <span class="k">extends</span> <span class="nx">Producto</span> <span class="p">{</span>
<span class="linenos" data-linenos="14 "></span>    <span class="k">public</span> <span class="nv">$pulgadas</span><span class="p">;</span>
<span class="linenos" data-linenos="15 "></span>    <span class="k">public</span> <span class="nv">$tecnologia</span><span class="p">;</span>
<span class="linenos" data-linenos="16 "></span><span class="p">}</span>
</code></pre></div>
<p>Podemos utilizar las siguientes funciones para averiguar si hay relación entre dos clases:</p>
<ul>
<li><code>get_parent_class(object): string</code></li>
<li><code>is_subclass_of(object, string): bool</code></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="nv">$t</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Tv</span><span class="p">();</span>
<span class="linenos" data-linenos=" 3 "></span><span class="nv">$t</span><span class="o">-&gt;</span><span class="na">codigo</span> <span class="o">=</span> <span class="mi">33</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span><span class="k">if</span> <span class="p">(</span><span class="nv">$t</span> <span class="nx">instanceof</span> <span class="nx">Producto</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="k">echo</span> <span class="nv">$t</span><span class="o">-&gt;</span><span class="na">mostrarResumen</span><span class="p">();</span>
<span class="linenos" data-linenos=" 6 "></span><span class="p">}</span>
<span class="linenos" data-linenos=" 7 "></span>
<span class="linenos" data-linenos=" 8 "></span><span class="nv">$padre</span> <span class="o">=</span> <span class="nb">get_parent_class</span><span class="p">(</span><span class="nv">$t</span><span class="p">);</span>
<span class="linenos" data-linenos=" 9 "></span><span class="k">echo</span> <span class="s2">&quot;&lt;br&gt;La clase padre es: &quot;</span> <span class="o">.</span> <span class="nv">$padre</span><span class="p">;</span>
<span class="linenos" data-linenos="10 "></span><span class="nv">$objetoPadre</span> <span class="o">=</span> <span class="k">new</span> <span class="nv">$padre</span><span class="p">;</span>
<span class="linenos" data-linenos="11 "></span><span class="k">echo</span> <span class="nv">$objetoPadre</span><span class="o">-&gt;</span><span class="na">mostrarResumen</span><span class="p">();</span>
<span class="linenos" data-linenos="12 "></span>
<span class="linenos" data-linenos="13 "></span><span class="k">if</span> <span class="p">(</span><span class="nb">is_subclass_of</span><span class="p">(</span><span class="nv">$t</span><span class="p">,</span> <span class="s1">&#39;Producto&#39;</span><span class="p">))</span> <span class="p">{</span>
<span class="linenos" data-linenos="14 "></span>    <span class="k">echo</span> <span class="s2">&quot;&lt;br&gt;Soy un hijo de Producto&quot;</span><span class="p">;</span>
<span class="linenos" data-linenos="15 "></span><span class="p">}</span>
</code></pre></div>
<h3 id="polimorfisme">Polimorfisme<a class="headerlink" href="#polimorfisme" title="Permanent link">&para;</a></h3>
<p>Podem crear mètodes en els fills amb el mateix nom que el pare, canviant el seu comportament.
Per a invocar als mètodes del pare -&gt; <code>parent::nombreMetodo()</code></p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">class</span> <span class="nc">Tv</span> <span class="k">extends</span> <span class="nx">Producto</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span>   <span class="k">public</span> <span class="nv">$pulgadas</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span>   <span class="k">public</span> <span class="nv">$tecnologia</span><span class="p">;</span>
<span class="linenos" data-linenos=" 5 "></span>
<span class="linenos" data-linenos=" 6 "></span>   <span class="k">public</span> <span class="k">function</span> <span class="nf">mostrarResumen</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 7 "></span>      <span class="k">parent</span><span class="o">::</span><span class="na">mostrarResumen</span><span class="p">();</span>
<span class="linenos" data-linenos=" 8 "></span>      <span class="k">echo</span> <span class="s2">&quot;&lt;p&gt;TV &quot;</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">tecnologia</span><span class="o">.</span><span class="s2">&quot; de &quot;</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">pulgadas</span><span class="o">.</span><span class="s2">&quot;&lt;/p&gt;&quot;</span><span class="p">;</span>
<span class="linenos" data-linenos=" 9 "></span>   <span class="p">}</span>
<span class="linenos" data-linenos="10 "></span><span class="p">}</span>
</code></pre></div>
<h4 id="constructor-en-fills">Constructor en fills<a class="headerlink" href="#constructor-en-fills" title="Permanent link">&para;</a></h4>
<p>En els fills no es crea cap constructor de manera automàtica. Pel que si no n'hi ha, s'invoca automàticament al del pare. En canvi, si el definim en el fill, hem d'invocar al del pare de manera explícita.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">PHP7</label><label for="__tabbed_1_2">PHP8</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">class</span> <span class="nc">Producto</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="k">public</span> <span class="nx">string</span> <span class="nv">$codigo</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$codigo</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 6 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">codigo</span> <span class="o">=</span> <span class="nv">$codigo</span><span class="p">;</span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos=" 8 "></span>
<span class="linenos" data-linenos=" 9 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">mostrarResumen</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos="10 "></span>        <span class="k">echo</span> <span class="s2">&quot;&lt;p&gt;Prod:&quot;</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">codigo</span><span class="o">.</span><span class="s2">&quot;&lt;/p&gt;&quot;</span><span class="p">;</span>
<span class="linenos" data-linenos="11 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="12 "></span><span class="p">}</span>
<span class="linenos" data-linenos="13 "></span>
<span class="linenos" data-linenos="14 "></span><span class="k">class</span> <span class="nc">Tv</span> <span class="k">extends</span> <span class="nx">Producto</span> <span class="p">{</span>
<span class="linenos" data-linenos="15 "></span>    <span class="k">public</span> <span class="nv">$pulgadas</span><span class="p">;</span>
<span class="linenos" data-linenos="16 "></span>    <span class="k">public</span> <span class="nv">$tecnologia</span><span class="p">;</span>
<span class="linenos" data-linenos="17 "></span>
<span class="linenos" data-linenos="18 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">string </span><span class="nv">$codigo</span><span class="p">,</span> <span class="nx">int </span><span class="nv">$pulgadas</span><span class="p">,</span> <span class="nx">string </span><span class="nv">$tecnologia</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="19 "></span>        <span class="k">parent</span><span class="o">::</span><span class="na">__construct</span><span class="p">(</span><span class="nv">$codigo</span><span class="p">);</span>
<span class="linenos" data-linenos="20 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">pulgadas </span><span class="o">=</span> <span class="nv">$pulgadas</span><span class="p">;</span>
<span class="linenos" data-linenos="21 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">tecnologia </span><span class="o">=</span> <span class="nv">$tecnologia</span><span class="p">;</span>
<span class="linenos" data-linenos="22 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="23 "></span>
<span class="linenos" data-linenos="24 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">mostrarResumen</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos="25 "></span>        <span class="k">parent</span><span class="o">::</span><span class="na">mostrarResumen</span><span class="p">();</span>
<span class="linenos" data-linenos="26 "></span>        <span class="k">echo</span> <span class="s2">&quot;&lt;p&gt;TV &quot;</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">tecnologia</span><span class="o">.</span><span class="s2">&quot; de &quot;</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">pulgadas</span><span class="o">.</span><span class="s2">&quot;&lt;/p&gt;&quot;</span><span class="p">;</span>
<span class="linenos" data-linenos="27 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="28 "></span><span class="p">}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">class</span> <span class="nc">Producto</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="k">private</span> <span class="nx">string</span> <span class="nv">$codigo</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">mostrarResumen</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 6 "></span>        <span class="k">echo</span> <span class="s2">&quot;&lt;p&gt;Prod:&quot;</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">codigo</span><span class="o">.</span><span class="s2">&quot;&lt;/p&gt;&quot;</span><span class="p">;</span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="p">}</span>        
<span class="linenos" data-linenos=" 8 "></span><span class="p">}</span>
<span class="linenos" data-linenos=" 9 "></span>
<span class="linenos" data-linenos="10 "></span><span class="k">class</span> <span class="nc">Tv</span> <span class="k">extends</span> <span class="nx">Producto</span> <span class="p">{</span>
<span class="linenos" data-linenos="11 "></span>
<span class="linenos" data-linenos="12 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span>
<span class="linenos" data-linenos="13 "></span>        <span class="nx">string </span><span class="nv">$codigo</span><span class="p">,</span>
<span class="linenos" data-linenos="14 "></span>        <span class="k">private</span> <span class="nx">int </span><span class="nv">$pulgadas</span><span class="p">,</span>
<span class="linenos" data-linenos="15 "></span>        <span class="k">private</span> <span class="nx">string </span><span class="nv">$tecnologia</span><span class="p">)</span>
<span class="linenos" data-linenos="16 "></span>    <span class="p">{</span>
<span class="linenos" data-linenos="17 "></span>        <span class="k">parent</span><span class="o">::</span><span class="na">__construct</span><span class="p">(</span><span class="nv">$codigo</span><span class="p">);</span>
<span class="linenos" data-linenos="18 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="19 "></span>
<span class="linenos" data-linenos="20 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">mostrarResumen</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos="21 "></span>        <span class="k">parent</span><span class="o">::</span><span class="na">mostrarResumen</span><span class="p">();</span>
<span class="linenos" data-linenos="22 "></span>        <span class="k">echo</span> <span class="s2">&quot;&lt;p&gt;TV &quot;</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">tecnologia</span><span class="o">.</span><span class="s2">&quot; de &quot;</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">pulgadas</span><span class="o">.</span><span class="s2">&quot;&lt;/p&gt;&quot;</span><span class="p">;</span>
<span class="linenos" data-linenos="23 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="24 "></span><span class="p">}</span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="abstraccio">Abstracció<a class="headerlink" href="#abstraccio" title="Permanent link">&para;</a></h3>
<p>Les classes abstractes obliguen a heretar d'una classe, ja que no es permet la seua instanciación. Es defineix mitjançant <code>abstract class NombreClase {</code>.
Una classe abstracta pot contindre propietats i mètodes no-abstractes, i/o mètodes abstractes.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="c1">// Clase abstracta</span>
<span class="linenos" data-linenos=" 3 "></span><span class="k">abstract</span> <span class="k">class</span> <span class="nc">Producto </span><span class="p">{</span>
<span class="linenos" data-linenos=" 4 "></span>    <span class="k">private</span> <span class="nv">$codigo</span><span class="p">;</span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">getCodigo</span><span class="p">()</span> <span class="o">:</span> <span class="nx">string </span><span class="p">{</span>
<span class="linenos" data-linenos=" 6 "></span>        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">codigo</span><span class="p">;</span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos=" 8 "></span>    <span class="c1">// Método abstracto</span>
<span class="linenos" data-linenos=" 9 "></span>    <span class="k">abstract</span> <span class="k">public</span> <span class="k">function</span> <span class="nf">mostrarResumen</span><span class="p">();</span>
<span class="linenos" data-linenos="10 "></span><span class="p">}</span>
</code></pre></div>
<p>Quan una classe hereta d'una classe abstracta, obligatòriament ha d'implementar els mètodes que té el pare marcats com a abstractes.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">class</span> <span class="nc">Tv</span> <span class="k">extends</span> <span class="nx">Producto</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="k">public</span> <span class="nv">$pulgadas</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span>    <span class="k">public</span> <span class="nv">$tecnologia</span><span class="p">;</span>
<span class="linenos" data-linenos=" 5 "></span>
<span class="linenos" data-linenos=" 6 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">mostrarResumen</span><span class="p">()</span> <span class="p">{</span> <span class="c1">//obligado a implementarlo</span>
<span class="linenos" data-linenos=" 7 "></span>        <span class="k">echo</span> <span class="s2">&quot;&lt;p&gt;Código &quot;</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getCodigo</span><span class="p">()</span><span class="o">.</span><span class="s2">&quot;&lt;/p&gt;&quot;</span><span class="p">;</span>
<span class="linenos" data-linenos=" 8 "></span>        <span class="k">echo</span> <span class="s2">&quot;&lt;p&gt;TV &quot;</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">tecnologia</span><span class="o">.</span><span class="s2">&quot; de &quot;</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">pulgadas</span><span class="o">.</span><span class="s2">&quot;&lt;/p&gt;&quot;</span><span class="p">;</span>
<span class="linenos" data-linenos=" 9 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="10 "></span><span class="p">}</span>
<span class="linenos" data-linenos="11 "></span>
<span class="linenos" data-linenos="12 "></span><span class="nv">$t</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Tv</span><span class="p">();</span>
<span class="linenos" data-linenos="13 "></span><span class="k">echo</span> <span class="nv">$t</span><span class="o">-&gt;</span><span class="na">getCodigo</span><span class="p">();</span>
</code></pre></div>
<h4 id="classes-finals">Classes finals<a class="headerlink" href="#classes-finals" title="Permanent link">&para;</a></h4>
<p>Són classes oposades a abstractes, ja que eviten que es puga heretar una classe o mètode per a sobreescriure-ho.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">class</span> <span class="nc">Producto </span><span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="k">private</span> <span class="nv">$codigo</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">getCodigo</span><span class="p">()</span> <span class="o">:</span> <span class="nx">string </span><span class="p">{</span>
<span class="linenos" data-linenos=" 6 "></span>        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">codigo</span><span class="p">;</span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos=" 8 "></span>
<span class="linenos" data-linenos=" 9 "></span>    <span class="k">final</span> <span class="k">public</span> <span class="k">function</span> <span class="nf">mostrarResumen</span><span class="p">()</span> <span class="o">:</span> <span class="nx">string </span><span class="p">{</span>
<span class="linenos" data-linenos="10 "></span>        <span class="k">return</span> <span class="s2">&quot;Producto &quot;</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">codigo</span><span class="p">;</span>
<span class="linenos" data-linenos="11 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="12 "></span><span class="p">}</span>
<span class="linenos" data-linenos="13 "></span>
<span class="linenos" data-linenos="14 "></span><span class="c1">// No podremos heredar de Microondas</span>
<span class="linenos" data-linenos="15 "></span><span class="k">final</span> <span class="k">class</span> <span class="nc">Microondas extends Producto </span><span class="p">{</span>
<span class="linenos" data-linenos="16 "></span>    <span class="k">private</span> <span class="nv">$potencia</span><span class="p">;</span>
<span class="linenos" data-linenos="17 "></span>
<span class="linenos" data-linenos="18 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">getPotencia</span><span class="p">()</span> <span class="o">:</span> <span class="nx">int </span><span class="p">{</span>
<span class="linenos" data-linenos="19 "></span>        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">potencia</span><span class="p">;</span>
<span class="linenos" data-linenos="20 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="21 "></span>
<span class="linenos" data-linenos="22 "></span>    <span class="c1">// No podemos implementar mostrarResumen()</span>
<span class="linenos" data-linenos="23 "></span><span class="p">}</span>
</code></pre></div>
<h4 id="interficies">Interfícies<a class="headerlink" href="#interficies" title="Permanent link">&para;</a></h4>
<p>Permet definir un contracte amb les signatures dels mètodes a complir. Així doncs, només conté declaracions de funcions i totes han de ser públiques.</p>
<p>Es declaren amb la paraula clau <code>interface</code> i després les classes que complisquen el contracte el realitzen mitjançant la paraula clau <code>implements</code>.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="k">interface</span> <span class="nx">Nombreable</span> <span class="p">{</span>
<span class="linenos" data-linenos="3 "></span><span class="c1">// declaración de funciones</span>
<span class="linenos" data-linenos="4 "></span><span class="p">}</span>
<span class="linenos" data-linenos="5 "></span><span class="k">class</span> <span class="nc">NombreClase</span> <span class="k">implements</span> <span class="nx">NombreInterfaz</span> <span class="p">{</span>
<span class="linenos" data-linenos="6 "></span><span class="c1">// código de la clase</span>
</code></pre></div>
<p>Es permet l'herència d'interfícies. A més, una classe pot implementar diverses interfícies (en aquest cas, sí que suporta l'herència múltiple, però només d'interfícies).</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">interface</span> <span class="nx">Mostrable </span><span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">mostrarResumen</span><span class="p">()</span> <span class="o">:</span> <span class="nx">string</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span><span class="p">}</span>
<span class="linenos" data-linenos=" 5 "></span>
<span class="linenos" data-linenos=" 6 "></span><span class="k">interface</span> <span class="nx">MostrableTodo extends Mostrable </span><span class="p">{</span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">mostrarTodo</span><span class="p">()</span> <span class="o">:</span> <span class="nx">string</span><span class="p">;</span>
<span class="linenos" data-linenos=" 8 "></span><span class="p">}</span>
<span class="linenos" data-linenos=" 9 "></span>
<span class="linenos" data-linenos="10 "></span><span class="k">interface</span> <span class="nx">Facturable </span><span class="p">{</span>
<span class="linenos" data-linenos="11 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">generarFactura</span><span class="p">()</span> <span class="o">:</span> <span class="nx">string</span><span class="p">;</span>
<span class="linenos" data-linenos="12 "></span><span class="p">}</span>
<span class="linenos" data-linenos="13 "></span>
<span class="linenos" data-linenos="14 "></span><span class="k">class</span> <span class="nc">Producto implements MostrableTodo</span><span class="p">,</span> <span class="nx">Facturable </span><span class="p">{</span>
<span class="linenos" data-linenos="15 "></span>    <span class="c1">// Implementaciones de los métodos</span>
<span class="linenos" data-linenos="16 "></span>    <span class="c1">// Obligatoriamente deberá implementar public function mostrarResumen, mostrarTodo y generarFactura</span>
<span class="linenos" data-linenos="17 "></span><span class="p">}</span>
</code></pre></div>
<h4 id="metodes-encadenats">Mètodes encadenats<a class="headerlink" href="#metodes-encadenats" title="Permanent link">&para;</a></h4>
<p>Segueix el plantejament de la programació funcional, i també es coneix com <em>method chaining</em>. Planteja que sobre un objecte es realitzen diverses crides.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="nv">$p1 </span><span class="o">=</span> <span class="k">new</span> <span class="nx">Libro</span><span class="p">();</span>
<span class="linenos" data-linenos=" 3 "></span><span class="nv">$p1</span><span class="o">-&gt;</span><span class="na">setNombre</span><span class="p">(</span><span class="s2">&quot;Harry Potter&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos=" 4 "></span><span class="nv">$p1</span><span class="o">-&gt;</span><span class="na">setAutor</span><span class="p">(</span><span class="s2">&quot;JK Rowling&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos=" 5 "></span><span class="k">echo</span> <span class="nv">$p1</span><span class="p">;</span>
<span class="linenos" data-linenos=" 6 "></span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">// Method chaining</span>
<span class="linenos" data-linenos=" 8 "></span><span class="nv">$p2 </span><span class="o">=</span> <span class="k">new</span> <span class="nx">Libro</span><span class="p">();</span>
<span class="linenos" data-linenos=" 9 "></span><span class="nv">$p2</span><span class="o">-&gt;</span><span class="na">setNombre</span><span class="p">(</span><span class="s2">&quot;Patria&quot;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">setAutor</span><span class="p">(</span><span class="s2">&quot;Aramburu&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos="10 "></span><span class="k">echo</span> <span class="nv">$p2</span><span class="p">;</span>
</code></pre></div>
<p>Per a facilitar-ho, modificarem tots els seus mètodes mutants (que modifiquen dades, setters*, ...) perquè retornen una referència a <code>$this</code>:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">class</span> <span class="nc">Libro </span><span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="k">private</span> <span class="nx">string </span><span class="nv">$nombre</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span>    <span class="k">private</span> <span class="nx">string </span><span class="nv">$autor</span><span class="p">;</span>
<span class="linenos" data-linenos=" 5 "></span>
<span class="linenos" data-linenos=" 6 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">getNombre</span><span class="p">()</span> <span class="o">:</span> <span class="nx">string </span><span class="p">{</span>
<span class="linenos" data-linenos=" 7 "></span>        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">nombre</span><span class="p">;</span>
<span class="linenos" data-linenos=" 8 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos=" 9 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">setNombre</span><span class="p">(</span><span class="nx">string </span><span class="nv">$nombre</span><span class="p">)</span> <span class="o">:</span> <span class="nx">Libro </span><span class="p">{</span> 
<span class="linenos" data-linenos="10 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">nombre </span><span class="o">=</span> <span class="nv">$nombre</span><span class="p">;</span>
<span class="linenos" data-linenos="11 "></span>        <span class="k">return</span> <span class="nv">$this</span><span class="p">;</span>
<span class="linenos" data-linenos="12 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="13 "></span>
<span class="linenos" data-linenos="14 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">getAutor</span><span class="p">()</span> <span class="o">:</span> <span class="nx">string </span><span class="p">{</span>
<span class="linenos" data-linenos="15 "></span>        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">autor</span><span class="p">;</span>
<span class="linenos" data-linenos="16 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="17 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">setAutor</span><span class="p">(</span><span class="nx">string </span><span class="nv">$autor</span><span class="p">)</span> <span class="o">:</span> <span class="nx">Libro </span><span class="p">{</span>
<span class="linenos" data-linenos="18 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">autor </span><span class="o">=</span> <span class="nv">$autor</span><span class="p">;</span>
<span class="linenos" data-linenos="19 "></span>        <span class="k">return</span> <span class="nv">$this</span><span class="p">;</span>
<span class="linenos" data-linenos="20 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="21 "></span>
<span class="linenos" data-linenos="22 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__toString</span><span class="p">()</span> <span class="o">:</span> <span class="nx">string </span><span class="p">{</span>
<span class="linenos" data-linenos="23 "></span>        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">nombre</span><span class="o">.</span><span class="s2">&quot; de &quot;</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">autor</span><span class="p">;</span>
<span class="linenos" data-linenos="24 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="25 "></span><span class="p">}</span>
</code></pre></div>
<h4 id="metodes-magics">Mètodes màgics<a class="headerlink" href="#metodes-magics" title="Permanent link">&para;</a></h4>
<p>Totes les classes PHP ofereixen un conjunt de mètodes, també coneguts com <em>magic methods</em> que es poden sobreescriure per a substituir el seu comportament. Alguns d'ells ja els hem utilitzats.</p>
<p>Davant qualsevol dubte, és convenient consultar la <a href="https://www.php.net/manual/es/language.oop5.magic.php">documentació oficial</a>.</p>
<p>Els més destacables són:</p>
<ul>
<li><code>__construct()</code></li>
<li><code>__destruct()</code> → s'invoca en perdre la referència. S'utilitza per a tancar una connexió a la BD, tancar un fitxer, ...</li>
<li><code>__toString()</code> → representació de l'objecte com a cadena. És a dir, quan fem <code>echo $objecte</code> s'executa automàticament aquest mètode.</li>
<li><code>__get(propietat)</code>, <code>__set(propietat, valor)</code> → Permetria accedir a les propietat privades, encara que sempre és més llegible/mantenible codificar els <em>getter/setter</em>.</li>
<li><code>__isset(propietat)</code>, <code>__unset(propietat)</code> → Permet esbrinar o llevar el valor a una propietat.</li>
<li><code>__sleep()</code>, <code>__wakeup()</code> → S'executen en recuperar (<em>unserialize^) o emmagatzemar un objecte que se serialitza (</em>serialize), i s'utilitzen per a permet definir quines propietats se serialitzen.</li>
<li><code>__call()</code>, <code>__callStatic()</code> → S'executen en cridar a un mètode que no és públic. Permeten sobrecarreguen mètodes.</li>
</ul>
<h2 id="3-espai-de-noms">3. Espai de noms<a class="headerlink" href="#3-espai-de-noms" title="Permanent link">&para;</a></h2>
<p>Des de PHP 5.3 i també coneguts com <em>Namespaces</em>, permeten organitzar les classes/interfícies, funcions i/o constants de manera similar als paquets a <em>Java</em>.</p>
<div class="admonition tip">
<p class="admonition-title">Recomanació</p>
<p>Un només namespace per arxiu i crear una estructura de carpetes respectant els nivells/subnivells (igual que es fa a Java)</p>
</div>
<p>Es declaren en la primera línia mitjançant la paraula clau <code>namespace</code> seguida del nom de l'espai de noms assignat (cada subnivell se separa amb la barra invertida <code>\</code>):</p>
<p>Per exemple, per a col·locar la classe <code>Producte</code> dins del <em>namespace</em> <code>Dwes\Exemples</code> ho faríem així:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">namespace</span> <span class="nx">Dwes\Exemples</span><span class="p">;</span>
<span class="linenos" data-linenos=" 3 "></span>
<span class="linenos" data-linenos=" 4 "></span><span class="k">const</span> <span class="no">IVA </span><span class="o">=</span> <span class="mf">0.21</span><span class="p">;</span>
<span class="linenos" data-linenos=" 5 "></span>
<span class="linenos" data-linenos=" 6 "></span><span class="k">class</span> <span class="nc">Producte </span><span class="p">{</span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="k">public</span> <span class="nv">$nombre</span><span class="p">;</span>
<span class="linenos" data-linenos=" 8 "></span>      
<span class="linenos" data-linenos=" 9 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">muestra</span><span class="p">()</span> <span class="o">:</span> <span class="nx">void </span><span class="p">{</span>
<span class="linenos" data-linenos="10 "></span>        <span class="k">echo</span><span class="s2">&quot;&lt;p&gt;Prod:&quot;</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">nombre </span><span class="o">.</span> <span class="s2">&quot;&lt;/p&gt;&quot;</span><span class="p">;</span>
<span class="linenos" data-linenos="11 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="12 "></span><span class="p">}</span>
</code></pre></div>
<h4 id="acces">Accés<a class="headerlink" href="#acces" title="Permanent link">&para;</a></h4>
<p>Per a referenciar a un recurs que conté un namespace, primer hem de tindre'l disponible fent ús de <code>include</code> o <code>require</code>. Si el recurs està en el mateix <em>namespace</em>, es realitza un accés directe (es coneix com a accés sense qualificar).</p>
<p>Realment hi ha tres tipus d'accés:</p>
<ul>
<li>sense qualificar: <code>recurs</code></li>
<li>qualificat: <code>rutaRelativa\recurs</code> → no fa falta posar el <em>namespace</em> complet</li>
<li>totalment qualificat: <code>\rutaAbsoluta\recurs</code></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">namespace</span> <span class="nx">Dwes\Ejemplos</span><span class="p">;</span>
<span class="linenos" data-linenos=" 3 "></span>
<span class="linenos" data-linenos=" 4 "></span><span class="k">include_once</span><span class="p">(</span><span class="s2">&quot;Producto.php&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos=" 5 "></span>
<span class="linenos" data-linenos=" 6 "></span><span class="k">echo</span> <span class="nx">IVA</span><span class="p">;</span> <span class="c1">// sin cualificar</span>
<span class="linenos" data-linenos=" 7 "></span><span class="k">echo</span> <span class="nx">Utilidades\IVA</span><span class="p">;</span> <span class="c1">// acceso cualificado. Daría error, no existe \Dwes\Ejemplos\Utilidades\IVA</span>
<span class="linenos" data-linenos=" 8 "></span><span class="k">echo</span> <span class="nx">\Dwes\Ejemplos\IVA</span><span class="p">;</span> <span class="c1">// totalmente cualificado</span>
<span class="linenos" data-linenos=" 9 "></span>
<span class="linenos" data-linenos="10 "></span><span class="nv">$p1 </span><span class="o">=</span> <span class="k">new</span> <span class="nx">Producto</span><span class="p">();</span> <span class="c1">// lo busca en el mismo namespace y encuentra \Dwes\Ejemplos\Producto</span>
<span class="linenos" data-linenos="11 "></span><span class="nv">$p2 </span><span class="o">=</span> <span class="k">new</span> <span class="nx">Model\Producto</span><span class="p">();</span> <span class="c1">// daría error, no existe el namespace Model. Está buscando \Dwes\Ejemplos\Model\Producto</span>
<span class="linenos" data-linenos="12 "></span><span class="nv">$p3 </span><span class="o">=</span> <span class="k">new</span> <span class="nx">\Dwes\Ejemplos\Producto</span><span class="p">();</span> <span class="c1">// \Dwes\Ejemplos\Producto</span>
</code></pre></div>
<h4 id="acces_1">Accés<a class="headerlink" href="#acces_1" title="Permanent link">&para;</a></h4>
<p>Per a evitar la referència qualificada podem declarar l'ús mitjançant <code>use</code> (similar a fer <code>import</code> a Java). Es fa en la capçalera, després del <code>namespace</code>:</p>
<p>Els tipus Posibles són:</p>
<ul>
<li><code>use const nombreCualificadoConstante</code></li>
<li><code>use function nombreCualificadoFuncion</code></li>
<li><code>use nombreCualificadoClase</code></li>
<li><code>use nombreCualificadoClase as NuevoNombre</code> // per a canviar de nom elements</li>
</ul>
<p>Per exemple, si volem utilitzar la classe <code>\Dwes\Exemples\Producte</code> des d'un recurs que es troba en l'arrel, per exemple en <code>inici.php</code>, faríem:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="k">include_once</span><span class="p">(</span><span class="s2">&quot;Dwes\Exemples\Producte.php&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos="3 "></span>
<span class="linenos" data-linenos="4 "></span><span class="k">use</span> <span class="k">const</span> <span class="no">Dwes\Exemples\IVA</span><span class="p">;</span>
<span class="linenos" data-linenos="5 "></span><span class="k">use</span> <span class="nx">\Dwes\Exemples\Producte</span><span class="p">;</span>
<span class="linenos" data-linenos="6 "></span>
<span class="linenos" data-linenos="7 "></span><span class="k">echo</span> <span class="nx">IVA</span><span class="p">;</span>
<span class="linenos" data-linenos="8 "></span><span class="nv">$p1 </span><span class="o">=</span> <span class="k">new</span> <span class="nx">Producte</span><span class="p">();</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">To <code>use</code> or not to <code>use</code></p>
<p>En resum, <code>use</code> permet accedir sense qualificar a recursos que estan en un altre <em>namespace</em>. Si estem en el mateix espai de nom, no necessitem <code>use</code>.</p>
</div>
<h4 id="organitzacio">Organització<a class="headerlink" href="#organitzacio" title="Permanent link">&para;</a></h4>
<p>Tot projecte, conforme creix, necessita organitzar el seu codi font. Es planteja una organització en la qual els arxius que interactuan amb el navegador es col·loquen en l'arrel, i les classes que definim van dins d'un namespace (i dins de la seua pròpia carpeta <code>src</code> o <code>app</code>).</p>
<figure>
<img src="imagenes/03/03organizacion.png">
<figcaption>Organització del codi font</figcaption>
</figure>

<div class="admonition tip">
<p class="admonition-title">Organització, includes i usos</p>
<ul>
<li>Col·locarem cada recurs en un fitxer a part.</li>
<li>En la primera línia indicarem la seua <em>namespace</em> (si no està en l'arrel).</li>
<li>Si utilitzem altres recursos, farem un <code>include_once</code> d'aqueixos recursos (classes, interfícies, etc...).</li>
<li>Cada recurs ha d'incloure tots els altres recursos que referencie: la classe de la qual hereta, interfícies que implementa, classes utilitzades/rebudes com a paràmetres, etc...</li>
<li>Si els recursos estan en un espai de noms diferent al que estem, emprarem <code>use</code> amb la ruta completa per a després utilitzar referències sense qualificar.</li>
</ul>
</div>
<h4 id="autoload">Autoload<a class="headerlink" href="#autoload" title="Permanent link">&para;</a></h4>
<p>No és tediós haver de fer el <code>include</code> de les classes? El autoload ve al rescat.</p>
<p>Així doncs, permet carregar les classes (no les constants ni les funcions) que s'utilitzaran i evitar haver de fer el <code>include_once</code> de cadascuna d'elles. Per a això, es pot utilitzar el composer.</p>
<h2 id="4-composer">4. Composer<a class="headerlink" href="#4-composer" title="Permanent link">&para;</a></h2>
<figure style="float: right;">
    <img src="imagenes/05/logo-composer.png" width="200">
    <figcaption>Logo Composer</figcaption>
</figure>

<p>Eina per excel·lència en PHP per a la gestió de llibreries i dependències, de manera que instal·la i les actualitza assegurant que tot l'equip de desenvolupament té el mateix entorn i versions. A més, ofereix <em>autoloading</em> del nostre codi, de manera que no hàgem de fer-lo nosaltres "a mà".</p>
<p>Està escrit en PHP, i podeu consultar tota la seua documentació en <a href="https://getcomposer.org/">https://getcomposer.org/</a>.</p>
<p>Utilitza <a href="https://packagist.org/"><em>Packagist</em></a> com a repositori de llibreries.</p>
<p>Funcionalment, és similar a Maven (Java) / npm (JS).</p>
<h3 id="installacio">Instal·lació<a class="headerlink" href="#installacio" title="Permanent link">&para;</a></h3>
<p>Si estem usant XAMPP, hem d'instal·lar <em>Composer</em> en el propi sistema operatiu. Es recomana seguir les <a href="https://getcomposer.org/doc/00-intro.md">instruccions oficials</a> segons el sistema operatiu a emprar.</p>
<p>En canvi, si usem <em>Docker</em>, necessitem modificar la configuració del nostre contenidor. En el nostre cas, hem decidit modificar l'arxiu <code>Dockerfile</code> i afegir el següent comando:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>composer:2.0<span class="w"> </span>/usr/bin/composer<span class="w"> </span>/usr/local/bin/composer
</code></pre></div>
<p>És important que dins del contenidor comprovem que tenim la v2:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>composer<span class="w"> </span>-V
</code></pre></div>
<h3 id="primers-passos">Primers passos<a class="headerlink" href="#primers-passos" title="Permanent link">&para;</a></h3>
<p>Quan creem un projecte per primera vegada, hem d'inicialitzar el repositori. Per a això, executarem el comando <code>composer init</code> on:</p>
<ul>
<li>Configurem el nom del paquet, descripció, autor (nom <email>), tipus de paquet (project), etc...</li>
<li>Definim les dependències del projecte (<code>require</code>) i les de desenvolupament (<code>require-dev</code>) de manera interactiva.</li>
<li>En les de desenvolupament s'indica aquelles que no s'instal·laran a l'entorn de producció, per exemple, les llibreries de proves.</li>
</ul>
<p>Després de la seua configuració, es crearà automàticament l'arxiu <code>composer.json</code> amb les dades introduïdes i descàrrega les llibreries en la carpeta <code>vendor</code>. La instal·lació de les llibreries sempre es realitza de manera local per a cada projecte.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="p">{</span>
<span class="linenos" data-linenos=" 2 "></span><span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;dwes/log&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos=" 3 "></span><span class="w">    </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Pruebas con Monolog&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos=" 4 "></span><span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;project&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos=" 5 "></span><span class="w">    </span><span class="nt">&quot;require&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 6 "></span><span class="w">        </span><span class="nt">&quot;monolog/monolog&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^2.1&quot;</span>
<span class="linenos" data-linenos=" 7 "></span><span class="w">    </span><span class="p">},</span>
<span class="linenos" data-linenos=" 8 "></span><span class="w">    </span><span class="nt">&quot;license&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;MIT&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos=" 9 "></span><span class="w">    </span><span class="nt">&quot;authors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="linenos" data-linenos="10 "></span><span class="w">        </span><span class="p">{</span>
<span class="linenos" data-linenos="11 "></span><span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Aitor Medrano&quot;</span><span class="p">,</span>
<span class="linenos" data-linenos="12 "></span><span class="w">            </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a.medrano@edu.gva.es&quot;</span>
<span class="linenos" data-linenos="13 "></span><span class="w">        </span><span class="p">}</span>
<span class="linenos" data-linenos="14 "></span><span class="w">    </span><span class="p">]</span>
<span class="linenos" data-linenos="15 "></span><span class="p">}</span>
</code></pre></div>
<p>A l'hora d'indicar cada llibreria introduirem:</p>
<ul>
<li>el nom de la llibreria, composta tant pel creador o "vendor", com pel nom del projecte. Exemples: <code>monolog/monolog</code> o <code>laravel/installer</code>.</li>
<li>
<p>la versió de cada llibreria. Tenim diverses opcions per a indicar-la:</p>
<ul>
<li>Directament: 1.4.2</li>
<li>Amb comodins: 1.</li>
<li>A partir de: &gt;= 2.0.3</li>
<li>Sense trencament de canvis: ^1.3.2 // &gt;=1.3.2 &lt;2.0.0</li>
</ul>
</li>
</ul>
<h3 id="actualitzar-llibreries">Actualitzar llibreries<a class="headerlink" href="#actualitzar-llibreries" title="Permanent link">&para;</a></h3>
<p>Podem definir les dependències via l'arxiu <code>composer.json</code> o mitjançant comandos amb el format <code>composer require vendor/package:version</code>. Per exemple, si volem afegir phpUnit com a llibreria de desenvolupament, farem:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>composer<span class="w"> </span>require<span class="w"> </span>phpunit/phpunit<span class="w"> </span>–dev
</code></pre></div>
<p>Després d'afegir noves llibreries, hem d'actualitzar el nostre projecte:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>composer<span class="w"> </span>update
</code></pre></div>
<p>Si creem l'arxiu <code>composer.json</code> nosaltres directament sense inicialitzar el repositori, hem d'instal·lar les dependències:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>composer<span class="w"> </span>install
</code></pre></div>
<p>En fer aquest pas (tant instal·lar com actualitzar), com ja hem comentat, es descarreguen les llibreries en dins de la carpeta <code>vendor</code>. És molt important afegir aquesta carpeta a l'arxiu <code>.gitignore</code> per a no pujar-les a GitHub.</p>
<p>A més es crea l'arxiu <code>composer.lock</code>, que emmagatzema la versió exacta que s'ha instal·lat de cada llibreria (aquest arxiu no es toca).</p>
<h3 id="autoloadphp"><code>autoload.php</code><a class="headerlink" href="#autoloadphp" title="Permanent link">&para;</a></h3>
<p><em>Composer</em> crea de manera automàtica en <code>vendor/autoload.php</code> el codi per a incloure de manera automàtica totes les llibreries que tinguem configurades en <code>composer.json</code>.</p>
<p>Per a utilitzar-ho, en la capçalera del nostre arxius posarem:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="k">require</span> <span class="s1">&#39;vendor/autoload.php&#39;</span><span class="p">;</span>
</code></pre></div>
<p>En el nostre cas, de moment només el podrem en els arxius on provem les classes</p>
<p>Si volem que Composer també s'encarregue de carregar de manera automàtica les nostres classes de domini, dins de l'arxiu <code>composer.json</code>, definirem la propietat <code>autoload</code>:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nt">&quot;autoload&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="2 "></span><span class="w">    </span><span class="nt">&quot;psr-4&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;Dwes\\&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;app/Dwes&quot;</span><span class="p">}</span>
<span class="linenos" data-linenos="3 "></span><span class="p">},</span>
</code></pre></div>
<p>Posteriorment, hem de tornar a generar el <em>autoload</em> de <em>Composer</em> mitjançant l'opció <code>dump-autoload</code> (o <code>du</code>):</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>composer<span class="w"> </span>dump-autoload
</code></pre></div>
<h2 id="5-logger-amb-monolog">5. Logger amb Monolog<a class="headerlink" href="#5-logger-amb-monolog" title="Permanent link">&para;</a></h2>
<p>Provarem <em>Composer</em> afegint la llibreria de <a href="https://github.com/seldaek/monolog"><em>Monolog</em></a> al nostre projecte. Es tracta d'un llibreria per a la gestió de logs de les nostres aplicacions, suportant diferents nivells (info, warning, etc...), eixides (fitxers, sockets, BBDD, Web Services, email, etc) i formats (text pla, HTML, JSON, etc...).</p>
<p>Per a això, inclourem la llibreria en el nostre projecte amb:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>composer<span class="w"> </span>require<span class="w"> </span>monolog/monolog
</code></pre></div>
<p>Monolog 2 requereix almenys PHP 7.2, compleix amb el estandar de logging PSR-3, i és la llibreria emprada per <em>Laravel</em> i <em>Symfony</em> per a la gestió de logs.</p>
<div class="admonition info">
<p class="admonition-title">Quan utilitzar un log</p>
<ul>
<li>Seguir les acciones/moviments dels usuaris</li>
<li>Registrar les transaccions</li>
<li>Rastrejar els errors d'usuari</li>
<li>Fallades/avisos a nivell de sistema</li>
<li>Interpretar i col·leccionar dades per a posterior investigació de patrons</li>
</ul>
</div>
<h3 id="nivells">Nivells<a class="headerlink" href="#nivells" title="Permanent link">&para;</a></h3>
<p>A continuació vam mostrar els diferents nivells de menys a més restrictiu:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>* debug -100: Informació detallada amb propòsits de debug. No usar en entorns de producció.
<span class="linenos" data-linenos="2 "></span>* info - 200: Esdeveniments interessants com l&#39;inici de sessió d&#39;usuaris.
<span class="linenos" data-linenos="3 "></span>* notice - 250: Esdeveniments normals però significatius.
<span class="linenos" data-linenos="4 "></span>* warning - 300: Ocurrències excepcionals que no arriben a ser error.
<span class="linenos" data-linenos="5 "></span>* error - 400: Errors d&#39;execució que permeten continuar amb l&#39;execució de l&#39;aplicació però que han de ser monitorats.
<span class="linenos" data-linenos="6 "></span>* critical - 500: Situacions importants on es generen excepcions no esperades o no hi ha disponible un component.
<span class="linenos" data-linenos="7 "></span>* alert - 550: S&#39;han de prendre mesures immediatament.
<span class="linenos" data-linenos="8 "></span>  Caiguda completa de la web, base de dades no disponible, etc... A més, se solen enviar missatges per email.
<span class="linenos" data-linenos="9 "></span>* emergency - 600: És l&#39;error més greu i indica que tot el sistema està inutilitzable.
</code></pre></div>
<h3 id="hola-monolog">Hola Monolog<a class="headerlink" href="#hola-monolog" title="Permanent link">&para;</a></h3>
<p>Per exemple, en l'arxiu <code>pruebaLog.php</code> que col·locaríem en l'arrel, primer incloem el <strong>autoload</strong>, importem els classes a utilitzar per a finalment usar els mètodes de <strong>Monolog</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">include</span> <span class="no">__DIR__</span> <span class="o">.</span><span class="s2">&quot;/vendor/autoload.php&quot;</span><span class="p">;</span>
<span class="linenos" data-linenos=" 3 "></span>
<span class="linenos" data-linenos=" 4 "></span><span class="k">use</span> <span class="nx">Monolog\Level</span><span class="p">;</span>
<span class="linenos" data-linenos=" 5 "></span><span class="k">use</span> <span class="nx">Monolog\Logger</span><span class="p">;</span>
<span class="linenos" data-linenos=" 6 "></span><span class="k">use</span> <span class="nx">Monolog\Handler\StreamHandler</span><span class="p">;</span>
<span class="linenos" data-linenos=" 7 "></span>
<span class="linenos" data-linenos=" 8 "></span><span class="nv">$log</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Logger</span><span class="p">(</span><span class="s2">&quot;MiLogger&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos=" 9 "></span><span class="nv">$log</span><span class="o">-&gt;</span><span class="na">pushHandler</span><span class="p">(</span><span class="k">new</span> <span class="nx">StreamHandler</span><span class="p">(</span><span class="s2">&quot;logs/milog.log&quot;</span><span class="p">,</span> <span class="nx">Level</span><span class="o">::</span><span class="na">Debug</span><span class="p">));</span>
<span class="linenos" data-linenos="10 "></span>
<span class="linenos" data-linenos="11 "></span><span class="nv">$log</span><span class="o">-&gt;</span><span class="na">debug</span><span class="p">(</span><span class="s2">&quot;Esto es un mensaje de DEBUG&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos="12 "></span><span class="nv">$log</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">(</span><span class="s2">&quot;Esto es un mensaje de INFO&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos="13 "></span><span class="nv">$log</span><span class="o">-&gt;</span><span class="na">warning</span><span class="p">(</span><span class="s2">&quot;Esto es un mensaje de WARNING&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos="14 "></span><span class="nv">$log</span><span class="o">-&gt;</span><span class="na">error</span><span class="p">(</span><span class="s2">&quot;Esto es un mensaje de ERROR&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos="15 "></span><span class="nv">$log</span><span class="o">-&gt;</span><span class="na">critical</span><span class="p">(</span><span class="s2">&quot;Esto es un mensaje de CRITICAL&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos="16 "></span><span class="nv">$log</span><span class="o">-&gt;</span><span class="na">alert</span><span class="p">(</span><span class="s2">&quot;Esto es un mensaje de ALERT&quot;</span><span class="p">);</span>
</code></pre></div>
<p>En tots els mètodes de registre de missatges (<code>debug</code>, <code>info</code>, ...), a més del propi missatge, li podem passar informació com el contingut d'alguna variable, usuari de l'aplicació, etc.. com a segon paràmetre dins d'un array, el qual es coneix com <strong>array de contexte</strong>.
És convenient fer-ho mitjançant un array associatiu per a facilitar la lectura del log.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="nv">$log</span><span class="o">-&gt;</span><span class="na">warning</span><span class="p">(</span><span class="s2">&quot;Producto no encontrado&quot;</span><span class="p">,</span> <span class="p">[</span><span class="nv">$producto</span><span class="p">]);</span>
<span class="linenos" data-linenos="3 "></span><span class="nv">$log</span><span class="o">-&gt;</span><span class="na">warning</span><span class="p">(</span><span class="s2">&quot;Producto no encontrado&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;datos&quot;</span> <span class="o">=&gt;</span> <span class="nv">$producto</span><span class="p">]);</span>
</code></pre></div>
<h3 id="funcionament">Funcionament<a class="headerlink" href="#funcionament" title="Permanent link">&para;</a></h3>
<p>Cada instància <code>Logger</code> té un nom de canal i una pila de manejadores (<strong>handler</strong>).
Cada missatge que manem al log travessa la pila de manejadores, i cadascun decideix si ha de registrar la informació, i si es dona el cas, finalitzar la propagació.
Per exemple, un <code>StreamHandler</code> en el fons de la pila que ho escriga tot en disc, i en el topall afig un <code>MailHandler</code> que envie un mail només quan hi haja un error.</p>
<p>Els manejadores més utilitzats són:</p>
<ul>
<li><code>StreamHandler(ruta, nivel)</code></li>
<li><code>RotatingFileHandler(ruta, maxFiles, nivel)</code></li>
<li><code>NativeMailerHandler(para, asunto, desde, nivel)</code></li>
<li><code>FirePHPHandler(nivel)</code></li>
</ul>
<p>Per exemple: Si volem que els missatges de l'aplicació isquen pel log del servidor,
en el nostre cas l'arxiu <code>error.log</code> de <strong>Apatxe</strong> utilitzarem com a ruta l'eixida d'error:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="c1">// error.log</span>
<span class="linenos" data-linenos="3 "></span><span class="nv">$log</span><span class="o">-&gt;</span><span class="na">pushHandler</span><span class="p">(</span><span class="k">new</span> <span class="nx">StreamHandler</span><span class="p">(</span><span class="s2">&quot;php://stderr&quot;</span><span class="p">,</span> <span class="nx">Level</span><span class="o">::</span><span class="na">Debug</span><span class="p">));</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">FirePHP</p>
<p>Per exemple, mitjançant <code>FirePHPHandler</code>, podem utilitzar <code>FirePHP</code>, la qual és una eina per a fer debug en la consola de Firefox<em>.
Després d'instal·lar l'extensió en Firefox, habilitar les opcions i configurar el </em><em>Handler</em>*, podem veure els missatges acolorits amb les seues dades:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="nv">$log</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Logger</span><span class="p">(</span><span class="s2">&quot;MiFirePHPLogger&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos="3 "></span><span class="nv">$log</span><span class="o">-&gt;</span><span class="na">pushHandler</span><span class="p">(</span><span class="k">new</span> <span class="nx">FirePHPHandler</span><span class="p">(</span><span class="nx">Level</span><span class="o">::</span><span class="na">INFO</span><span class="p">));</span>
<span class="linenos" data-linenos="4 "></span>
<span class="linenos" data-linenos="5 "></span><span class="nv">$datos</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;real&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;Bruce Wayne&quot;</span><span class="p">,</span> <span class="s2">&quot;personaje&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;Batman&quot;</span><span class="p">];</span>
<span class="linenos" data-linenos="6 "></span><span class="nv">$log</span><span class="o">-&gt;</span><span class="na">debug</span><span class="p">(</span><span class="s2">&quot;Esto es un mensaje de DEBUG&quot;</span><span class="p">,</span> <span class="nv">$datos</span><span class="p">);</span>
<span class="linenos" data-linenos="7 "></span><span class="nv">$log</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">(</span><span class="s2">&quot;Esto es un mensaje de INFO&quot;</span><span class="p">,</span> <span class="nv">$datos</span><span class="p">);</span>
<span class="linenos" data-linenos="8 "></span><span class="nv">$log</span><span class="o">-&gt;</span><span class="na">warning</span><span class="p">(</span><span class="s2">&quot;Esto es un mensaje de WARNING&quot;</span><span class="p">,</span> <span class="nv">$datos</span><span class="p">);</span>
<span class="linenos" data-linenos="9 "></span><span class="c1">// ...</span>
</code></pre></div>
<p><figure style="align: center;">
    <img src="imagenes/05/firePhp.png">
    <figcaption>Ejemplo de uso de FirePHP</figcaption>
</figure></p>
</div>
<h3 id="manejadors">Manejadors<a class="headerlink" href="#manejadors" title="Permanent link">&para;</a></h3>
<p>Si no s'indica cap, se li assigna un per defecte. L'últim manejador inserit serà el primer a executar-se.
Després es van executant conforme a la pila.</p>
<h3 id="processadors">Processadors<a class="headerlink" href="#processadors" title="Permanent link">&para;</a></h3>
<p>Els processadors permeten afegir informació als missatges.
Per a això, s'apilen després de cada manejador mitjançant el mètode <code>pushProcessor($processador)</code>.</p>
<p>Alguns processadors coneguts són <code>IntrospectionProcessor</code> (mostren la línia, fitxer, classe i metodo des del qual s'invoca el log), <code>WebProcessor</code> (afig la URI, mètode i IP) o <code>GitProcessor</code> (afig la branca i el commit).</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">PHP</label><label for="__tabbed_2_2">Consola en format text</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="nv">$log</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Logger</span><span class="p">(</span><span class="s2">&quot;MiLogger&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos="3 "></span><span class="nv">$log</span><span class="o">-&gt;</span><span class="na">pushHandler</span><span class="p">(</span><span class="k">new</span> <span class="nx">RotatingFileHandler</span><span class="p">(</span><span class="s2">&quot;logs/milog.log&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">Level</span><span class="o">::</span><span class="na">DEBUG</span><span class="p">));</span>
<span class="linenos" data-linenos="4 "></span><span class="nv">$log</span><span class="o">-&gt;</span><span class="na">pushProcessor</span><span class="p">(</span><span class="k">new</span> <span class="nx">IntrospectionProcessor</span><span class="p">());</span>
<span class="linenos" data-linenos="5 "></span><span class="nv">$log</span><span class="o">-&gt;</span><span class="na">pushHandler</span><span class="p">(</span><span class="k">new</span> <span class="nx">StreamHandler</span><span class="p">(</span><span class="s2">&quot;php://stderr&quot;</span><span class="p">,</span> <span class="nx">Level</span><span class="o">::</span><span class="na">WARNING</span><span class="p">));</span>
<span class="linenos" data-linenos="6 "></span><span class="c1">// no usa Introspection pq lo hemos apilado después, le asigno otro</span>
<span class="linenos" data-linenos="7 "></span><span class="nv">$log</span><span class="o">-&gt;</span><span class="na">pushProcessor</span><span class="p">(</span><span class="k">new</span> <span class="nx">WebProcessor</span><span class="p">());</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>[2020-11-26T13:35:31.076138+01:00] MiLogger.DEBUG: Esto es un mensaje de DEBUG [] {&quot;file&quot;:&quot;C:\\xampp\\htdocs\\log\\procesador.php&quot;,&quot;line&quot;:12,&quot;class&quot;:null,&quot;function&quot;:null}
<span class="linenos" data-linenos="2 "></span>[2020-11-26T13:35:31.078344+01:00] MiLogger.INFO: Esto es un mensaje de INFO [] {&quot;file&quot;:&quot;C:\\xampp\\htdocs\\log\\procesador.php&quot;,&quot;line&quot;:13,&quot;class&quot;:null,&quot;function&quot;:null}
</code></pre></div>
</div>
</div>
</div>
<h3 id="formatadors">Formatadors<a class="headerlink" href="#formatadors" title="Permanent link">&para;</a></h3>
<p>S'associen als manejadores amb <code>setFormatter</code>. Els formateadores més utilitzats són <code>LineFormatter</code>, <code>HtmlFormatter</code> o <code>JsonFormatter</code>.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">PHP</label><label for="__tabbed_3_2">Consola en JSON</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="nv">$log</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Logger</span><span class="p">(</span><span class="s2">&quot;MiLogger&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos="3 "></span><span class="nv">$rfh</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RotatingFileHandler</span><span class="p">(</span><span class="s2">&quot;logs/milog.log&quot;</span><span class="p">,</span> <span class="nx">Level</span><span class="o">::</span><span class="na">Debug</span><span class="p">);</span>
<span class="linenos" data-linenos="4 "></span><span class="nv">$rfh</span><span class="o">-&gt;</span><span class="na">setFormatter</span><span class="p">(</span><span class="k">new</span> <span class="nx">JsonFormatter</span><span class="p">());</span>
<span class="linenos" data-linenos="5 "></span><span class="nv">$log</span><span class="o">-&gt;</span><span class="na">pushHandler</span><span class="p">(</span><span class="nv">$rfh</span><span class="p">);</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="p">{</span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="s2">&quot;Esto es un mensaje de DEBUG&quot;</span><span class="p">,</span><span class="nt">&quot;context&quot;</span><span class="p">:{},</span><span class="nt">&quot;level&quot;</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span><span class="nt">&quot;level_name&quot;</span><span class="p">:</span><span class="s2">&quot;DEBUG&quot;</span><span class="p">,</span><span class="nt">&quot;channel&quot;</span><span class="p">:</span><span class="s2">&quot;MiLogger&quot;</span><span class="p">,</span><span class="nt">&quot;datetime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-11-27T15:36:52.747211+01:00&quot;</span><span class="p">,</span><span class="nt">&quot;extra&quot;</span><span class="p">:{}}</span>
<span class="linenos" data-linenos="2 "></span><span class="p">{</span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="s2">&quot;Esto es un mensaje de INFO&quot;</span><span class="p">,</span><span class="nt">&quot;context&quot;</span><span class="p">:{},</span><span class="nt">&quot;level&quot;</span><span class="p">:</span><span class="mi">200</span><span class="p">,</span><span class="nt">&quot;level_name&quot;</span><span class="p">:</span><span class="s2">&quot;INFO&quot;</span><span class="p">,</span><span class="nt">&quot;channel&quot;</span><span class="p">:</span><span class="s2">&quot;MiLogger&quot;</span><span class="p">,</span><span class="nt">&quot;datetime&quot;</span><span class="p">:</span><span class="s2">&quot;2020-11-27T15:36:52.747538+01:00&quot;</span><span class="p">,</span><span class="nt">&quot;extra&quot;</span><span class="p">:{}}</span>
</code></pre></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Més informació</p>
<p>Més informació sobre manejadores, formateadores i processadors en <a href="https://github.com/Seldaek/monolog/blob/master/doc/02-handlers-formatters-processors.md">https://github.com/Seldaek/monolog/blob/master/doc/02-handlers-formatters-processors.md</a></p>
</div>
<h2 id="6-generacio-de-pdf-amb-dompdf">6.  Generació de PDF amb DOMPDF<a class="headerlink" href="#6-generacio-de-pdf-amb-dompdf" title="Permanent link">&para;</a></h2>
<p>Amb PHP podem manejar tot tipus d'arxius com ja hem vist però, què passa si volem generar fitxers PDF amb dades tretes d'una base de dades?</p>
<div class="center img-small">
    <img src="imagenes/06/06-pdf.png">
</div>

<p>Gràcies a una classe escrita en PHP, podem generar arxius PDF sense necessitat d'instal·lar llibreries addicionals en el nostre servidor.
Però anem a utilitzar una llibreria que permet transformar codi html en pdf.</p>
<h3 id="dompdf">DOMPDF<a class="headerlink" href="#dompdf" title="Permanent link">&para;</a></h3>
<p>Afegirem la llibreria de <a href="https://github.com/seldaek/monolog"><em>DOMPDF</em></a> al nostre projecte. Per a això, inclourem la llibreria en el nostre projecte amb:</p>
<p><div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>composer<span class="w"> </span>require<span class="w"> </span>dompdf/dompdf
</code></pre></div>
Una vegada que DOMPDF està instal·lat, el procés per generar PDFs des de HTML és bastant directe. Els passos bàsics són:</p>
<p>Pas 1: Incloent DOMPDF
Primer, necessitarem incloure DOMPDF en el script PHP. Si estem utilitzant Composer, això es fa automàticament a través de l'auto-càrrega de Composer. Només cal afegir la següent línia al principi del'script:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="x">require &#39;vendor/autoload.php&#39;;</span>
</code></pre></div>
<p>Pas 2: Creació d'una Instància de DOMPDF
A continuació, creem una nova instància de la classe DOMPDF:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="x">use Dompdf\Dompdf;</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="x">$dompdf = new Dompdf();</span>
</code></pre></div>
<p>Pas 3: Carregar HTML
Després, carregem l'HTML en l'objecte DOMPDF. Això es pot fer directament com una cadena o carregant un fitxer HTML:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="x">$html = &quot;&lt;html&gt;&lt;body&gt;Hola, això és una prova.&lt;/body&gt;&lt;/html&gt;&quot;;</span>
<span class="linenos" data-linenos="2 "></span><span class="x">$dompdf-&gt;loadHtml($html);</span>
</code></pre></div>
<p>O bé carregar un fitxer HTML:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="x">$dompdf-&gt;loadHtml(file_get_contents(&#39;path/to/your/file.html&#39;));</span>
</code></pre></div>
<p>Pas 4: Configuració de la Mida del Paper i l'Orientació
Podem configurar la mida del paper i l'orientació si és necessari:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="x">$dompdf-&gt;setPaper(&#39;A4&#39;, &#39;portrait&#39;); // o &#39;landscape&#39;</span>
</code></pre></div>
<p>Pas 5: Renderització del PDF
Ara, demanem a DOMPDF que renderitze el PDF:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="x">$dompdf-&gt;render();</span>
</code></pre></div>
<p>Pas 6: Eixida del PDF
Finalment, podem enviar el PDF al navegador, guardar-lo en un fitxer o fer amb ell el que necessitem:</p>
<p>Per mostrar-lo al navegador:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="x">$dompdf-&gt;stream(&quot;document.pdf&quot;, array(&quot;Attachment&quot; =&gt; false));</span>
</code></pre></div>
<p>Per desar-lo en un fitxer:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="x">$output = $dompdf-&gt;output();</span>
<span class="linenos" data-linenos="2 "></span><span class="x">file_put_contents(&#39;path/to/save/document.pdf&#39;, $output);</span>
</code></pre></div>
<h5 id="consells-addicionals">Consells Addicionals<a class="headerlink" href="#consells-addicionals" title="Permanent link">&para;</a></h5>
<p>Cal assegurar-se que l'HTML és vàlid i ben format. DOMPDF intenta ser tolerant amb l'HTML, però l'HTML mal format pot causar problemes.
El CSS que s'utilitze pot afectar significativament com es veu el PDF. DOMPDF suporta una bona part de CSS 2.1, però no tot.
Si necessitem incloure imatges, cal assegurar-se que les rutes són absolutes i accessibles des del servidor on s'executa DOMPDF.
Aquesta és una guia bàsica per començar amb DOMPDF. Per a casos d'ús més avançats i opcions de configuració, cal consultar la documentació oficial de DOMPDF.</p>
<h2 id="7-documentacion-con-phpdocumentor">7. Documentación con <strong>phpDocumentor</strong><a class="headerlink" href="#7-documentacion-con-phpdocumentor" title="Permanent link">&para;</a></h2>
<p><a href="https://www.phpdoc.org/">phpDocumentor</a> és l'eina per a documentar el codi PHP. És similar en propòsit i funcionament a <strong>Javadoc</strong>.</p>
<p>Així doncs, és un eina que facilita la documentació del codi PHP, creant un lloc web amb l'API de l'aplicació.</p>
<p>Es basa en l'ús d'anotacions sobre els docblocks. Per a posar-ho en marxa, en el nostre cas ens decantarem per utilitzar la imatge que ja existeix de Docker.</p>
<h3 id="installacio_1">Instal·lació<a class="headerlink" href="#installacio_1" title="Permanent link">&para;</a></h3>
<h5 id="pas-1-installacio-amb-docker">Pas 1: Instal·lació amb Docker<a class="headerlink" href="#pas-1-installacio-amb-docker" title="Permanent link">&para;</a></h5>
<p>Primer, cal assegurar-se tenir Docker instal·lat i funcionant al  sistema. Després, s'ha de descarregar i executar el contenidor de phpDocumentor utilitzant la següent comanda:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>docker<span class="w"> </span>pull<span class="w"> </span>phpdoc/phpdoc
</code></pre></div>
<h5 id="pas-2-generacio-de-documentacio">Pas 2: Generació de Documentació<a class="headerlink" href="#pas-2-generacio-de-documentacio" title="Permanent link">&para;</a></h5>
<p>Un cop tinguem la imatge, podem utilitzar-la per generar la documentació. El procés bàsic implica muntar els fitxers de codi dins del contenidor Docker i executar phpDocumentor sobre aquests fitxers.</p>
<p>Ací hi ha un exemple de com fer-ho:</p>
<p>En el cas d'usar <em>Docker</em>, usarem el següent comando per a executar-lo (crea el contenidor, executa el comando que li demanem, i automàticament l'esborra):</p>
<p><div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>-v<span class="w"> </span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>:/data<span class="w"> </span>phpdoc/phpdoc:latest<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>/data/src<span class="w"> </span>-t<span class="w"> </span>/data/src/docs
</code></pre></div>
Aquesta comanda fa el següent:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>    * -rm: Això elimina el contenidor després d&#39;executar-lo, així no es queden contenidors inactius.
<span class="linenos" data-linenos="2 "></span>    * -v $(pwd):/data: Munta el directori actual del teu sistema ($(pwd)) al directori /data dins del contenidor. Hauràs de reemplaçar $(pwd) amb el camí on està el teu codi font si no estàs executant aquesta comanda des del directori del teu projecte.
<span class="linenos" data-linenos="3 "></span>    * -d /data/src: Especifica el directori dins del contenidor on es troba el teu codi font. Reemplaça /data/src amb el camí corresponent dins del contenidor si és diferent.
<span class="linenos" data-linenos="4 "></span>    * -t /data/src/docs: Especifica on vols que es generi la documentació dins del contenidor. En aquest cas, es generarà dins de /data/docs.
</code></pre></div>
<h5 id="pas-3-acces-a-la-documentacio-generada">Pas 3: Accés a la Documentació Generada<a class="headerlink" href="#pas-3-acces-a-la-documentacio-generada" title="Permanent link">&para;</a></h5>
<p>Una vegada generada, la documentació estarà dins del directori que especificat (en aquest cas, <code>docs</code> dins del directori docs de projecte). Pots obrir els fitxers HTML amb qualsevol navegador per veure la documentació.</p>
<h3 id="docblock">DocBlock<a class="headerlink" href="#docblock" title="Permanent link">&para;</a></h3>
<p>Un <em>docblock</em> és el bloc de codi que es col·loca damunt d'un recurs. El seu format és:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="sd">/**</span>
<span class="linenos" data-linenos=" 3 "></span><span class="sd">* Sumari*, una sola línia</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="sd">* Descripció* que pot utilitzar diverses línies</span>
<span class="linenos" data-linenos=" 6 "></span><span class="sd">* i que ofereix detalls de l&#39;element o referències</span>
<span class="linenos" data-linenos=" 7 "></span><span class="sd">* per a ampliar la informació</span>
<span class="linenos" data-linenos=" 8 "></span>
<span class="linenos" data-linenos=" 9 "></span><span class="sd">* @param string $miArgumento amb una descripció* de l&#39;argument</span>
<span class="linenos" data-linenos="10 "></span><span class="sd">* que pot usar diverses línies.</span>
<span class="linenos" data-linenos="11 "></span>
<span class="linenos" data-linenos="12 "></span><span class="sd">* @return void</span>
<span class="linenos" data-linenos="13 "></span><span class="sd">*/</span>
<span class="linenos" data-linenos="14 "></span><span class="k">function</span> <span class="nf">miFuncion</span><span class="p">(</span><span class="nx">tipo</span> <span class="nv">$miArgumento</span><span class="p">)</span>
<span class="linenos" data-linenos="15 "></span><span class="p">{</span>
<span class="linenos" data-linenos="16 "></span><span class="p">}</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Visual Studio Code</p>
<p>Per tal que us ajude a documentar podeu utilitzar l'extensió  PHP DocBlocker.</p>
</div>
<h3 id="documentant-el-codi">Documentant el codi<a class="headerlink" href="#documentant-el-codi" title="Permanent link">&para;</a></h3>
<p>En tots els elements, ademas del sumari i/o descripció, posarem:</p>
<ul>
<li>En les classes:<ul>
<li><code>@author</code> nom <email></li>
<li><code>@package</code> ruta del namespace</li>
</ul>
</li>
<li>En les propietats:<ul>
<li><code>@var</code> tipus descripció</li>
</ul>
</li>
<li>En els mètodes:<ul>
<li><code>@param</code> tipus $nomene descripció</li>
<li><code>@throws</code> ClaseException descripció</li>
<li><code>@return</code> tipus descripció</li>
</ul>
</li>
</ul>
<p>Vegem-ho amb un exemple. Suposem que tenim una classe que representa un client:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="sd">/**</span>
<span class="linenos" data-linenos=" 3 "></span><span class="sd">* Classe que representa un client</span>
<span class="linenos" data-linenos=" 4 "></span><span class="sd">* </span>
<span class="linenos" data-linenos=" 5 "></span><span class="sd">* El client s&#39;encarrega d&#39;emmagatzemar els suports que té llogat,</span>
<span class="linenos" data-linenos=" 6 "></span><span class="sd">* de manera que podem llogar i retornar productes mitjançant les operacions</span>
<span class="linenos" data-linenos=" 7 "></span><span class="sd">* homònimes.</span>
<span class="linenos" data-linenos=" 8 "></span><span class="sd">* </span>
<span class="linenos" data-linenos=" 9 "></span><span class="sd">* @package Dwes\Videoclub\Model</span>
<span class="linenos" data-linenos="10 "></span><span class="sd">* @author Aitor Medrano &lt;a.medrano@edu.gva.es&gt;</span>
<span class="linenos" data-linenos="11 "></span><span class="sd">*/</span>
<span class="linenos" data-linenos="12 "></span><span class="k">class</span> <span class="nc">Cliente</span> <span class="p">{</span>
<span class="linenos" data-linenos="13 "></span>
<span class="linenos" data-linenos="14 "></span>    <span class="k">public</span> <span class="nx">string</span> <span class="nv">$nombre</span><span class="p">;</span> 
<span class="linenos" data-linenos="15 "></span>    <span class="k">private</span> <span class="nx">string</span> <span class="nv">$numero</span><span class="p">;</span>
<span class="linenos" data-linenos="16 "></span>
<span class="linenos" data-linenos="17 "></span>    <span class="sd">/**</span>
<span class="linenos" data-linenos="18 "></span><span class="sd">    * Colecció de soports alquilats</span>
<span class="linenos" data-linenos="19 "></span><span class="sd">    * @var array&lt;Soporte&gt; </span>
<span class="linenos" data-linenos="20 "></span><span class="sd">    */</span>
<span class="linenos" data-linenos="21 "></span>    <span class="k">private</span> <span class="nv">$soportesAlquilados</span><span class="p">[];</span>
<span class="linenos" data-linenos="22 "></span>
<span class="linenos" data-linenos="23 "></span>    <span class="o">/*</span>
<span class="linenos" data-linenos="24 "></span>    <span class="o">*</span> <span class="nx">Comprova</span> <span class="nx">si</span> <span class="nx">el</span> <span class="nx">suport</span> <span class="nx">rebut</span> <span class="nx">ja</span> <span class="nx">el</span> <span class="nx">té</span> <span class="nx">llogat</span> <span class="nx">el</span> <span class="nx">client</span>
<span class="linenos" data-linenos="25 "></span>    <span class="o">*</span> <span class="o">@</span><span class="nx">param</span> <span class="nx">Suport</span> <span class="nv">$suporte</span> <span class="nx">Suport</span> <span class="nx">a</span> <span class="nx">comprovar</span>
<span class="linenos" data-linenos="26 "></span>    <span class="o">*</span> <span class="o">@</span><span class="k">return</span> <span class="nx">bool</span> <span class="k">true</span> <span class="nx">si</span> <span class="nx">ho</span> <span class="nx">té</span> <span class="nx">llogat</span>
<span class="linenos" data-linenos="27 "></span>    <span class="o">/</span>
<span class="linenos" data-linenos="28 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">tieneAlquilado</span><span class="p">(</span><span class="nx">Soporte</span> <span class="nv">$soporte</span><span class="p">)</span> <span class="o">:</span> <span class="nx">bool</span> <span class="p">{</span> 
<span class="linenos" data-linenos="29 "></span>        <span class="c1">// ...</span>
<span class="linenos" data-linenos="30 "></span>    <span class="p">}</span>
</code></pre></div>
<p>Si generem la documentació i obrim amb un navegador l'arxiu <code>docs/api/index.html</code> podrem navegar fins a la classe `Client:</p>
<figure style="align: center;">
    <img src="imagenes/05/phpdoc.png">
    <figcaption>phpDocumentor de Cliente</figcaption>
</figure>

<h2 id="8-separar-la-logica-de-negoci-dels-aspectes-de-presentacio-de-laplicacio">8. Separar la lògica de negoci dels aspectes de presentació de l'aplicació<a class="headerlink" href="#8-separar-la-logica-de-negoci-dels-aspectes-de-presentacio-de-laplicacio" title="Permanent link">&para;</a></h2>
<h4 id="logica-de-negoci">Lògica de Negoci<a class="headerlink" href="#logica-de-negoci" title="Permanent link">&para;</a></h4>
<ul>
<li>Regles i procediments que defineixen el funcionament de l'aplicació.</li>
<li>Inclou processament de dades, càlculs, interaccions amb la base de dades, etc.</li>
</ul>
<h4 id="aspectes-de-presentacio">Aspectes de Presentació<a class="headerlink" href="#aspectes-de-presentacio" title="Permanent link">&para;</a></h4>
<ul>
<li>Manera en què es mostra la informació a l'usuari.</li>
<li>Inclou la interfície d'usuari, disseny, navegació, etc.</li>
</ul>
<h3 id="avantatges">Avantatges<a class="headerlink" href="#avantatges" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p><strong>Mantenibilitat</strong></p>
<ul>
<li>Facilita la modificació de la lògica de negoci sense afectar la presentació.</li>
<li>Permet actualitzar la interfície d'usuari sense modificar la lògica subjacent.</li>
</ul>
</li>
<li>
<p><strong>Reutilització</strong></p>
<ul>
<li>La lògica de negoci pot ser reutilitzada en diferents aplicacions amb interfícies variades.</li>
<li>Els components de presentació poden ser reutilitzats amb diferents lògiques de negoci.</li>
</ul>
</li>
<li>
<p><strong>Escalabilitat</strong></p>
<ul>
<li>Ajuda a escalar l'aplicació separant les preocupacions, permetent millorar una part sense impactar l'altra.</li>
</ul>
</li>
<li>
<p><strong>Prova i Depuració</strong></p>
<ul>
<li>Facilita les proves unitàries i la depuració en permetre provar la lògica de negoci per separat de la interfície.</li>
</ul>
</li>
<li>
<p><strong>Col·laboració</strong></p>
<ul>
<li>Permet que desenvolupadors de backend i frontend treballen de manera independent en les seues àrees respectives.</li>
</ul>
</li>
</ol>
<h3 id="tecnologies-i-mecanismes-per-a-la-separacio">Tecnologies i Mecanismes per a la Separació<a class="headerlink" href="#tecnologies-i-mecanismes-per-a-la-separacio" title="Permanent link">&para;</a></h3>
<p>A continuació es presenten diverses tecnologies i mecanismes que faciliten la separació de la lògica de negoci i la presentació en una aplicació web:</p>
<h4 id="frameworks-php">Frameworks PHP:<a class="headerlink" href="#frameworks-php" title="Permanent link">&para;</a></h4>
<p>Laravel: Framework que segueix el patró MVC (Model-View-Controller). Laravel facilita la creació de codi net i ben organitzat, separant clarament la lògica de negoci de la presentació.
Symfony: Altres frameworks populars que també segueixen el patró MVC i ofereixen eines per a la separació de la lògica i la presentació.</p>
<h4 id="patro-mvc">Patró MVC:<a class="headerlink" href="#patro-mvc" title="Permanent link">&para;</a></h4>
<p>Model-View-Controller: Patró de disseny que divideix una aplicació en tres components interconnectats:
Model: Gestiona la lògica de negoci i les dades.
Vista: Gestiona la presentació de la informació.
Controlador: Gestiona la comunicació entre el Model i la Vista.</p>
<h4 id="plantilles">Plantilles:<a class="headerlink" href="#plantilles" title="Permanent link">&para;</a></h4>
<p>Blade (Laravel): Motor de plantilles que permet separar el codi HTML de la lògica de negoci.
Twig (Symfony): Motor de plantilles similar a Blade, utilitzat per separar la lògica de negoci del codi de presentació.</p>
<h4 id="api-rest">API REST:<a class="headerlink" href="#api-rest" title="Permanent link">&para;</a></h4>
<p>Permet crear serveis web que exposen funcionalitats i dades a través de punts finals d'API, mantenint la lògica de negoci separada de la presentació.</p>
<h3 id="exemple-mvc">Exemple MVC<a class="headerlink" href="#exemple-mvc" title="Permanent link">&para;</a></h3>
<p><div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="x">// Model: Product.php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="x">class Product {</span>
<span class="linenos" data-linenos=" 3 "></span><span class="x">    private string $name;</span>
<span class="linenos" data-linenos=" 4 "></span><span class="x">    private float $price;</span>
<span class="linenos" data-linenos=" 5 "></span>
<span class="linenos" data-linenos=" 6 "></span><span class="x">    public function __construct(string $name, float $price) {</span>
<span class="linenos" data-linenos=" 7 "></span><span class="x">        $this-&gt;name = $name;</span>
<span class="linenos" data-linenos=" 8 "></span><span class="x">        $this-&gt;price = $price;</span>
<span class="linenos" data-linenos=" 9 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="10 "></span>
<span class="linenos" data-linenos="11 "></span><span class="x">    public function getName(): string {</span>
<span class="linenos" data-linenos="12 "></span><span class="x">        return $this-&gt;name;</span>
<span class="linenos" data-linenos="13 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="14 "></span>
<span class="linenos" data-linenos="15 "></span><span class="x">    public function getPrice(): float {</span>
<span class="linenos" data-linenos="16 "></span><span class="x">        return $this-&gt;price;</span>
<span class="linenos" data-linenos="17 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="18 "></span><span class="x">}</span>
<span class="linenos" data-linenos="19 "></span>
<span class="linenos" data-linenos="20 "></span><span class="x">// Controller: ProductController.php</span>
<span class="linenos" data-linenos="21 "></span><span class="x">class ProductController {</span>
<span class="linenos" data-linenos="22 "></span><span class="x">    public function showProduct() {</span>
<span class="linenos" data-linenos="23 "></span><span class="x">        $product = new Product(&quot;Laptop&quot;, 1200.00);</span>
<span class="linenos" data-linenos="24 "></span><span class="x">        include &#39;views/productView.php&#39;;</span>
<span class="linenos" data-linenos="25 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="26 "></span><span class="x">}</span>
<span class="linenos" data-linenos="27 "></span>
<span class="linenos" data-linenos="28 "></span><span class="x">// View: productView.php</span>
<span class="linenos" data-linenos="29 "></span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="linenos" data-linenos="30 "></span><span class="x">&lt;html&gt;</span>
<span class="linenos" data-linenos="31 "></span><span class="x">&lt;head&gt;</span>
<span class="linenos" data-linenos="32 "></span><span class="x">    &lt;title&gt;Product Information&lt;/title&gt;</span>
<span class="linenos" data-linenos="33 "></span><span class="x">&lt;/head&gt;</span>
<span class="linenos" data-linenos="34 "></span><span class="x">&lt;body&gt;</span>
<span class="linenos" data-linenos="35 "></span><span class="x">    &lt;h1&gt;Product: </span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlspecialchars</span><span class="p">(</span><span class="nv">$product</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">());</span> <span class="cp">?&gt;</span><span class="x">&lt;/h1&gt;</span>
<span class="linenos" data-linenos="36 "></span><span class="x">    &lt;p&gt;Price: $</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlspecialchars</span><span class="p">(</span><span class="nv">$product</span><span class="o">-&gt;</span><span class="na">getPrice</span><span class="p">());</span> <span class="cp">?&gt;</span><span class="x">&lt;/p&gt;</span>
<span class="linenos" data-linenos="37 "></span><span class="x">&lt;/body&gt;</span>
<span class="linenos" data-linenos="38 "></span><span class="x">&lt;/html&gt;</span>
</code></pre></div>
La separació de la lògica de negoci dels aspectes de presentació és crucial per al desenvolupament d'aplicacions web eficients, mantenibles i escalables.</p>
<h2 id="9-gestio-dexempcions">9. Gestió d'Exempcions<a class="headerlink" href="#9-gestio-dexempcions" title="Permanent link">&para;</a></h2>
<p>La gestió d'excepcions forma part des de PHP 5. El seu funcionament és similar a Java*, fent ús d'un bloc <code>try / catch / finally</code>.
Si detectem una situació anòmala i volem llançar una excepció, haurem de realitzar <code>throw new Exception</code> (adjuntant el missatge que l'ha provocat).</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="k">try</span> <span class="p">{</span>
<span class="linenos" data-linenos="3 "></span>    <span class="k">if</span> <span class="p">(</span><span class="nv">$divisor </span><span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="4 "></span>        <span class="k">throw</span> <span class="k">new</span> <span class="nx">Exception</span><span class="p">(</span><span class="s2">&quot;División por cero.&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos="5 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="6 "></span>    <span class="nv">$resultado </span><span class="o">=</span> <span class="nv">$dividendo </span><span class="o">/</span> <span class="nv">$divisor</span><span class="p">;</span>
<span class="linenos" data-linenos="7 "></span><span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception </span><span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="8 "></span>    <span class="k">echo</span> <span class="s2">&quot;Se ha producido el siguiente error: &quot;</span><span class="o">.</span><span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="linenos" data-linenos="9 "></span><span class="p">}</span>
</code></pre></div>
<p>La classe <code>Exception</code> és la classe pare de totes les excepcions. El seu constructor rep <code>missatge[,codigoError][,excepcionPrevia]</code>.</p>
<p>A partir d'un objecte <code>Exception</code>, podem accedir als mètodes <code>getMessage()</code>i <code>getCode()</code> per a obtindre el missatge i el codi d'error de l'excepció capturada.</p>
<p>El propi llenguatge ofereix un conjunt d'excepcions ja definides, les quals podem capturar (i llançar des de PHP 7). Es recomana la seua consulta en la <a href="https://www.php.net/manual/es/class.exception.php">documentació oficial</a>.</p>
<h4 id="creant-exempcions">Creant exempcions<a class="headerlink" href="#creant-exempcions" title="Permanent link">&para;</a></h4>
<p>Per a crear una excepció, la forma més curta és crear una classe que únicament herete de <code>Exception</code>.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="k">class</span> <span class="nc">HolaExcepcion extends Exception </span><span class="p">{}</span>
</code></pre></div>
<p>Si volem, i és recomanable depenent dels requisits, podem sobrecarregar els mètodes màgics, per exemple, sobrecarregant el constructor i cridant al constructor del pare, o reescriure el mètode <code>__toString</code> per a canviar el seu missatge:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">class</span> <span class="nc">MiExcepcion extends Exception </span><span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nv">$msj</span><span class="p">,</span> <span class="nv">$codigo </span><span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">Exception </span><span class="nv">$previa </span><span class="o">=</span> <span class="k">null</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 4 "></span>        <span class="c1">// código propio</span>
<span class="linenos" data-linenos=" 5 "></span>        <span class="k">parent</span><span class="o">::</span><span class="na">__construct</span><span class="p">(</span><span class="nv">$msj</span><span class="p">,</span> <span class="nv">$codigo</span><span class="p">,</span> <span class="nv">$previa</span><span class="p">);</span>
<span class="linenos" data-linenos=" 6 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__toString</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 8 "></span>        <span class="k">return</span> <span class="no">__CLASS__</span> <span class="o">.</span> <span class="s2">&quot;: [</span><span class="si">{</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">code</span><span class="si">}</span><span class="s2">]: </span><span class="si">{</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">message</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="linenos" data-linenos=" 9 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="10 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">miFuncion</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos="11 "></span>        <span class="k">echo</span> <span class="s2">&quot;Una función personalizada para este tipo de excepción</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="linenos" data-linenos="12 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="13 "></span><span class="p">}</span>
</code></pre></div>
<p>Si definim una excepció d'aplicació dins d'un <em>namespace</em>, quan referenciem a <code>Exception</code>, haurem de referenciar-la mitjançant el seu nom totalment qualificat (<code>\Exception</code>), o utilitzant <code>use</code>:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Mitjançant nom totalment qualificat</label><label for="__tabbed_4_2">Mitjançant <code>use</code></label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="k">namespace</span> <span class="nx">\Dwes\Ejemplos</span><span class="p">;</span>
<span class="linenos" data-linenos="3 "></span>
<span class="linenos" data-linenos="4 "></span><span class="k">class</span> <span class="nc">AppExcepcion extends \Exception </span><span class="p">{}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="k">namespace</span> <span class="nx">\Dwes\Ejemplos</span><span class="p">;</span>
<span class="linenos" data-linenos="3 "></span>
<span class="linenos" data-linenos="4 "></span><span class="k">use</span> <span class="nx">Exception</span><span class="p">;</span>
<span class="linenos" data-linenos="5 "></span>
<span class="linenos" data-linenos="6 "></span><span class="k">class</span> <span class="nc">AppExcepcion extends Exception </span><span class="p">{}</span>
</code></pre></div>
</div>
</div>
</div>
<h5 id="exempcions-multiples">Exempcions múltiples<a class="headerlink" href="#exempcions-multiples" title="Permanent link">&para;</a></h5>
<p>Es poden usar excepcions múltiples per a comprovar diferents condicions. A l'hora de capturar-les, es fa de més específica a més general.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="nv">$email </span><span class="o">=</span> <span class="s2">&quot;ejemplo@ejemplo.com&quot;</span><span class="p">;</span>
<span class="linenos" data-linenos=" 3 "></span><span class="k">try</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 4 "></span>    <span class="c1">// Comprueba si el email es válido</span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="k">if</span><span class="p">(</span><span class="nb">filter_var</span><span class="p">(</span><span class="nv">$email</span><span class="p">,</span> <span class="nx">FILTER_VALIDATE_EMAIL</span><span class="p">)</span> <span class="o">===</span> <span class="k">FALSE</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 6 "></span>        <span class="k">throw</span> <span class="k">new</span> <span class="nx">MiExcepcion</span><span class="p">(</span><span class="nv">$email</span><span class="p">);</span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos=" 8 "></span>    <span class="c1">// Comprueba la palabra ejemplo en la dirección email</span>
<span class="linenos" data-linenos=" 9 "></span>    <span class="k">if</span><span class="p">(</span><span class="nb">strpos</span><span class="p">(</span><span class="nv">$email</span><span class="p">,</span> <span class="s2">&quot;ejemplo&quot;</span><span class="p">)</span> <span class="o">!==</span> <span class="k">FALSE</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="10 "></span>        <span class="k">throw</span> <span class="k">new</span> <span class="nx">Exception</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">$email es un email de ejemplo</span><span class="s2"> no válido&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos="11 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="12 "></span><span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">MiExcepcion </span><span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="13 "></span>    <span class="k">echo</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">miFuncion</span><span class="p">();</span>
<span class="linenos" data-linenos="14 "></span><span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">Exception </span><span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="15 "></span>    <span class="k">echo</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="linenos" data-linenos="16 "></span><span class="p">}</span>
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Autoevaluación</p>
<p>¿Qué pasaría al ejectuar el siguiente código?
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">class</span> <span class="nc">MainException extends Exception </span><span class="p">{}</span>
<span class="linenos" data-linenos=" 3 "></span><span class="k">class</span> <span class="nc">SubException extends MainException </span><span class="p">{}</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="k">try</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 6 "></span>    <span class="k">throw</span> <span class="k">new</span> <span class="nx">SubException</span><span class="p">(</span><span class="s2">&quot;Lanzada SubException&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos=" 7 "></span><span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">MainException </span><span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 8 "></span>    <span class="k">echo</span> <span class="s2">&quot;Capturada MainException &quot;</span> <span class="o">.</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="linenos" data-linenos=" 9 "></span><span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">SubException </span><span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="10 "></span>    <span class="k">echo</span> <span class="s2">&quot;Capturada SubException &quot;</span> <span class="o">.</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="linenos" data-linenos="11 "></span><span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception </span><span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="12 "></span>    <span class="k">echo</span> <span class="s2">&quot;Capturada Exception &quot;</span> <span class="o">.</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="linenos" data-linenos="13 "></span><span class="p">}</span>
</code></pre></div></p>
</div>
<p>Si en el mateix <code>catch</code> volem capturar diverses excepcions, hem d'utilitzar l'operador <code>|</code>:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="k">class</span> <span class="nc">MainException extends Exception </span><span class="p">{}</span>
<span class="linenos" data-linenos="3 "></span><span class="k">class</span> <span class="nc">SubException extends MainException </span><span class="p">{}</span>
<span class="linenos" data-linenos="4 "></span>
<span class="linenos" data-linenos="5 "></span><span class="k">try</span> <span class="p">{</span>
<span class="linenos" data-linenos="6 "></span>    <span class="k">throw</span> <span class="k">new</span> <span class="nx">SubException</span><span class="p">(</span><span class="s2">&quot;Lanzada SubException&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos="7 "></span><span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">MainException </span><span class="o">|</span> <span class="nx">SubException </span><span class="nv">$e </span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="8 "></span>    <span class="k">echo</span> <span class="s2">&quot;Capturada Exception &quot;</span> <span class="o">.</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="linenos" data-linenos="9 "></span><span class="p">}</span>
</code></pre></div>
<p>Des de PHP 7, existeix el tipus <code>Throwable</code>, el qual és una interfície que implementen tant els errors com les excepcions, i ens permet capturar els dos tipus alhora:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="k">try</span> <span class="p">{</span>
<span class="linenos" data-linenos="3 "></span>    <span class="c1">// tu codigo</span>
<span class="linenos" data-linenos="4 "></span><span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Throwable </span><span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="5 "></span>    <span class="k">echo</span> <span class="s1">&#39;Forma de capturar errores y excepciones a la vez&#39;</span><span class="p">;</span>
<span class="linenos" data-linenos="6 "></span><span class="p">}</span>
</code></pre></div>
<p>Si només volem capturar els errors fatals, podem fer ús de la classe <code>Error</code>:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="k">try</span> <span class="p">{</span>
<span class="linenos" data-linenos="3 "></span>    <span class="c1">// Genera una notificación que no se captura</span>
<span class="linenos" data-linenos="4 "></span>    <span class="k">echo</span> <span class="nv">$variableNoAsignada</span><span class="p">;</span>
<span class="linenos" data-linenos="5 "></span>    <span class="c1">// Error fatal que se captura</span>
<span class="linenos" data-linenos="6 "></span>    <span class="nx">funcionQueNoExiste</span><span class="p">();</span>
<span class="linenos" data-linenos="7 "></span><span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Error </span><span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="8 "></span>    <span class="k">echo</span> <span class="s2">&quot;Error capturado: &quot;</span> <span class="o">.</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="linenos" data-linenos="9 "></span><span class="p">}</span>
</code></pre></div>
<h4 id="rellancar-exempcions">Rellançar exempcions<a class="headerlink" href="#rellancar-exempcions" title="Permanent link">&para;</a></h4>
<p>En les aplicacions reals, és molt comuna capturar una excepció de sistema i llançar una d'aplicació que hem definit nostros.
També podem llançar les excepcions sense necessitat d'estar dins d'un <code>try/catch</code>.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="k">class</span> <span class="nc">AppException extends Exception </span><span class="p">{}</span>
<span class="linenos" data-linenos="3 "></span>
<span class="linenos" data-linenos="4 "></span><span class="k">try</span> <span class="p">{</span>
<span class="linenos" data-linenos="5 "></span>    <span class="c1">// Código de negocio que falla</span>
<span class="linenos" data-linenos="6 "></span><span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception </span><span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="7 "></span>    <span class="k">throw</span> <span class="k">new</span> <span class="nx">AppException</span><span class="p">(</span><span class="s2">&quot;AppException: &quot;</span><span class="o">.</span><span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">(),</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getCode</span><span class="p">(),</span> <span class="nv">$e</span><span class="p">);</span>
<span class="linenos" data-linenos="8 "></span><span class="p">}</span>
</code></pre></div>
<h2 id="10-proves-amb-phpunit">10. Proves amb PHPUNIT<a class="headerlink" href="#10-proves-amb-phpunit" title="Permanent link">&para;</a></h2>
<p>El curs passat, dins del mòdul de Entorns de Desenvolupament, estudiarieu la importància de la realització de proves, així com les proves unitàries mitjançant <a href="https://junit.org/junit5/">JUnit</a>.</p>
<figure style="float: right;">
    <img src="imagenes/05/tdd.png" width="300">
    <figcaption>Test Driven Development</figcaption>
</figure>

<p>Hui dia és de gran importància seguir una bona metodologia de proves, sent el desenvolupament dirigit per les proves (Test Driven Development / TDD) un dels enfocaments més emprats, el qual consisteix en:</p>
<ol>
<li>Escriure el test, i com no hi ha codi implementat, la prova falle (roig).</li>
<li>Escriure el codi d'aplicació perquè la prova funcione (verda).</li>
<li>refactoritzar el codi de l'aplicació amb l'ajuda de la prova per a comprovar que no trenquem res (refactor).</li>
</ol>
<p>En el cas de PHP, l'eina que s'utilitza és <strong>PHPUnit</strong> (<a href="https://phpunit.de/">https://phpunit.de/</a>), que com el seu nom indica, està basada en JUnit. La versió actual és la 11.</p>
<h3 id="introduccio-a-phpunit">Introducció a PHPUnit<a class="headerlink" href="#introduccio-a-phpunit" title="Permanent link">&para;</a></h3>
<p>PHPUnit és un framework de proves popular per a PHP que suporta tant proves unitàries com proves d'integració. És àmpliament utilitzat en la comunitat PHP per la seua simplicitat i eficàcia. Les proves unitàries es centren en provar components o mètodes individuals, mentre que les proves d'integració asseguren que les diferents parts del sistema funcionen conjuntament com s'espera.</p>
<h4 id="installacio_2">Instal·lació<a class="headerlink" href="#installacio_2" title="Permanent link">&para;</a></h4>
<p>Per començar a utilitzar PHPUnit, cal instal·lar-lo. La manera recomanada és a través de Composer. Executa la següent comanda en el terminal:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>composer<span class="w"> </span>require<span class="w"> </span>--dev<span class="w"> </span>phpunit/phpunit
</code></pre></div>
<p>Aquesta comanda afegirà PHPUnit com a dependència de desenvolupament en el teu projecte.</p>
<div class="admonition tip">
<p class="admonition-title">Llibreries de desenvolupament</p>
<p>Les llibreries que es col·loquen en <code>require-dev</code> són les de desenvolupament i <em>testing</em>, de manera que no s'instal·laran en un entorn de producció.</p>
</div>
<p>Una vegada instal·lat, podem configurar PHPUnit creant un fitxer phpunit.xml en l'arrel del projecte per especificar la configuració de les proves:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nt">&lt;phpunit</span><span class="w"> </span><span class="na">bootstrap=</span><span class="s">&quot;vendor/autoload.php&quot;</span><span class="nt">&gt;</span>
<span class="linenos" data-linenos="2 "></span><span class="w">    </span><span class="nt">&lt;testsuites&gt;</span>
<span class="linenos" data-linenos="3 "></span><span class="w">        </span><span class="nt">&lt;testsuite</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Application Test Suite&quot;</span><span class="nt">&gt;</span>
<span class="linenos" data-linenos="4 "></span><span class="w">            </span><span class="nt">&lt;directory&gt;</span>tests<span class="nt">&lt;/directory&gt;</span>
<span class="linenos" data-linenos="5 "></span><span class="w">        </span><span class="nt">&lt;/testsuite&gt;</span>
<span class="linenos" data-linenos="6 "></span><span class="w">    </span><span class="nt">&lt;/testsuites&gt;</span>
<span class="linenos" data-linenos="7 "></span><span class="nt">&lt;/phpunit&gt;</span>
</code></pre></div>
<h4 id="estructura-dun-test">Estructura d’un test<a class="headerlink" href="#estructura-dun-test" title="Permanent link">&para;</a></h4>
<p>Els tests en PHPUnit són classes PHP que hereten de PHPUnit\Framework\TestCase. Cada mètode dins d'aquestes classes que comence amb test serà executat com una prova.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="x">use PHPUnit\Framework\TestCase;</span>
<span class="linenos" data-linenos=" 2 "></span><span class="x">use App\Models\Empleado;</span>
<span class="linenos" data-linenos=" 3 "></span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="x">class EmpleadoTest extends TestCase {</span>
<span class="linenos" data-linenos=" 6 "></span><span class="x">    private $empleado;</span>
<span class="linenos" data-linenos=" 7 "></span>
<span class="linenos" data-linenos=" 8 "></span><span class="x">    protected function setUp(): void {</span>
<span class="linenos" data-linenos=" 9 "></span><span class="x">        $this-&gt;empleado = new Empleado(&#39;John&#39;, &#39;Doe&#39;, 4000, 30);</span>
<span class="linenos" data-linenos="10 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="11 "></span>
<span class="linenos" data-linenos="12 "></span><span class="x">    public function testGetSou() {</span>
<span class="linenos" data-linenos="13 "></span><span class="x">        $this-&gt;assertEquals(4000, $this-&gt;empleado-&gt;getSou());</span>
<span class="linenos" data-linenos="14 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="15 "></span>
<span class="linenos" data-linenos="16 "></span><span class="x">    public function testSetSou() {</span>
<span class="linenos" data-linenos="17 "></span><span class="x">        $this-&gt;empleado-&gt;setSou(4500);</span>
<span class="linenos" data-linenos="18 "></span><span class="x">        $this-&gt;assertEquals(4500, $this-&gt;empleado-&gt;getSou());</span>
<span class="linenos" data-linenos="19 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="20 "></span>
<span class="linenos" data-linenos="21 "></span><span class="x">    public function testGetTelefonos() {</span>
<span class="linenos" data-linenos="22 "></span><span class="x">        $this-&gt;assertIsArray($this-&gt;empleado-&gt;getTelefonos());</span>
<span class="linenos" data-linenos="23 "></span><span class="x">        $this-&gt;assertEmpty($this-&gt;empleado-&gt;getTelefonos());</span>
<span class="linenos" data-linenos="24 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="25 "></span>
<span class="linenos" data-linenos="26 "></span><span class="x">    public function testSetTelefono() {</span>
<span class="linenos" data-linenos="27 "></span><span class="x">        $this-&gt;empleado-&gt;setTelefono(&#39;123456789&#39;);</span>
<span class="linenos" data-linenos="28 "></span><span class="x">        $this-&gt;assertCount(1, $this-&gt;empleado-&gt;getTelefonos());</span>
<span class="linenos" data-linenos="29 "></span><span class="x">        $this-&gt;assertEquals(&#39;123456789&#39;, $this-&gt;empleado-&gt;getTelefonos()[0]);</span>
<span class="linenos" data-linenos="30 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="31 "></span>
<span class="linenos" data-linenos="32 "></span><span class="x">    public function testListarTelefonos() {</span>
<span class="linenos" data-linenos="33 "></span><span class="x">        $this-&gt;empleado-&gt;setTelefono(&#39;123456789&#39;);</span>
<span class="linenos" data-linenos="34 "></span><span class="x">        $this-&gt;empleado-&gt;setTelefono(&#39;987654321&#39;);</span>
<span class="linenos" data-linenos="35 "></span><span class="x">        $this-&gt;assertEquals(&#39;123456789, 987654321&#39;, $this-&gt;empleado-&gt;listarTelefonos());</span>
<span class="linenos" data-linenos="36 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="37 "></span>
<span class="linenos" data-linenos="38 "></span><span class="x">    public function testVaciarTelefonos() {</span>
<span class="linenos" data-linenos="39 "></span><span class="x">        $this-&gt;empleado-&gt;setTelefono(&#39;123456789&#39;);</span>
<span class="linenos" data-linenos="40 "></span><span class="x">        $this-&gt;empleado-&gt;vaciarTelefonos();</span>
<span class="linenos" data-linenos="41 "></span><span class="x">        $this-&gt;assertEmpty($this-&gt;empleado-&gt;getTelefonos());</span>
<span class="linenos" data-linenos="42 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="43 "></span>
<span class="linenos" data-linenos="44 "></span><span class="x">    public function testDebePagarImpuestos() {</span>
<span class="linenos" data-linenos="45 "></span><span class="x">        $this-&gt;assertTrue($this-&gt;empleado-&gt;debePagarImpuestos());</span>
<span class="linenos" data-linenos="46 "></span><span class="x">        $this-&gt;empleado-&gt;setSou(3000);</span>
<span class="linenos" data-linenos="47 "></span><span class="x">        $this-&gt;assertFalse($this-&gt;empleado-&gt;debePagarImpuestos());</span>
<span class="linenos" data-linenos="48 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="49 "></span><span class="x">}</span>
</code></pre></div>
<h4 id="execucio-de-proves">Execució de Proves<a class="headerlink" href="#execucio-de-proves" title="Permanent link">&para;</a></h4>
<p>Per executar les proves, podem utilitzar la següent comanda:</p>
<p>vendor/bin/phpunit</p>
<p>Aquesta comanda cercarà els arxius de prova en el directori especificat (per defecte tests) i executarà totes les proves.</p>
<h4 id="tipus-de-proves">Tipus de  proves<a class="headerlink" href="#tipus-de-proves" title="Permanent link">&para;</a></h4>
<p>Amb PHPUnit, podem realitzar diversos tipus de proves, entre elles:</p>
<ul>
<li>Proves Unitàries : Verifiquen el funcionament d'una unitat de codi individual, com una funció o mètode.</li>
<li>Proves Funcionals: Verifiquen que un conjunt de mòduls funciona correctament conjuntament. Aquestes proves poden simular interaccions de l'usuari en un sistema web, encara que això es fa millor amb frameworks especialitzats per a proves funcionals.</li>
<li>Proves d'Integració: Comproven que diferents mòduls o serveis funcionen correctament quan es combinen.</li>
</ul>
<p>Exemple de prova unitària:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="x">public function testResta() {</span>
<span class="linenos" data-linenos="2 "></span><span class="x">    $calculadora = new Calculadora();</span>
<span class="linenos" data-linenos="3 "></span><span class="x">    $resultat = $calculadora-&gt;resta(5, 3);</span>
<span class="linenos" data-linenos="4 "></span><span class="x">    $this-&gt;assertEquals(2, $resultat);</span>
<span class="linenos" data-linenos="5 "></span><span class="x">}</span>
</code></pre></div>
<h4 id="assercions">Assercions<a class="headerlink" href="#assercions" title="Permanent link">&para;</a></h4>
<p>Les assercions permeten comprovar el resultat dels mètodes que volem provar. Les assercions esperen que el predicat sempre siga vertader.</p>
<p>PHPUnit ofereix les següent assercions:</p>
<ul>
<li><code>assertTrue</code> / <code>assertFalse</code>: Comprova que la condició donada siga avaluada com true / false</li>
<li><code>assertEquals</code> / <code>assertSame</code>: Comprova que dues variables siguen iguals</li>
<li><code>assertNotEquals</code> / <code>assertNotSame</code>: Comprova que dues variables NO siguen iguals</li>
<li><code>assertNull</code>: Comprova que un valor és null.</li>
<li><code>Same</code> → comprova els tipus. Si no coincideixen els tipus i els valors, l'asserció fallarà</li>
<li><code>Equals</code> → sense comprovació estricta</li>
<li><code>assertArrayHasKey</code> / <code>assertArrayNotHasKey</code>: Comprova que un array posseïsca un <em>key</em> determinat / o NO ho posseïsca</li>
<li><code>assertArraySubset</code>: Comprova que un array posseïsca un altre array com subset del mateix</li>
<li><code>assertAttributeContains</code> / <code>assertAttributeNotContains</code>: Comprova que un atribut d'una classe continga una variable determinada / o NO continga una variable determinada</li>
<li><code>assertAttributeEquals</code>: Comprova que un atribut d'una classe siga igual a una variable determinada.</li>
</ul>
<h4 id="proves-amb-dades">Proves amb dades<a class="headerlink" href="#proves-amb-dades" title="Permanent link">&para;</a></h4>
<p>Les proves en PHPUnit poden utilitzar data providers per executar el mateix test amb diferents dades:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="x">/**</span>
<span class="linenos" data-linenos=" 2 "></span><span class="x"> * @dataProvider proveidorDeDades</span>
<span class="linenos" data-linenos=" 3 "></span><span class="x"> */</span>
<span class="linenos" data-linenos=" 4 "></span><span class="x">public function testMultiplica($a, $b, $esperat) {</span>
<span class="linenos" data-linenos=" 5 "></span><span class="x">    $calculadora = new Calculadora();</span>
<span class="linenos" data-linenos=" 6 "></span><span class="x">    $this-&gt;assertEquals($esperat, $calculadora-&gt;multiplica($a, $b));</span>
<span class="linenos" data-linenos=" 7 "></span><span class="x">}</span>
<span class="linenos" data-linenos=" 8 "></span>
<span class="linenos" data-linenos=" 9 "></span><span class="x">public function proveidorDeDades() {</span>
<span class="linenos" data-linenos="10 "></span><span class="x">    return [</span>
<span class="linenos" data-linenos="11 "></span><span class="x">        [2, 3, 6],</span>
<span class="linenos" data-linenos="12 "></span><span class="x">        [0, 5, 0],</span>
<span class="linenos" data-linenos="13 "></span><span class="x">        [-1, 5, -5],</span>
<span class="linenos" data-linenos="14 "></span><span class="x">    ];</span>
<span class="linenos" data-linenos="15 "></span><span class="x">}</span>
</code></pre></div>
<h4 id="mocks">Mocks<a class="headerlink" href="#mocks" title="Permanent link">&para;</a></h4>
<p>Un mock és un objecte simulat que imita el comportament d'un objecte real en un entorn de proves. S'utilitza per simular la funcionalitat de certs components o dependències d'una classe, sense necessitat d'executar el codi real d'aquests components. Això permet provar una classe de manera aïllada i controlar el comportament de les seves dependències.</p>
<p><strong>Els mocks són útils quan:</strong></p>
<ul>
<li>No volem o no podem dependre del comportament real d'un component extern, com una connexió a una base de dades o una API.</li>
<li>Necessitem verificar la interacció entre la classe provada i una dependència externa (per exemple, comprovar que un mètode s'ha cridat amb uns certs arguments).</li>
<li>Volem millorar la velocitat i la fiabilitat de les proves en eliminar la dependència de sistemes externs.</li>
</ul>
<p><strong>Com funciona un mock</strong></p>
<p>Quan utilitzem un mock, en lloc de cridar el mètode real d'una dependència, definim el comportament esperat manualment. També podem verificar que certs mètodes del mock s'hagin cridat, amb certs arguments, un nombre determinat de vegades, etc.</p>
<p><strong>Exemple senzill de mock amb PHPUnit</strong></p>
<p>Suposem que tenim una classe UserService que depèn d'una classe EmailService per enviar correus electrònics quan es crea un nou usuari. No volem enviar correus electrònics durant les proves, però sí que volem assegurar-nos que el mètode d'enviament de correus es crida quan es crea un usuari nou.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="k">class</span> <span class="nc">EmailService</span>
<span class="linenos" data-linenos=" 4 "></span><span class="p">{</span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">sendEmail</span><span class="p">(</span><span class="nv">$to</span><span class="p">,</span> <span class="nv">$subject</span><span class="p">,</span> <span class="nv">$message</span><span class="p">)</span>
<span class="linenos" data-linenos=" 6 "></span>    <span class="p">{</span>
<span class="linenos" data-linenos=" 7 "></span>        <span class="c1">// Lògica per enviar un correu electrònic</span>
<span class="linenos" data-linenos=" 8 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos=" 9 "></span><span class="p">}</span>
<span class="linenos" data-linenos="10 "></span>
<span class="linenos" data-linenos="11 "></span><span class="k">class</span> <span class="nc">UserService</span>
<span class="linenos" data-linenos="12 "></span><span class="p">{</span>
<span class="linenos" data-linenos="13 "></span>    <span class="k">private</span> <span class="nv">$emailService</span><span class="p">;</span>
<span class="linenos" data-linenos="14 "></span>
<span class="linenos" data-linenos="15 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">EmailService</span> <span class="nv">$emailService</span><span class="p">)</span>
<span class="linenos" data-linenos="16 "></span>    <span class="p">{</span>
<span class="linenos" data-linenos="17 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">emailService</span> <span class="o">=</span> <span class="nv">$emailService</span><span class="p">;</span>
<span class="linenos" data-linenos="18 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="19 "></span>
<span class="linenos" data-linenos="20 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">createUser</span><span class="p">(</span><span class="nv">$user</span><span class="p">)</span>
<span class="linenos" data-linenos="21 "></span>    <span class="p">{</span>
<span class="linenos" data-linenos="22 "></span>        <span class="c1">// Crear usuari...</span>
<span class="linenos" data-linenos="23 "></span>
<span class="linenos" data-linenos="24 "></span>        <span class="c1">// Enviar un correu electrònic al nou usuari</span>
<span class="linenos" data-linenos="25 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">emailService</span><span class="o">-&gt;</span><span class="na">sendEmail</span><span class="p">(</span><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">email</span><span class="p">,</span> <span class="s1">&#39;Welcome!&#39;</span><span class="p">,</span> <span class="s1">&#39;Benvingut a la nostra plataforma!&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos="26 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="27 "></span><span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="k">use</span> <span class="nx">PHPUnit\Framework\TestCase</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="k">class</span> <span class="nc">UserServiceTest</span> <span class="k">extends</span> <span class="nx">TestCase</span>
<span class="linenos" data-linenos=" 6 "></span><span class="p">{</span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">testCreateUserSendsEmail</span><span class="p">()</span>
<span class="linenos" data-linenos=" 8 "></span>    <span class="p">{</span>
<span class="linenos" data-linenos=" 9 "></span>        <span class="c1">// Creem un mock de la classe EmailService</span>
<span class="linenos" data-linenos="10 "></span>        <span class="nv">$emailServiceMock</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">createMock</span><span class="p">(</span><span class="nx">EmailService</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
<span class="linenos" data-linenos="11 "></span>
<span class="linenos" data-linenos="12 "></span>        <span class="c1">// Definim l&#39;expectativa: esperem que el mètode sendEmail sigui cridat una vegada</span>
<span class="linenos" data-linenos="13 "></span>        <span class="c1">// amb els arguments concrets que especifiquem.</span>
<span class="linenos" data-linenos="14 "></span>        <span class="nv">$emailServiceMock</span><span class="o">-&gt;</span><span class="na">expects</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">once</span><span class="p">())</span>
<span class="linenos" data-linenos="15 "></span>                         <span class="o">-&gt;</span><span class="na">method</span><span class="p">(</span><span class="s1">&#39;sendEmail&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos="16 "></span>                         <span class="o">-&gt;</span><span class="na">with</span><span class="p">(</span>
<span class="linenos" data-linenos="17 "></span>                             <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">equalTo</span><span class="p">(</span><span class="s1">&#39;test@example.com&#39;</span><span class="p">),</span>
<span class="linenos" data-linenos="18 "></span>                             <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">equalTo</span><span class="p">(</span><span class="s1">&#39;Welcome!&#39;</span><span class="p">),</span>
<span class="linenos" data-linenos="19 "></span>                             <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">stringContains</span><span class="p">(</span><span class="s1">&#39;Benvingut a la nostra plataforma!&#39;</span><span class="p">)</span>
<span class="linenos" data-linenos="20 "></span>                         <span class="p">);</span>
<span class="linenos" data-linenos="21 "></span>
<span class="linenos" data-linenos="22 "></span>        <span class="c1">// Creem una instància de UserService passant el mock d&#39;EmailService</span>
<span class="linenos" data-linenos="23 "></span>        <span class="nv">$userService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">UserService</span><span class="p">(</span><span class="nv">$emailServiceMock</span><span class="p">);</span>
<span class="linenos" data-linenos="24 "></span>
<span class="linenos" data-linenos="25 "></span>        <span class="c1">// Simulem la creació d&#39;un nou usuari</span>
<span class="linenos" data-linenos="26 "></span>        <span class="nv">$user</span> <span class="o">=</span> <span class="k">new</span> <span class="k">stdClass</span><span class="p">();</span>
<span class="linenos" data-linenos="27 "></span>        <span class="nv">$user</span><span class="o">-&gt;</span><span class="na">email</span> <span class="o">=</span> <span class="s1">&#39;test@example.com&#39;</span><span class="p">;</span>
<span class="linenos" data-linenos="28 "></span>        <span class="nv">$userService</span><span class="o">-&gt;</span><span class="na">createUser</span><span class="p">(</span><span class="nv">$user</span><span class="p">);</span>
<span class="linenos" data-linenos="29 "></span>
<span class="linenos" data-linenos="30 "></span>        <span class="c1">// El mètode sendEmail del mock hauria de ser cridat una vegada amb els paràmetres especificats</span>
<span class="linenos" data-linenos="31 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="32 "></span><span class="p">}</span>
</code></pre></div>
<h4 id="provant-excepcions">Provant excepcions<a class="headerlink" href="#provant-excepcions" title="Permanent link">&para;</a></h4>
<p>Les proves a més de comprovar que les classes funcionen com s'espera, han de cobrir tots els casos possibles. Així doncs, hem de poder fer proves que esperen que es llance una exempció (i que el missatge continga una certa informació):</p>
<p>Per a això, s'utilitzen les següent expectatives:</p>
<ul>
<li><code>expectException(Excepcion::class)</code></li>
<li><code>expectExceptionCode(codigoExcepcion)</code></li>
<li><code>expectExceptionMessage(missatge)</code></li>
</ul>
<p>De la mateixa manera que abans, primer es posa l'expectativa, i després es provoca que es llance l'exempció:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="k">public</span> <span class="k">function</span> <span class="nf">testExcepcio</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos="3 "></span>    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">expectException</span><span class="p">(</span><span class="nx">InvalidArgumentException</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>
<span class="linenos" data-linenos="4 "></span>
<span class="linenos" data-linenos="5 "></span>    <span class="nv">$calculadora</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Calculadora</span><span class="p">();</span>
<span class="linenos" data-linenos="6 "></span>    <span class="nv">$calculadora</span><span class="o">-&gt;</span><span class="na">divideix</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="linenos" data-linenos="7 "></span><span class="p">}</span>
</code></pre></div>
<h4 id="conclusio">Conclusió<a class="headerlink" href="#conclusio" title="Permanent link">&para;</a></h4>
<p>Les proves són crucials per a assegurar que el nostre codi PHP és fiable i manté la seua funcionalitat al llarg del temps. Utilitzar PHPUnit ens proporciona les eines necessàries per a escriure proves eficaces i mantenir el nostre projecte en un estat saludable.</p>
<h2 id="12-referencies-bibliografiques">12. Referències Bibliogràfiques<a class="headerlink" href="#12-referencies-bibliografiques" title="Permanent link">&para;</a></h2>
<h3 id="programacio-orientada-a-objectes-en-php">Programació Orientada a Objectes en PHP<a class="headerlink" href="#programacio-orientada-a-objectes-en-php" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><strong>"PHP Objects, Patterns, and Practice"</strong><br />
  per M. Zandstra. Apress, 2017. ISBN: 978-1-4842-1361-3. Aquest llibre és un recurs essencial per entendre els fonaments de la programació orientada a objectes en PHP, així com patrons de disseny.</p>
</li>
<li>
<p><strong>"Learning PHP, MySQL &amp; JavaScript: With jQuery, CSS &amp; HTML5"</strong><br />
  per Robin Nixon. O'Reilly Media, 2018. ISBN: 978-1-4919-2070-2. Ofereix una introducció completa a la programació amb PHP, incloent-hi el model d'objectes de PHP.</p>
</li>
</ul>
<h3 id="constructors-i-destructors">Constructors i Destructors<a class="headerlink" href="#constructors-i-destructors" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>PHP Manual: Constructors and Destructors</strong><br />
  Documentació oficial de PHP sobre constructors i destructors en la programació orientada a objectes. Disponible a <a href="https://www.php.net/manual/en/language.oop5.decon.php">https://www.php.net/manual/en/language.oop5.decon.php</a>.</li>
</ul>
<h3 id="encapsulacio-i-visibilitat">Encapsulació i Visibilitat<a class="headerlink" href="#encapsulacio-i-visibilitat" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>PHP Manual: Visibility</strong><br />
  Secció del manual oficial de PHP que explica les paraules clau <code>public</code>, <code>protected</code>, i <code>private</code>, així com el concepte d'encapsulació. Accessible a <a href="https://www.php.net/manual/en/language.oop5.visibility.php">https://www.php.net/manual/en/language.oop5.visibility.php</a>.</li>
</ul>
<h3 id="herencia-i-polimorfisme">Herència i Polimorfisme<a class="headerlink" href="#herencia-i-polimorfisme" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><strong>"Programming PHP"</strong><br />
  per Kevin Tatroe, Peter MacIntyre, i Rasmus Lerdorf. O'Reilly Media, 2013. ISBN: 978-1-4493-5053-6. Aquest llibre cobreix àmpliament els conceptes d'herència i polimorfisme en PHP, proporcionant exemples pràctics.</p>
</li>
<li>
<p><strong>PHP Manual: Inheritance</strong><br />
  Documentació oficial de PHP que tracta sobre l'herència en classes, incloent el polimorfisme. Disponible a <a href="https://www.php.net/manual/en/language.oop5.inheritance.php">https://www.php.net/manual/en/language.oop5.inheritance.php</a>.</p>
</li>
</ul>
<h3 id="classes-abstractes-i-interficies">Classes Abstractes i Interfícies<a class="headerlink" href="#classes-abstractes-i-interficies" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>PHP Manual: Interfaces and Abstract Classes</strong><br />
  Explicació oficial de les classes abstractes i les interfícies en PHP. Disponible a <a href="https://www.php.net/manual/en/language.oop5.interfaces.php">https://www.php.net/manual/en/language.oop5.interfaces.php</a>.</li>
</ul>
<h3 id="nombres-magics-i-metodes-magics">Nombres màgics i Metodes màgics<a class="headerlink" href="#nombres-magics-i-metodes-magics" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>PHP Manual: Magic Methods</strong><br />
  Guia completa sobre els mètodes màgics en PHP, com <code>__construct()</code>, <code>__destruct()</code>, <code>__get()</code>, <code>__set()</code>, entre altres. Disponible a <a href="https://www.php.net/manual/en/language.oop5.magic.php">https://www.php.net/manual/en/language.oop5.magic.php</a>.</li>
</ul>
<h3 id="trait-en-php">Trait en PHP<a class="headerlink" href="#trait-en-php" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>PHP Manual: Traits</strong><br />
  Documentació sobre traits en PHP, que permeten reutilitzar codi entre diferents classes. Disponible a <a href="https://www.php.net/manual/en/language.oop5.traits.php">https://www.php.net/manual/en/language.oop5.traits.php</a>.</li>
</ul>
<h3 id="excepcions-en-php">Excepcions en PHP<a class="headerlink" href="#excepcions-en-php" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><strong>"The Pragmatic Programmer: Your Journey to Mastery"</strong><br />
  per David Thomas i Andrew Hunt. Addison-Wesley Professional, 2019. ISBN: 978-0-1359-5202-8. Inclou bones pràctiques per a la gestió d'excepcions, aplicables també a PHP.</p>
</li>
<li>
<p><strong>PHP Manual: Exceptions</strong><br />
  Secció del manual de PHP dedicada a les excepcions, explicant com llençar i capturar excepcions en PHP. Accessible a <a href="https://www.php.net/manual/en/language.exceptions.php">https://www.php.net/manual/en/language.exceptions.php</a>.</p>
</li>
</ul>
<h3 id="proves-amb-phpunit">Proves amb PHPUnit<a class="headerlink" href="#proves-amb-phpunit" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><strong>"Modern PHP: New Features and Good Practices"</strong><br />
  per Josh Lockhart. O'Reilly Media, 2015. ISBN: 978-1-4919-2904-0. Aquest llibre inclou una secció sobre proves amb PHPUnit.</p>
</li>
<li>
<p><strong>PHPUnit Documentation</strong><br />
  Documentació oficial de PHPUnit, que cobreix com escriure i executar proves unitàries en PHP. Accessible a <a href="https://phpunit.de/documentation.html">https://phpunit.de/documentation.html</a>.</p>
</li>
</ul>
<h3 id="eines-de-desenvolupament-i-autocarrega">Eines de Desenvolupament i Autocàrrega<a class="headerlink" href="#eines-de-desenvolupament-i-autocarrega" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><strong>Composer Documentation</strong><br />
  Accessible des de <a href="https://getcomposer.org/doc/">https://getcomposer.org/doc/</a>. Composer és l'eina estàndard per a la gestió de dependències en PHP, i inclou suport per a l'autocàrrega de classes.</p>
</li>
<li>
<p><strong>PHP Manual: Autoloading Classes</strong><br />
  Guia sobre el mecanisme d'autocàrrega en PHP, que facilita la inclusió automàtica de classes en els teus projectes. Disponible a <a href="https://www.php.net/manual/en/language.oop5.autoload.php">https://www.php.net/manual/en/language.oop5.autoload.php</a>.</p>
</li>
</ul>
<h3 id="poo-avancada-patrons-de-disseny">POO Avançada: Patrons de Disseny<a class="headerlink" href="#poo-avancada-patrons-de-disseny" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><strong>"Head First Design Patterns"</strong><br />
  per Eric Freeman i Elisabeth Robson. O'Reilly Media, 2020. ISBN: 978-1-4919-7175-9. Un recurs excel·lent per aprendre patrons de disseny aplicables a PHP.</p>
</li>
<li>
<p><strong>"PHP Design Patterns"</strong><br />
  per Stephan Schmidt. Publicat per Packt Publishing, 2008. ISBN: 978-1-84719-255-3. Aquest llibre explora com aplicar patrons de disseny en projectes PHP.</p>
</li>
</ul>
<h3 id="webs-de-referencia-addicionals">Webs de Referència Addicionals<a class="headerlink" href="#webs-de-referencia-addicionals" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><strong>PHP: The Right Way</strong><br />
<a href="https://phptherightway.com/">https://phptherightway.com/</a>. Una guia per a desenvolupar aplicacions PHP seguint les millors pràctiques de la indústria.</p>
</li>
<li>
<p><strong>Stack Overflow</strong><br />
<a href="https://stackoverflow.com/questions/tagged/php">https://stackoverflow.com/questions/tagged/php</a>. Una font d'informació valuosa per resoldre problemes específics de PHP i discutir amb altres desenvolupadors.</p>
</li>
</ul>
<hr />
<h2 id="13-exercicis">13. Exercicis<a class="headerlink" href="#13-exercicis" title="Permanent link">&para;</a></h2>
<h3 id="bateria-dexercicis-solucionats-per-a-la-unitat-de-programacio-orientada-a-objectes">Bateria d'Exercicis Solucionats per a la Unitat de Programació Orientada a Objectes<a class="headerlink" href="#bateria-dexercicis-solucionats-per-a-la-unitat-de-programacio-orientada-a-objectes" title="Permanent link">&para;</a></h3>
<h5 id="exercici-1-crear-una-classe-basica">Exercici 1: Crear una Classe Bàsica<a class="headerlink" href="#exercici-1-crear-una-classe-basica" title="Permanent link">&para;</a></h5>
<ol>
<li>Crea una classe <code>Cotxe</code> que tinga les propietats <code>marca</code> i <code>model</code>. Afegeix un mètode <code>mostraInformacio</code> que retorne un string amb la marca i el model del cotxe.</li>
<li>Crea una instància de la classe <code>Cotxe</code>, assigna-li una marca i un model, i mostra la informació utilitzant el mètode <code>mostraInformacio</code>.</li>
</ol>
<details>
<summary>Solució</summary>

<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">class</span> <span class="nc">Cotxe</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="k">public</span> <span class="nv">$marca</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span>    <span class="k">public</span> <span class="nv">$model</span><span class="p">;</span>
<span class="linenos" data-linenos=" 5 "></span>
<span class="linenos" data-linenos=" 6 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">mostraInformacio</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 7 "></span>        <span class="k">return</span> <span class="s2">&quot;Marca: &quot;</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">marca</span> <span class="o">.</span> <span class="s2">&quot;, Model: &quot;</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">model</span><span class="p">;</span>
<span class="linenos" data-linenos=" 8 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos=" 9 "></span><span class="p">}</span>
<span class="linenos" data-linenos="10 "></span>
<span class="linenos" data-linenos="11 "></span><span class="nv">$cotxe</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Cotxe</span><span class="p">();</span>
<span class="linenos" data-linenos="12 "></span><span class="nv">$cotxe</span><span class="o">-&gt;</span><span class="na">marca</span> <span class="o">=</span> <span class="s2">&quot;Toyota&quot;</span><span class="p">;</span>
<span class="linenos" data-linenos="13 "></span><span class="nv">$cotxe</span><span class="o">-&gt;</span><span class="na">model</span> <span class="o">=</span> <span class="s2">&quot;Corolla&quot;</span><span class="p">;</span>
<span class="linenos" data-linenos="14 "></span><span class="k">echo</span> <span class="nv">$cotxe</span><span class="o">-&gt;</span><span class="na">mostraInformacio</span><span class="p">();</span> <span class="c1">// Output: Marca: Toyota, Model: Corolla</span>
</code></pre></div>
</details>

<h5 id="exercici-2-afegir-un-constructor-i-destructor">Exercici 2. Afegir un Constructor i destructor<a class="headerlink" href="#exercici-2-afegir-un-constructor-i-destructor" title="Permanent link">&para;</a></h5>
<ol>
<li>Modifica la classe <code>Cotxe</code> per afegir un constructor que prenga com a paràmetres la <code>marca</code> i el <code>model</code>, i que establisca aquestes propietats automàticament.</li>
<li>Afegeix un destructor a la classe <code>Cotxe</code> que mostre un missatge quan l'objecte és destruït. Crea un objecte i permet que es destruïsca al final del programa.</li>
</ol>
<details>
<summary>Solució</summary>

<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">class</span> <span class="nc">Cotxe</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="k">public</span> <span class="nv">$marca</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span>    <span class="k">public</span> <span class="nv">$model</span><span class="p">;</span>
<span class="linenos" data-linenos=" 5 "></span>
<span class="linenos" data-linenos=" 6 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nv">$marca</span><span class="p">,</span> <span class="nv">$model</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 7 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">marca</span> <span class="o">=</span> <span class="nv">$marca</span><span class="p">;</span>
<span class="linenos" data-linenos=" 8 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">model</span> <span class="o">=</span> <span class="nv">$model</span><span class="p">;</span>
<span class="linenos" data-linenos=" 9 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="10 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__destruct</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos="11 "></span>        <span class="k">echo</span> <span class="s2">&quot;L&#39;objecte Cotxe ha estat destruït.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="linenos" data-linenos="12 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="13 "></span>
<span class="linenos" data-linenos="14 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">mostraInformacio</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos="15 "></span>        <span class="k">return</span> <span class="s2">&quot;Marca: &quot;</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">marca</span> <span class="o">.</span> <span class="s2">&quot;, Model: &quot;</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">model</span><span class="p">;</span>
<span class="linenos" data-linenos="16 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="17 "></span><span class="p">}</span>
</code></pre></div>
</details>

<h5 id="exercici-3-encapsulacio-de-propietats">Exercici 3. Encapsulació de Propietats<a class="headerlink" href="#exercici-3-encapsulacio-de-propietats" title="Permanent link">&para;</a></h5>
<ol>
<li>Modifica la classe <code>Cotxe</code> per a que les propietats <code>marca</code> i <code>model</code> siguen privades. Afegeix mètodes públics <code>getMarca</code>, <code>setMarca</code>, <code>getModel</code>, i <code>setModel</code> per accedir i modificar aquestes propietats.</li>
</ol>
<details>
<summary>Solució</summary>

<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">class</span> <span class="nc">Cotxe</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="k">private</span> <span class="nv">$marca</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span>    <span class="k">private</span> <span class="nv">$model</span><span class="p">;</span>
<span class="linenos" data-linenos=" 5 "></span>
<span class="linenos" data-linenos=" 6 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nv">$marca</span><span class="p">,</span> <span class="nv">$model</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 7 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">marca</span> <span class="o">=</span> <span class="nv">$marca</span><span class="p">;</span>
<span class="linenos" data-linenos=" 8 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">model</span> <span class="o">=</span> <span class="nv">$model</span><span class="p">;</span>
<span class="linenos" data-linenos=" 9 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="10 "></span>
<span class="linenos" data-linenos="11 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">getMarca</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos="12 "></span>        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">marca</span><span class="p">;</span>
<span class="linenos" data-linenos="13 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="14 "></span>
<span class="linenos" data-linenos="15 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">setMarca</span><span class="p">(</span><span class="nv">$marca</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="16 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">marca</span> <span class="o">=</span> <span class="nv">$marca</span><span class="p">;</span>
<span class="linenos" data-linenos="17 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="18 "></span>
<span class="linenos" data-linenos="19 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">getModel</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos="20 "></span>        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">model</span><span class="p">;</span>
<span class="linenos" data-linenos="21 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="22 "></span>
<span class="linenos" data-linenos="23 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">setModel</span><span class="p">(</span><span class="nv">$model</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="24 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">model</span> <span class="o">=</span> <span class="nv">$model</span><span class="p">;</span>
<span class="linenos" data-linenos="25 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="26 "></span>
<span class="linenos" data-linenos="27 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">mostraInformacio</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos="28 "></span>        <span class="k">return</span> <span class="s2">&quot;Marca: &quot;</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getMarca</span><span class="p">()</span> <span class="o">.</span> <span class="s2">&quot;, Model: &quot;</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getModel</span><span class="p">();</span>
<span class="linenos" data-linenos="29 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="30 "></span><span class="p">}</span>
<span class="linenos" data-linenos="31 "></span>
<span class="linenos" data-linenos="32 "></span><span class="nv">$cotxe</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Cotxe</span><span class="p">(</span><span class="s2">&quot;Ford&quot;</span><span class="p">,</span> <span class="s2">&quot;Fiesta&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos="33 "></span><span class="k">echo</span> <span class="nv">$cotxe</span><span class="o">-&gt;</span><span class="na">mostraInformacio</span><span class="p">();</span> <span class="c1">// Output: Marca: Ford, Model: Fiesta</span>
</code></pre></div>
</details>

<h5 id="exercici-4-herencia-i-polimorfisme">Exercici 4. Herència i Polimorfisme<a class="headerlink" href="#exercici-4-herencia-i-polimorfisme" title="Permanent link">&para;</a></h5>
<ol>
<li>Crea una classe <code>Vehicle</code> amb una propietat <code>tipus</code>. A continuació, crea una classe <code>Motocicleta</code> que herete de <code>Vehicle</code> i tinga una propietat <code>cilindrada</code>. Afegeix un mètode a <code>Motocicleta</code> que retorne el tipus i la cilindrada.</li>
<li>Crea una funció <code>mostraDetallsVehicle</code> que accepte un objecte de tipus <code>Vehicle</code> i mostre les seues propietats. Prova aquesta funció amb objectes de <code>Cotxe</code> i <code>Motocicleta</code>.</li>
</ol>
<details>
<summary>Solució</summary>

<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">class</span> <span class="nc">Vehicle</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="k">protected</span> <span class="nv">$tipus</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nv">$tipus</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 6 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">tipus</span> <span class="o">=</span> <span class="nv">$tipus</span><span class="p">;</span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos=" 8 "></span>
<span class="linenos" data-linenos=" 9 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">mostraDetalls</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos="10 "></span>        <span class="k">return</span> <span class="s2">&quot;Tipus: &quot;</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">tipus</span><span class="p">;</span>
<span class="linenos" data-linenos="11 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="12 "></span><span class="p">}</span>
<span class="linenos" data-linenos="13 "></span>
<span class="linenos" data-linenos="14 "></span><span class="k">class</span> <span class="nc">Cotxe</span> <span class="k">extends</span> <span class="nx">Vehicle</span> <span class="p">{</span>
<span class="linenos" data-linenos="15 "></span>    <span class="k">private</span> <span class="nv">$marca</span><span class="p">;</span>
<span class="linenos" data-linenos="16 "></span>    <span class="k">private</span> <span class="nv">$model</span><span class="p">;</span>
<span class="linenos" data-linenos="17 "></span>
<span class="linenos" data-linenos="18 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nv">$marca</span><span class="p">,</span> <span class="nv">$model</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="19 "></span>        <span class="k">parent</span><span class="o">::</span><span class="na">__construct</span><span class="p">(</span><span class="s2">&quot;Cotxe&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos="20 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">marca</span> <span class="o">=</span> <span class="nv">$marca</span><span class="p">;</span>
<span class="linenos" data-linenos="21 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">model</span> <span class="o">=</span> <span class="nv">$model</span><span class="p">;</span>
<span class="linenos" data-linenos="22 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="23 "></span>
<span class="linenos" data-linenos="24 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">mostraDetalls</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos="25 "></span>        <span class="k">return</span> <span class="k">parent</span><span class="o">::</span><span class="na">mostraDetalls</span><span class="p">()</span> <span class="o">.</span> <span class="s2">&quot;, Marca: &quot;</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">marca</span> <span class="o">.</span> <span class="s2">&quot;, Model: &quot;</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">model</span><span class="p">;</span>
<span class="linenos" data-linenos="26 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="27 "></span><span class="p">}</span>
<span class="linenos" data-linenos="28 "></span>
<span class="linenos" data-linenos="29 "></span><span class="k">class</span> <span class="nc">Motocicleta</span> <span class="k">extends</span> <span class="nx">Vehicle</span> <span class="p">{</span>
<span class="linenos" data-linenos="30 "></span>    <span class="k">private</span> <span class="nv">$cilindrada</span><span class="p">;</span>
<span class="linenos" data-linenos="31 "></span>
<span class="linenos" data-linenos="32 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nv">$cilindrada</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="33 "></span>        <span class="k">parent</span><span class="o">::</span><span class="na">__construct</span><span class="p">(</span><span class="s2">&quot;Motocicleta&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos="34 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cilindrada</span> <span class="o">=</span> <span class="nv">$cilindrada</span><span class="p">;</span>
<span class="linenos" data-linenos="35 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="36 "></span>
<span class="linenos" data-linenos="37 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">mostraDetalls</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos="38 "></span>        <span class="k">return</span> <span class="k">parent</span><span class="o">::</span><span class="na">mostraDetalls</span><span class="p">()</span> <span class="o">.</span> <span class="s2">&quot;, Cilindrada: &quot;</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cilindrada</span><span class="p">;</span>
<span class="linenos" data-linenos="39 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="40 "></span><span class="p">}</span>
<span class="linenos" data-linenos="41 "></span>
<span class="linenos" data-linenos="42 "></span><span class="k">function</span> <span class="nf">mostraDetallsVehicle</span><span class="p">(</span><span class="nx">Vehicle</span> <span class="nv">$vehicle</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="43 "></span>    <span class="k">echo</span> <span class="nv">$vehicle</span><span class="o">-&gt;</span><span class="na">mostraDetalls</span><span class="p">()</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="linenos" data-linenos="44 "></span><span class="p">}</span>
<span class="linenos" data-linenos="45 "></span>
<span class="linenos" data-linenos="46 "></span><span class="nv">$cotxe</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Cotxe</span><span class="p">(</span><span class="s2">&quot;Toyota&quot;</span><span class="p">,</span> <span class="s2">&quot;Corolla&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos="47 "></span><span class="nv">$moto</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Motocicleta</span><span class="p">(</span><span class="mi">600</span><span class="p">);</span>
<span class="linenos" data-linenos="48 "></span>
<span class="linenos" data-linenos="49 "></span><span class="nx">mostraDetallsVehicle</span><span class="p">(</span><span class="nv">$cotxe</span><span class="p">);</span> <span class="c1">// Output: Tipus: Cotxe, Marca: Toyota, Model: Corolla</span>
<span class="linenos" data-linenos="50 "></span><span class="nx">mostraDetallsVehicle</span><span class="p">(</span><span class="nv">$moto</span><span class="p">);</span>  <span class="c1">// Output: Tipus: Motocicleta, Cilindrada: 600</span>
</code></pre></div>
</details>

<h5 id="exercici-5-implementacio-del-patro-mvc-amb-vehicles">Exercici 5. Implementació del Patró MVC amb Vehicles<a class="headerlink" href="#exercici-5-implementacio-del-patro-mvc-amb-vehicles" title="Permanent link">&para;</a></h5>
<p>Continuant amb l'exercici anterior on has creat les classes <code>Vehicle</code>, <code>Cotxe</code>, i <code>Motocicleta</code>, ara refactoritzaràs el codi per seguir el patró Model-Vista-Controlador (MVC). El teu objectiu és separar la lògica de negoci (models) de la presentació (vistes) i gestionar la interacció entre aquestes capes mitjançant un controlador.</p>
<ol>
<li>
<p><strong>Crear el Model</strong>:</p>
<ul>
<li>Refactoritza les classes <code>Vehicle</code>, <code>Cotxe</code>, i <code>Motocicleta</code> perquè representen el model de negoci i només contenen la lògica relacionada amb la gestió de vehicles.</li>
<li>Assegura't que els models no contenen cap codi de presentació.</li>
</ul>
</li>
<li>
<p><strong>Crear les Vistes</strong>:</p>
<ul>
<li>Crea vistes separades per mostrar els detalls dels vehicles:<ul>
<li>Una vista HTML que mostre la informació dels vehicles en format HTML.</li>
<li>Una vista en text simple que mostre els detalls dels vehicles en un format de text senzill.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Crear el Controlador</strong>:</p>
<ul>
<li>Implementa un controlador que gestione la interacció entre els models i les vistes.</li>
<li>El controlador ha de ser capaç de rebre una sol·licitud per mostrar un vehicle i triar la vista adequada per mostrar-ne els detalls.</li>
</ul>
</li>
</ol>
<details>
<summary>Solució</summary>

<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="  1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="  2 "></span><span class="c1">// Models</span>
<span class="linenos" data-linenos="  3 "></span>
<span class="linenos" data-linenos="  4 "></span><span class="k">class</span> <span class="nc">Vehicle</span> <span class="p">{</span>
<span class="linenos" data-linenos="  5 "></span>    <span class="k">protected</span> <span class="nv">$tipus</span><span class="p">;</span>
<span class="linenos" data-linenos="  6 "></span>
<span class="linenos" data-linenos="  7 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nv">$tipus</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="  8 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">tipus</span> <span class="o">=</span> <span class="nv">$tipus</span><span class="p">;</span>
<span class="linenos" data-linenos="  9 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos=" 10 "></span>
<span class="linenos" data-linenos=" 11 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">getTipus</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 12 "></span>        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">tipus</span><span class="p">;</span>
<span class="linenos" data-linenos=" 13 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos=" 14 "></span><span class="p">}</span>
<span class="linenos" data-linenos=" 15 "></span>
<span class="linenos" data-linenos=" 16 "></span><span class="k">class</span> <span class="nc">Cotxe</span> <span class="k">extends</span> <span class="nx">Vehicle</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 17 "></span>    <span class="k">private</span> <span class="nv">$marca</span><span class="p">;</span>
<span class="linenos" data-linenos=" 18 "></span>    <span class="k">private</span> <span class="nv">$model</span><span class="p">;</span>
<span class="linenos" data-linenos=" 19 "></span>
<span class="linenos" data-linenos=" 20 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nv">$marca</span><span class="p">,</span> <span class="nv">$model</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 21 "></span>        <span class="k">parent</span><span class="o">::</span><span class="na">__construct</span><span class="p">(</span><span class="s2">&quot;Cotxe&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos=" 22 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">marca</span> <span class="o">=</span> <span class="nv">$marca</span><span class="p">;</span>
<span class="linenos" data-linenos=" 23 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">model</span> <span class="o">=</span> <span class="nv">$model</span><span class="p">;</span>
<span class="linenos" data-linenos=" 24 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos=" 25 "></span>
<span class="linenos" data-linenos=" 26 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">getMarca</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 27 "></span>        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">marca</span><span class="p">;</span>
<span class="linenos" data-linenos=" 28 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos=" 29 "></span>
<span class="linenos" data-linenos=" 30 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">getModel</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 31 "></span>        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">model</span><span class="p">;</span>
<span class="linenos" data-linenos=" 32 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos=" 33 "></span><span class="p">}</span>
<span class="linenos" data-linenos=" 34 "></span>
<span class="linenos" data-linenos=" 35 "></span><span class="k">class</span> <span class="nc">Motocicleta</span> <span class="k">extends</span> <span class="nx">Vehicle</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 36 "></span>    <span class="k">private</span> <span class="nv">$cilindrada</span><span class="p">;</span>
<span class="linenos" data-linenos=" 37 "></span>
<span class="linenos" data-linenos=" 38 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nv">$cilindrada</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 39 "></span>        <span class="k">parent</span><span class="o">::</span><span class="na">__construct</span><span class="p">(</span><span class="s2">&quot;Motocicleta&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos=" 40 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cilindrada</span> <span class="o">=</span> <span class="nv">$cilindrada</span><span class="p">;</span>
<span class="linenos" data-linenos=" 41 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos=" 42 "></span>
<span class="linenos" data-linenos=" 43 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">getCilindrada</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 44 "></span>        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cilindrada</span><span class="p">;</span>
<span class="linenos" data-linenos=" 45 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos=" 46 "></span><span class="p">}</span>
<span class="linenos" data-linenos=" 47 "></span>
<span class="linenos" data-linenos=" 48 "></span><span class="c1">// Vistes</span>
<span class="linenos" data-linenos=" 49 "></span>
<span class="linenos" data-linenos=" 50 "></span><span class="k">class</span> <span class="nc">VehicleView</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 51 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">renderHtml</span><span class="p">(</span><span class="nx">Vehicle</span> <span class="nv">$vehicle</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 52 "></span>        <span class="nv">$output</span> <span class="o">=</span> <span class="s2">&quot;&lt;p&gt;Tipus: &quot;</span> <span class="o">.</span> <span class="nv">$vehicle</span><span class="o">-&gt;</span><span class="na">getTipus</span><span class="p">()</span> <span class="o">.</span> <span class="s2">&quot;&lt;/p&gt;&quot;</span><span class="p">;</span>
<span class="linenos" data-linenos=" 53 "></span>        <span class="k">if</span> <span class="p">(</span><span class="nv">$vehicle</span> <span class="nx">instanceof</span> <span class="nx">Cotxe</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 54 "></span>            <span class="nv">$output</span> <span class="o">.=</span> <span class="s2">&quot;&lt;p&gt;Marca: &quot;</span> <span class="o">.</span> <span class="nv">$vehicle</span><span class="o">-&gt;</span><span class="na">getMarca</span><span class="p">()</span> <span class="o">.</span> <span class="s2">&quot;&lt;/p&gt;&quot;</span><span class="p">;</span>
<span class="linenos" data-linenos=" 55 "></span>            <span class="nv">$output</span> <span class="o">.=</span> <span class="s2">&quot;&lt;p&gt;Model: &quot;</span> <span class="o">.</span> <span class="nv">$vehicle</span><span class="o">-&gt;</span><span class="na">getModel</span><span class="p">()</span> <span class="o">.</span> <span class="s2">&quot;&lt;/p&gt;&quot;</span><span class="p">;</span>
<span class="linenos" data-linenos=" 56 "></span>        <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$vehicle</span> <span class="nx">instanceof</span> <span class="nx">Motocicleta</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 57 "></span>            <span class="nv">$output</span> <span class="o">.=</span> <span class="s2">&quot;&lt;p&gt;Cilindrada: &quot;</span> <span class="o">.</span> <span class="nv">$vehicle</span><span class="o">-&gt;</span><span class="na">getCilindrada</span><span class="p">()</span> <span class="o">.</span> <span class="s2">&quot; cc&lt;/p&gt;&quot;</span><span class="p">;</span>
<span class="linenos" data-linenos=" 58 "></span>        <span class="p">}</span>
<span class="linenos" data-linenos=" 59 "></span>        <span class="k">return</span> <span class="nv">$output</span><span class="p">;</span>
<span class="linenos" data-linenos=" 60 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos=" 61 "></span>
<span class="linenos" data-linenos=" 62 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">renderText</span><span class="p">(</span><span class="nx">Vehicle</span> <span class="nv">$vehicle</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 63 "></span>        <span class="nv">$output</span> <span class="o">=</span> <span class="s2">&quot;Tipus: &quot;</span> <span class="o">.</span> <span class="nv">$vehicle</span><span class="o">-&gt;</span><span class="na">getTipus</span><span class="p">()</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="linenos" data-linenos=" 64 "></span>        <span class="k">if</span> <span class="p">(</span><span class="nv">$vehicle</span> <span class="nx">instanceof</span> <span class="nx">Cotxe</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 65 "></span>            <span class="nv">$output</span> <span class="o">.=</span> <span class="s2">&quot;Marca: &quot;</span> <span class="o">.</span> <span class="nv">$vehicle</span><span class="o">-&gt;</span><span class="na">getMarca</span><span class="p">()</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="linenos" data-linenos=" 66 "></span>            <span class="nv">$output</span> <span class="o">.=</span> <span class="s2">&quot;Model: &quot;</span> <span class="o">.</span> <span class="nv">$vehicle</span><span class="o">-&gt;</span><span class="na">getModel</span><span class="p">()</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="linenos" data-linenos=" 67 "></span>        <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$vehicle</span> <span class="nx">instanceof</span> <span class="nx">Motocicleta</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 68 "></span>            <span class="nv">$output</span> <span class="o">.=</span> <span class="s2">&quot;Cilindrada: &quot;</span> <span class="o">.</span> <span class="nv">$vehicle</span><span class="o">-&gt;</span><span class="na">getCilindrada</span><span class="p">()</span> <span class="o">.</span> <span class="s2">&quot; cc</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="linenos" data-linenos=" 69 "></span>        <span class="p">}</span>
<span class="linenos" data-linenos=" 70 "></span>        <span class="k">return</span> <span class="nv">$output</span><span class="p">;</span>
<span class="linenos" data-linenos=" 71 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos=" 72 "></span><span class="p">}</span>
<span class="linenos" data-linenos=" 73 "></span>
<span class="linenos" data-linenos=" 74 "></span><span class="c1">// Controlador</span>
<span class="linenos" data-linenos=" 75 "></span>
<span class="linenos" data-linenos=" 76 "></span><span class="k">class</span> <span class="nc">VehicleController</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 77 "></span>    <span class="k">private</span> <span class="nv">$view</span><span class="p">;</span>
<span class="linenos" data-linenos=" 78 "></span>
<span class="linenos" data-linenos=" 79 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">VehicleView</span> <span class="nv">$view</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 80 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span> <span class="o">=</span> <span class="nv">$view</span><span class="p">;</span>
<span class="linenos" data-linenos=" 81 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos=" 82 "></span>
<span class="linenos" data-linenos=" 83 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">mostrarVehicle</span><span class="p">(</span><span class="nx">Vehicle</span> <span class="nv">$vehicle</span><span class="p">,</span> <span class="nv">$format</span> <span class="o">=</span> <span class="s1">&#39;html&#39;</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 84 "></span>        <span class="k">if</span> <span class="p">(</span><span class="nv">$format</span> <span class="o">===</span> <span class="s1">&#39;html&#39;</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 85 "></span>            <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">renderHtml</span><span class="p">(</span><span class="nv">$vehicle</span><span class="p">);</span>
<span class="linenos" data-linenos=" 86 "></span>        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 87 "></span>            <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">renderText</span><span class="p">(</span><span class="nv">$vehicle</span><span class="p">);</span>
<span class="linenos" data-linenos=" 88 "></span>        <span class="p">}</span>
<span class="linenos" data-linenos=" 89 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos=" 90 "></span><span class="p">}</span>
<span class="linenos" data-linenos=" 91 "></span>
<span class="linenos" data-linenos=" 92 "></span><span class="c1">// Exemple d&#39;ús</span>
<span class="linenos" data-linenos=" 93 "></span>
<span class="linenos" data-linenos=" 94 "></span><span class="nv">$view</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">VehicleView</span><span class="p">();</span>
<span class="linenos" data-linenos=" 95 "></span><span class="nv">$controller</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">VehicleController</span><span class="p">(</span><span class="nv">$view</span><span class="p">);</span>
<span class="linenos" data-linenos=" 96 "></span>
<span class="linenos" data-linenos=" 97 "></span><span class="nv">$cotxe</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Cotxe</span><span class="p">(</span><span class="s2">&quot;Toyota&quot;</span><span class="p">,</span> <span class="s2">&quot;Corolla&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos=" 98 "></span><span class="nv">$moto</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Motocicleta</span><span class="p">(</span><span class="mi">600</span><span class="p">);</span>
<span class="linenos" data-linenos=" 99 "></span>
<span class="linenos" data-linenos="100 "></span><span class="c1">// Mostrar en HTML</span>
<span class="linenos" data-linenos="101 "></span><span class="nv">$controller</span><span class="o">-&gt;</span><span class="na">mostrarVehicle</span><span class="p">(</span><span class="nv">$cotxe</span><span class="p">,</span> <span class="s1">&#39;html&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos="102 "></span><span class="nv">$controller</span><span class="o">-&gt;</span><span class="na">mostrarVehicle</span><span class="p">(</span><span class="nv">$moto</span><span class="p">,</span> <span class="s1">&#39;html&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos="103 "></span>
<span class="linenos" data-linenos="104 "></span><span class="c1">// Mostrar en Text</span>
<span class="linenos" data-linenos="105 "></span><span class="nv">$controller</span><span class="o">-&gt;</span><span class="na">mostrarVehicle</span><span class="p">(</span><span class="nv">$cotxe</span><span class="p">,</span> <span class="s1">&#39;text&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos="106 "></span><span class="nv">$controller</span><span class="o">-&gt;</span><span class="na">mostrarVehicle</span><span class="p">(</span><span class="nv">$moto</span><span class="p">,</span> <span class="s1">&#39;text&#39;</span><span class="p">);</span>
</code></pre></div>
</details>

<h4 id="exercici-5-classes-abstractes-i-interficies">Exercici 5. Classes Abstractes i Interfícies<a class="headerlink" href="#exercici-5-classes-abstractes-i-interficies" title="Permanent link">&para;</a></h4>
<ol>
<li>Crea una classe abstracta <code>Figura</code> amb un mètode abstracte <code>calculaArea</code>. Després, crea classes <code>Cercle</code> i <code>Rectangle</code> que estiguen basades en <code>Figura</code> i implementen el mètode <code>calculaArea</code>.</li>
<li>Defineix una interfície <code>OperacionsBàsiques</code> amb els mètodes <code>suma</code> i <code>resta</code>. Implementa aquesta interfície en una classe <code>CalculadoraSimple</code>.</li>
</ol>
<details>
<summary>Solució</summary>

<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">abstract</span> <span class="k">class</span> <span class="nc">Figura</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="k">abstract</span> <span class="k">public</span> <span class="k">function</span> <span class="nf">calculaArea</span><span class="p">();</span>
<span class="linenos" data-linenos=" 4 "></span><span class="p">}</span>
<span class="linenos" data-linenos=" 5 "></span>
<span class="linenos" data-linenos=" 6 "></span><span class="k">class</span> <span class="nc">Cercle</span> <span class="k">extends</span> <span class="nx">Figura</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="k">private</span> <span class="nv">$radi</span><span class="p">;</span>
<span class="linenos" data-linenos=" 8 "></span>
<span class="linenos" data-linenos=" 9 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nv">$radi</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="10 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">radi</span> <span class="o">=</span> <span class="nv">$radi</span><span class="p">;</span>
<span class="linenos" data-linenos="11 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="12 "></span>
<span class="linenos" data-linenos="13 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">calculaArea</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos="14 "></span>        <span class="k">return</span> <span class="nb">pi</span><span class="p">()</span> <span class="o">*</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">radi</span> <span class="o">*</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">radi</span><span class="p">;</span>
<span class="linenos" data-linenos="15 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="16 "></span><span class="p">}</span>
<span class="linenos" data-linenos="17 "></span>
<span class="linenos" data-linenos="18 "></span><span class="k">class</span> <span class="nc">Rectangle</span> <span class="k">extends</span> <span class="nx">Figura</span> <span class="p">{</span>
<span class="linenos" data-linenos="19 "></span>    <span class="k">private</span> <span class="nv">$ample</span><span class="p">;</span>
<span class="linenos" data-linenos="20 "></span>    <span class="k">private</span> <span class="nv">$llarg</span><span class="p">;</span>
<span class="linenos" data-linenos="21 "></span>
<span class="linenos" data-linenos="22 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nv">$ample</span><span class="p">,</span> <span class="nv">$llarg</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="23 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">ample</span> <span class="o">=</span> <span class="nv">$ample</span><span class="p">;</span>
<span class="linenos" data-linenos="24 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">llarg</span> <span class="o">=</span> <span class="nv">$llarg</span><span class="p">;</span>
<span class="linenos" data-linenos="25 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="26 "></span>
<span class="linenos" data-linenos="27 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">calculaArea</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos="28 "></span>        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">ample</span> <span class="o">*</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">llarg</span><span class="p">;</span>
<span class="linenos" data-linenos="29 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="30 "></span><span class="p">}</span>
<span class="linenos" data-linenos="31 "></span>
<span class="linenos" data-linenos="32 "></span><span class="nv">$cercle</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Cercle</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<span class="linenos" data-linenos="33 "></span><span class="nv">$rectangle</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Rectangle</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span>
<span class="linenos" data-linenos="34 "></span>
<span class="linenos" data-linenos="35 "></span><span class="k">echo</span> <span class="s2">&quot;Àrea del cercle: &quot;</span> <span class="o">.</span> <span class="nv">$cercle</span><span class="o">-&gt;</span><span class="na">calculaArea</span><span class="p">()</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span> <span class="c1">// Output: Àrea del cercle: 78.5398</span>
<span class="linenos" data-linenos="36 "></span><span class="k">echo</span> <span class="s2">&quot;Àrea del rectangle: &quot;</span> <span class="o">.</span> <span class="nv">$rectangle</span><span class="o">-&gt;</span><span class="na">calculaArea</span><span class="p">()</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span> <span class="c1">// Output: Àrea del rectangle: 24</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">interface</span> <span class="nx">OperacionsBàsiques</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">suma</span><span class="p">(</span><span class="nv">$a</span><span class="p">,</span> <span class="nv">$b</span><span class="p">);</span>
<span class="linenos" data-linenos=" 4 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">resta</span><span class="p">(</span><span class="nv">$a</span><span class="p">,</span> <span class="nv">$b</span><span class="p">);</span>
<span class="linenos" data-linenos=" 5 "></span><span class="p">}</span>
<span class="linenos" data-linenos=" 6 "></span>
<span class="linenos" data-linenos=" 7 "></span><span class="k">class</span> <span class="nc">CalculadoraSimple</span> <span class="k">implements</span> <span class="nx">OperacionsBàsiques</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 8 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">suma</span><span class="p">(</span><span class="nv">$a</span><span class="p">,</span> <span class="nv">$b</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 9 "></span>        <span class="k">return</span> <span class="nv">$a</span> <span class="o">+</span> <span class="nv">$b</span><span class="p">;</span>
<span class="linenos" data-linenos="10 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="11 "></span>
<span class="linenos" data-linenos="12 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">resta</span><span class="p">(</span><span class="nv">$a</span><span class="p">,</span> <span class="nv">$b</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="13 "></span>        <span class="k">return</span> <span class="nv">$a</span> <span class="o">-</span> <span class="nv">$b</span><span class="p">;</span>
<span class="linenos" data-linenos="14 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="15 "></span><span class="p">}</span>
<span class="linenos" data-linenos="16 "></span>
<span class="linenos" data-linenos="17 "></span><span class="nv">$calculadora</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CalculadoraSimple</span><span class="p">();</span>
<span class="linenos" data-linenos="18 "></span><span class="k">echo</span> <span class="s2">&quot;Suma: &quot;</span> <span class="o">.</span> <span class="nv">$calculadora</span><span class="o">-&gt;</span><span class="na">suma</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span> <span class="c1">// Output: Suma: 8</span>
<span class="linenos" data-linenos="19 "></span><span class="k">echo</span> <span class="s2">&quot;Resta: &quot;</span> <span class="o">.</span> <span class="nv">$calculadora</span><span class="o">-&gt;</span><span class="na">resta</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span> <span class="c1">// Output: Resta: 2</span>
</code></pre></div>
</details>

<h4 id="exercici-6-utilitzar-traits">Exercici 6.  Utilitzar Traits<a class="headerlink" href="#exercici-6-utilitzar-traits" title="Permanent link">&para;</a></h4>
<ol>
<li>Crea un trait <code>Informacio</code> amb un mètode <code>mostraInformacio</code>. Inclou aquest trait en les classes <code>Cotxe</code> i <code>Motocicleta</code>, i utilitza'l per mostrar informació addicional.</li>
</ol>
<details>
<summary>Solució</summary>

<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">trait</span> <span class="nx">Informacio</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">mostraInformacio</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 4 "></span>        <span class="k">return</span> <span class="s2">&quot;Aquest és un objecte de tipus &quot;</span> <span class="o">.</span> <span class="nb">get_class</span><span class="p">(</span><span class="nv">$this</span><span class="p">);</span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos=" 6 "></span><span class="p">}</span>
<span class="linenos" data-linenos=" 7 "></span>
<span class="linenos" data-linenos=" 8 "></span><span class="k">class</span> <span class="nc">Cotxe</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 9 "></span>    <span class="k">use</span> <span class="nx">Informacio</span><span class="p">;</span>
<span class="linenos" data-linenos="10 "></span><span class="p">}</span>
<span class="linenos" data-linenos="11 "></span>
<span class="linenos" data-linenos="12 "></span><span class="k">class</span> <span class="nc">Motocicleta</span> <span class="p">{</span>
<span class="linenos" data-linenos="13 "></span>    <span class="k">use</span> <span class="nx">Informacio</span><span class="p">;</span>
<span class="linenos" data-linenos="14 "></span><span class="p">}</span>
<span class="linenos" data-linenos="15 "></span>
<span class="linenos" data-linenos="16 "></span><span class="nv">$cotxe</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Cotxe</span><span class="p">();</span>
<span class="linenos" data-linenos="17 "></span><span class="nv">$moto</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Motocicleta</span><span class="p">();</span>
<span class="linenos" data-linenos="18 "></span>
<span class="linenos" data-linenos="19 "></span><span class="k">echo</span> <span class="nv">$cotxe</span><span class="o">-&gt;</span><span class="na">mostraInformacio</span><span class="p">()</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span> <span class="c1">// Output: Aquest és un objecte de tipus Cotxe</span>
<span class="linenos" data-linenos="20 "></span><span class="k">echo</span> <span class="nv">$moto</span><span class="o">-&gt;</span><span class="na">mostraInformacio</span><span class="p">()</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span> <span class="c1">// Output: Aquest és un objecte de tipus Motocicleta</span>
</code></pre></div>
</details>

<h4 id="exercici-7-gestionar-excepcions">Exercici 7.  Gestionar Excepcions<a class="headerlink" href="#exercici-7-gestionar-excepcions" title="Permanent link">&para;</a></h4>
<ol>
<li>Escriu una funció <code>divideix</code> que prenga dos nombres com a paràmetres i retorne el resultat de la divisió. Si el segon nombre és zero, llença una excepció amb un missatge adequat. Captura aquesta excepció quan crides a la funció i mostra un missatge d'error.</li>
</ol>
<details>
<summary>Solució</summary>

<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">function</span> <span class="nf">divideix</span><span class="p">(</span><span class="nv">$a</span><span class="p">,</span> <span class="nv">$b</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="k">if</span> <span class="p">(</span><span class="nv">$b</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 4 "></span>        <span class="k">throw</span> <span class="k">new</span> <span class="nx">Exception</span><span class="p">(</span><span class="s2">&quot;No es pot dividir per zero.&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos=" 6 "></span>    <span class="k">return</span> <span class="nv">$a</span> <span class="o">/</span> <span class="nv">$b</span><span class="p">;</span>
<span class="linenos" data-linenos=" 7 "></span><span class="p">}</span>
<span class="linenos" data-linenos=" 8 "></span>
<span class="linenos" data-linenos=" 9 "></span><span class="k">try</span> <span class="p">{</span>
<span class="linenos" data-linenos="10 "></span>    <span class="k">echo</span> <span class="nx">divideix</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span> <span class="c1">// Output: 5</span>
<span class="linenos" data-linenos="11 "></span>    <span class="k">echo</span> <span class="nx">divideix</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span> <span class="c1">// Aquesta línia llançarà una excepció</span>
<span class="linenos" data-linenos="12 "></span><span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="13 "></span>    <span class="k">echo</span> <span class="s2">&quot;Error: &quot;</span> <span class="o">.</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">()</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span> <span class="c1">// Output: Error: No es pot dividir per zero.</span>
<span class="linenos" data-linenos="14 "></span><span class="p">}</span>
</code></pre></div>
</details>

<h4 id="exercici-8-proves-amb-phpunit">Exercici 8. Proves amb PHPUnit<a class="headerlink" href="#exercici-8-proves-amb-phpunit" title="Permanent link">&para;</a></h4>
<ol>
<li>Crea una classe <code>Calculadora</code> amb els mètodes <code>suma</code> i <code>resta</code>. Escriu una prova unitària amb PHPUnit per verificar que aquests mètodes funcionen correctament.</li>
<li>Afegeix un mètode <code>divideix</code> a la classe <code>Calculadora</code> que llance una excepció quan es divideix per zero. Escriu una prova unitària que assegure que aquesta excepció es llança correctament.</li>
</ol>
<details>
<summary>Solució</summary>

<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="c1">// Arxiu: tests/CalculadoraTest.php</span>
<span class="linenos" data-linenos=" 3 "></span><span class="k">use</span> <span class="nx">PHPUnit\Framework\TestCase</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="k">class</span> <span class="nc">Calculadora</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 6 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">suma</span><span class="p">(</span><span class="nv">$a</span><span class="p">,</span> <span class="nv">$b</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 7 "></span>        <span class="k">return</span> <span class="nv">$a</span> <span class="o">+</span> <span class="nv">$b</span><span class="p">;</span>
<span class="linenos" data-linenos=" 8 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos=" 9 "></span>
<span class="linenos" data-linenos="10 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">resta</span><span class="p">(</span><span class="nv">$a</span><span class="p">,</span> <span class="nv">$b</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="11 "></span>        <span class="k">return</span> <span class="nv">$a</span> <span class="o">-</span> <span class="nv">$b</span><span class="p">;</span>
<span class="linenos" data-linenos="12 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="13 "></span><span class="p">}</span>
<span class="linenos" data-linenos="14 "></span>
<span class="linenos" data-linenos="15 "></span><span class="k">class</span> <span class="nc">CalculadoraTest</span> <span class="k">extends</span> <span class="nx">TestCase</span> <span class="p">{</span>
<span class="linenos" data-linenos="16 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">testSuma</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos="17 "></span>        <span class="nv">$calculadora</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Calculadora</span><span class="p">();</span>
<span class="linenos" data-linenos="18 "></span>        <span class="nv">$resultat</span> <span class="o">=</span> <span class="nv">$calculadora</span><span class="o">-&gt;</span><span class="na">suma</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
<span class="linenos" data-linenos="19 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertEquals</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="nv">$resultat</span><span class="p">);</span>
<span class="linenos" data-linenos="20 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="21 "></span>
<span class="linenos" data-linenos="22 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">testResta</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos="23 "></span>        <span class="nv">$calculadora</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Calculadora</span><span class="p">();</span>
<span class="linenos" data-linenos="24 "></span>        <span class="nv">$resultat</span> <span class="o">=</span> <span class="nv">$calculadora</span><span class="o">-&gt;</span><span class="na">resta</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
<span class="linenos" data-linenos="25 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertEquals</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nv">$resultat</span><span class="p">);</span>
<span class="linenos" data-linenos="26 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="27 "></span><span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="x">// Arxiu: tests/CalculadoraTest.php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="x">use PHPUnit\Framework\TestCase;</span>
<span class="linenos" data-linenos=" 3 "></span>
<span class="linenos" data-linenos=" 4 "></span><span class="x">class Calculadora {</span>
<span class="linenos" data-linenos=" 5 "></span><span class="x">    public function divideix($a, $b) {</span>
<span class="linenos" data-linenos=" 6 "></span><span class="x">        if ($b == 0) {</span>
<span class="linenos" data-linenos=" 7 "></span><span class="x">            throw new InvalidArgumentException(&quot;No es pot dividir per zero.&quot;);</span>
<span class="linenos" data-linenos=" 8 "></span><span class="x">        }</span>
<span class="linenos" data-linenos=" 9 "></span><span class="x">        return $a / $b;</span>
<span class="linenos" data-linenos="10 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="11 "></span><span class="x">}</span>
<span class="linenos" data-linenos="12 "></span>
<span class="linenos" data-linenos="13 "></span><span class="x">class CalculadoraTest extends TestCase {</span>
<span class="linenos" data-linenos="14 "></span><span class="x">    public function testDivideix() {</span>
<span class="linenos" data-linenos="15 "></span><span class="x">        $this-&gt;expectException(InvalidArgumentException::class);</span>
<span class="linenos" data-linenos="16 "></span>
<span class="linenos" data-linenos="17 "></span><span class="x">        $calculadora = new Calculadora();</span>
<span class="linenos" data-linenos="18 "></span><span class="x">        $calculadora-&gt;divideix(5, 0);</span>
<span class="linenos" data-linenos="19 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="20 "></span><span class="x">}</span>
</code></pre></div>
</details>

<h4 id="exercici-9-espais-de-noms-namespaces">Exercici 9. Espais de Noms (Namespaces)<a class="headerlink" href="#exercici-9-espais-de-noms-namespaces" title="Permanent link">&para;</a></h4>
<ol>
<li>Crea un espai de noms <code>App\Models</code> i defineix una classe <code>Usuari</code> dins d'aquest espai de noms. Afegeix un mètode <code>getNomComplet</code> que retorne el nom complet de l'usuari.</li>
<li>En un fitxer separat, importa la classe <code>Usuari</code> de l'espai de noms <code>App\Models</code> i crea una instància d'aquesta classe. Utilitza el mètode <code>getNomComplet</code> per mostrar el nom complet d'un usuari.</li>
</ol>
<details>
<summary>Solució</summary>

<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="c1">// Arxiu: src/Models/Usuari.php</span>
<span class="linenos" data-linenos=" 3 "></span><span class="k">namespace</span> <span class="nx">App\Models</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="k">class</span> <span class="nc">Usuari</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 6 "></span>    <span class="k">private</span> <span class="nv">$nom</span><span class="p">;</span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="k">private</span> <span class="nv">$cognom</span><span class="p">;</span>
<span class="linenos" data-linenos=" 8 "></span>
<span class="linenos" data-linenos=" 9 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nv">$nom</span><span class="p">,</span> <span class="nv">$cognom</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="10 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">nom</span> <span class="o">=</span> <span class="nv">$nom</span><span class="p">;</span>
<span class="linenos" data-linenos="11 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cognom</span> <span class="o">=</span> <span class="nv">$cognom</span><span class="p">;</span>
<span class="linenos" data-linenos="12 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="13 "></span>
<span class="linenos" data-linenos="14 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">getNomComplet</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos="15 "></span>        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">nom</span> <span class="o">.</span> <span class="s2">&quot; &quot;</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cognom</span><span class="p">;</span>
<span class="linenos" data-linenos="16 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="17 "></span><span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="x">// Arxiu: index.php</span>
<span class="linenos" data-linenos="2 "></span><span class="x">require &#39;vendor/autoload.php&#39;;</span>
<span class="linenos" data-linenos="3 "></span>
<span class="linenos" data-linenos="4 "></span><span class="x">use App\Models\Usuari;</span>
<span class="linenos" data-linenos="5 "></span>
<span class="linenos" data-linenos="6 "></span><span class="x">$usuari = new Usuari(&quot;Joan&quot;, &quot;Garcia&quot;);</span>
<span class="linenos" data-linenos="7 "></span><span class="x">echo $usuari-&gt;getNomComplet(); // Output: Joan Garcia</span>
</code></pre></div>
</details>

<h4 id="exercici-10-autoloading-i-composer">Exercici 10. Autoloading i Composer<a class="headerlink" href="#exercici-10-autoloading-i-composer" title="Permanent link">&para;</a></h4>
<ol>
<li>Configura un projecte PHP amb Composer que utilitze l'autoloading PSR-4. Crea l'estructura de directoris <code>src/Models</code> i col·loca una classe <code>Producte</code> dins de <code>src/Models</code>. Verifica que l'autoloading funcione correctament instanciant la classe <code>Producte</code> en un fitxer separat.</li>
<li>Afegeix la llibreria <code>monolog/monolog</code> al projecte utilitzant Composer. Crea una instància de <code>Logger</code> i afegeix una entrada al registre de logs.</li>
</ol>
<details>
<summary>Solució</summary>

1. Crea l'estructura de directoris src/Models i col·loca el següent codi a src/Models/Producte.php:

<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">namespace</span> <span class="nx">App\Models</span><span class="p">;</span>
<span class="linenos" data-linenos=" 3 "></span>
<span class="linenos" data-linenos=" 4 "></span><span class="k">class</span> <span class="nc">Producte</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="k">private</span> <span class="nv">$nom</span><span class="p">;</span>
<span class="linenos" data-linenos=" 6 "></span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nv">$nom</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 8 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">nom</span> <span class="o">=</span> <span class="nv">$nom</span><span class="p">;</span>
<span class="linenos" data-linenos=" 9 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="10 "></span>
<span class="linenos" data-linenos="11 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">getNom</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos="12 "></span>        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">nom</span><span class="p">;</span>
<span class="linenos" data-linenos="13 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="14 "></span><span class="p">}</span>
</code></pre></div>

2. Configura l'autoloading en composer.json:

<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="p">{</span>
<span class="linenos" data-linenos="2 "></span><span class="w">    </span><span class="nt">&quot;autoload&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="3 "></span><span class="w">        </span><span class="nt">&quot;psr-4&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="4 "></span><span class="w">            </span><span class="nt">&quot;App\\&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;src/&quot;</span>
<span class="linenos" data-linenos="5 "></span><span class="w">        </span><span class="p">}</span>
<span class="linenos" data-linenos="6 "></span><span class="w">    </span><span class="p">}</span>
<span class="linenos" data-linenos="7 "></span><span class="p">}</span>
</code></pre></div>

3. Executa composer dump-autoload per generar els fitxers d'autoload.
4. Utilitza la classe producte:

<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos="2 "></span><span class="c1">// Arxiu: index.php</span>
<span class="linenos" data-linenos="3 "></span><span class="k">require</span> <span class="s1">&#39;vendor/autoload.php&#39;</span><span class="p">;</span>
<span class="linenos" data-linenos="4 "></span>
<span class="linenos" data-linenos="5 "></span><span class="k">use</span> <span class="nx">App\Models\Producte</span><span class="p">;</span>
<span class="linenos" data-linenos="6 "></span>
<span class="linenos" data-linenos="7 "></span><span class="nv">$producte</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Producte</span><span class="p">(</span><span class="s2">&quot;Ordinador&quot;</span><span class="p">);</span>
<span class="linenos" data-linenos="8 "></span><span class="k">echo</span> <span class="nv">$producte</span><span class="o">-&gt;</span><span class="na">getNom</span><span class="p">();</span> <span class="c1">// Output: Ordinador</span>
</code></pre></div>
5. Afegeix Monolog a composer.json:

<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>composer<span class="w"> </span>require<span class="w"> </span>monolog/monolog
</code></pre></div>
6. Utilitza Monolog per crear un logger:

<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">require</span> <span class="s1">&#39;vendor/autoload.php&#39;</span><span class="p">;</span>
<span class="linenos" data-linenos=" 3 "></span>
<span class="linenos" data-linenos=" 4 "></span><span class="k">use</span> <span class="nx">Monolog\Logger</span><span class="p">;</span>
<span class="linenos" data-linenos=" 5 "></span><span class="k">use</span> <span class="nx">Monolog\Handler\StreamHandler</span><span class="p">;</span>
<span class="linenos" data-linenos=" 6 "></span>
<span class="linenos" data-linenos=" 7 "></span><span class="nv">$log</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Logger</span><span class="p">(</span><span class="s1">&#39;nom_aplicacio&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos=" 8 "></span><span class="nv">$log</span><span class="o">-&gt;</span><span class="na">pushHandler</span><span class="p">(</span><span class="k">new</span> <span class="nx">StreamHandler</span><span class="p">(</span><span class="s1">&#39;app.log&#39;</span><span class="p">,</span> <span class="nx">Logger</span><span class="o">::</span><span class="na">WARNING</span><span class="p">));</span>
<span class="linenos" data-linenos=" 9 "></span>
<span class="linenos" data-linenos="10 "></span><span class="c1">// Afegeix una entrada al log</span>
<span class="linenos" data-linenos="11 "></span><span class="nv">$log</span><span class="o">-&gt;</span><span class="na">warning</span><span class="p">(</span><span class="s1">&#39;Aquesta és una entrada d&#39;</span><span class="nx">advertència</span><span class="s1">&#39;);</span>
<span class="linenos" data-linenos="12 "></span><span class="s1">$log-&gt;error(&#39;</span><span class="nx">Aquesta</span> <span class="nx">és</span> <span class="nx">una</span> <span class="nx">entrada</span> <span class="nx">d</span><span class="s1">&#39;error&#39;</span><span class="p">);</span>
</code></pre></div>
</details>

<h4 id="exercici-11-logger">Exercici 11. Logger<a class="headerlink" href="#exercici-11-logger" title="Permanent link">&para;</a></h4>
<ol>
<li>Utilitzant la llibreria <code>Monolog</code>, crea un logger que escriga missatges a un fitxer <code>app.log</code>. Configura el logger per registrar missatges d'informació i d'error.</li>
<li>Configura un logger que escriga missatges de registre tant a un fitxer com a la consola. Prova el logger registrant missatges d'error.</li>
</ol>
<details>
<summary>Solució</summary>

<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">require</span> <span class="s1">&#39;vendor/autoload.php&#39;</span><span class="p">;</span>
<span class="linenos" data-linenos=" 3 "></span>
<span class="linenos" data-linenos=" 4 "></span><span class="k">use</span> <span class="nx">Monolog\Logger</span><span class="p">;</span>
<span class="linenos" data-linenos=" 5 "></span><span class="k">use</span> <span class="nx">Monolog\Handler\StreamHandler</span><span class="p">;</span>
<span class="linenos" data-linenos=" 6 "></span>
<span class="linenos" data-linenos=" 7 "></span><span class="nv">$log</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Logger</span><span class="p">(</span><span class="s1">&#39;nom_aplicacio&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos=" 8 "></span><span class="nv">$log</span><span class="o">-&gt;</span><span class="na">pushHandler</span><span class="p">(</span><span class="k">new</span> <span class="nx">StreamHandler</span><span class="p">(</span><span class="s1">&#39;app.log&#39;</span><span class="p">,</span> <span class="nx">Logger</span><span class="o">::</span><span class="na">INFO</span><span class="p">));</span>
<span class="linenos" data-linenos=" 9 "></span><span class="nv">$log</span><span class="o">-&gt;</span><span class="na">pushHandler</span><span class="p">(</span><span class="k">new</span> <span class="nx">StreamHandler</span><span class="p">(</span><span class="s1">&#39;app.log&#39;</span><span class="p">,</span> <span class="nx">Logger</span><span class="o">::</span><span class="na">ERROR</span><span class="p">));</span>
<span class="linenos" data-linenos="10 "></span>
<span class="linenos" data-linenos="11 "></span><span class="c1">// Registra missatges d&#39;informació i d&#39;error</span>
<span class="linenos" data-linenos="12 "></span><span class="nv">$log</span><span class="o">-&gt;</span><span class="na">info</span><span class="p">(</span><span class="s1">&#39;Aquesta és una entrada d’informació&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos="13 "></span><span class="nv">$log</span><span class="o">-&gt;</span><span class="na">error</span><span class="p">(</span><span class="s1">&#39;Aquesta és una entrada d’error&#39;</span><span class="p">);</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">require</span> <span class="s1">&#39;vendor/autoload.php&#39;</span><span class="p">;</span>
<span class="linenos" data-linenos=" 3 "></span>
<span class="linenos" data-linenos=" 4 "></span><span class="k">use</span> <span class="nx">Monolog\Logger</span><span class="p">;</span>
<span class="linenos" data-linenos=" 5 "></span><span class="k">use</span> <span class="nx">Monolog\Handler\StreamHandler</span><span class="p">;</span>
<span class="linenos" data-linenos=" 6 "></span><span class="k">use</span> <span class="nx">Monolog\Handler\ErrorLogHandler</span><span class="p">;</span>
<span class="linenos" data-linenos=" 7 "></span>
<span class="linenos" data-linenos=" 8 "></span><span class="nv">$log</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Logger</span><span class="p">(</span><span class="s1">&#39;nom_aplicacio&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos=" 9 "></span><span class="nv">$log</span><span class="o">-&gt;</span><span class="na">pushHandler</span><span class="p">(</span><span class="k">new</span> <span class="nx">StreamHandler</span><span class="p">(</span><span class="s1">&#39;app.log&#39;</span><span class="p">,</span> <span class="nx">Logger</span><span class="o">::</span><span class="na">WARNING</span><span class="p">));</span>
<span class="linenos" data-linenos="10 "></span><span class="nv">$log</span><span class="o">-&gt;</span><span class="na">pushHandler</span><span class="p">(</span><span class="k">new</span> <span class="nx">ErrorLogHandler</span><span class="p">());</span>
<span class="linenos" data-linenos="11 "></span>
<span class="linenos" data-linenos="12 "></span><span class="c1">// Registra missatges d’error al fitxer i a la consola</span>
<span class="linenos" data-linenos="13 "></span><span class="nv">$log</span><span class="o">-&gt;</span><span class="na">error</span><span class="p">(</span><span class="s1">&#39;Aquesta és una entrada d’error&#39;</span><span class="p">);</span>
</code></pre></div>

</details>

<h4 id="exercici-12-documentacio">Exercici 12. Documentació<a class="headerlink" href="#exercici-12-documentacio" title="Permanent link">&para;</a></h4>
<ol>
<li>Documenta la classe <code>Producte</code> creada en l'exercici anterior utilitzant comentaris PHPDoc. Assegura't d'incloure la descripció de la classe, les propietats, i els mètodes.</li>
<li>Utilitza una eina com <code>phpDocumentor</code> per generar la documentació automàtica del codi PHP del projecte, incloent-hi la classe <code>Producte</code>.</li>
</ol>
<details>
<summary>Solució</summary>

<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">namespace</span> <span class="nx">App\Models</span><span class="p">;</span>
<span class="linenos" data-linenos=" 3 "></span>
<span class="linenos" data-linenos=" 4 "></span><span class="sd">/**</span>
<span class="linenos" data-linenos=" 5 "></span><span class="sd"> * Classe Producte</span>
<span class="linenos" data-linenos=" 6 "></span><span class="sd"> *</span>
<span class="linenos" data-linenos=" 7 "></span><span class="sd"> * Representa un producte amb un nom.</span>
<span class="linenos" data-linenos=" 8 "></span><span class="sd"> */</span>
<span class="linenos" data-linenos=" 9 "></span><span class="k">class</span> <span class="nc">Producte</span> <span class="p">{</span>
<span class="linenos" data-linenos="10 "></span>    <span class="sd">/**</span>
<span class="linenos" data-linenos="11 "></span><span class="sd">     * @var string El nom del producte</span>
<span class="linenos" data-linenos="12 "></span><span class="sd">     */</span>
<span class="linenos" data-linenos="13 "></span>    <span class="k">private</span> <span class="nv">$nom</span><span class="p">;</span>
<span class="linenos" data-linenos="14 "></span>
<span class="linenos" data-linenos="15 "></span>    <span class="sd">/**</span>
<span class="linenos" data-linenos="16 "></span><span class="sd">     * Constructor de la classe Producte</span>
<span class="linenos" data-linenos="17 "></span><span class="sd">     *</span>
<span class="linenos" data-linenos="18 "></span><span class="sd">     * @param string $nom El nom del producte</span>
<span class="linenos" data-linenos="19 "></span><span class="sd">     */</span>
<span class="linenos" data-linenos="20 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nv">$nom</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="21 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">nom</span> <span class="o">=</span> <span class="nv">$nom</span><span class="p">;</span>
<span class="linenos" data-linenos="22 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="23 "></span>
<span class="linenos" data-linenos="24 "></span>    <span class="sd">/**</span>
<span class="linenos" data-linenos="25 "></span><span class="sd">     * Obté el nom del producte</span>
<span class="linenos" data-linenos="26 "></span><span class="sd">     *</span>
<span class="linenos" data-linenos="27 "></span><span class="sd">     * @return string El nom del producte</span>
<span class="linenos" data-linenos="28 "></span><span class="sd">     */</span>
<span class="linenos" data-linenos="29 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">getNom</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos="30 "></span>        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">nom</span><span class="p">;</span>
<span class="linenos" data-linenos="31 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="32 "></span><span class="p">}</span>
</code></pre></div>

1. Instal·la phpDocumentor globalment o com a dependència de desenvolupament:

<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>composer<span class="w"> </span>require<span class="w"> </span>--dev<span class="w"> </span>phpdocumentor/phpdocumentor
</code></pre></div>

2. Genera la documentació:

<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>vendor/bin/phpdoc<span class="w"> </span>-d<span class="w"> </span>src<span class="w"> </span>-t<span class="w"> </span>docs
</code></pre></div>

Aquest comandament generarà la documentació a la carpeta docs.

</details>

<h4 id="exercici-13-generacio-de-pdfs-amb-dompdf">Exercici 13. Generació de PDFs amb DomPDF<a class="headerlink" href="#exercici-13-generacio-de-pdfs-amb-dompdf" title="Permanent link">&para;</a></h4>
<ol>
<li>Instal·la la llibreria <code>dompdf/dompdf</code> amb Composer. Crea un script PHP que genere un PDF senzill amb un títol i un paràgraf de text.</li>
<li>Crea un PDF utilitzant DomPDF que incloga una taula amb dades i una imatge. Assegura't que el PDF es renderitze correctament i que la imatge s'incloga en el document.</li>
</ol>
<details>
<summary>Solució</summary>

1. Instal·la DomPDF amb Composer:

<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>composer<span class="w"> </span>require<span class="w"> </span>dompdf/dompdf
</code></pre></div>

2. Crea un script PHP que generi un PDF senzill:

<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">require</span> <span class="s1">&#39;vendor/autoload.php&#39;</span><span class="p">;</span>
<span class="linenos" data-linenos=" 3 "></span>
<span class="linenos" data-linenos=" 4 "></span><span class="k">use</span> <span class="nx">Dompdf\Dompdf</span><span class="p">;</span>
<span class="linenos" data-linenos=" 5 "></span>
<span class="linenos" data-linenos=" 6 "></span><span class="nv">$dompdf</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Dompdf</span><span class="p">();</span>
<span class="linenos" data-linenos=" 7 "></span><span class="nv">$html</span> <span class="o">=</span> <span class="s1">&#39;&lt;h1&gt;Informe de Vendes&lt;/h1&gt;&lt;p&gt;Aquest és un informe de les vendes.&lt;/p&gt;&#39;</span><span class="p">;</span>
<span class="linenos" data-linenos=" 8 "></span>
<span class="linenos" data-linenos=" 9 "></span><span class="nv">$dompdf</span><span class="o">-&gt;</span><span class="na">loadHtml</span><span class="p">(</span><span class="nv">$html</span><span class="p">);</span>
<span class="linenos" data-linenos="10 "></span><span class="nv">$dompdf</span><span class="o">-&gt;</span><span class="na">setPaper</span><span class="p">(</span><span class="s1">&#39;A4&#39;</span><span class="p">,</span> <span class="s1">&#39;landscape&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos="11 "></span><span class="nv">$dompdf</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">();</span>
<span class="linenos" data-linenos="12 "></span><span class="nv">$dompdf</span><span class="o">-&gt;</span><span class="na">stream</span><span class="p">(</span><span class="s1">&#39;informe.pdf&#39;</span><span class="p">);</span>
</code></pre></div>

3. Crea un PDF amb una taula i una imatge:

<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">require</span> <span class="s1">&#39;vendor/autoload.php&#39;</span><span class="p">;</span>
<span class="linenos" data-linenos=" 3 "></span>
<span class="linenos" data-linenos=" 4 "></span><span class="k">use</span> <span class="nx">Dompdf\Dompdf</span><span class="p">;</span>
<span class="linenos" data-linenos=" 5 "></span>
<span class="linenos" data-linenos=" 6 "></span><span class="nv">$dompdf</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Dompdf</span><span class="p">();</span>
<span class="linenos" data-linenos=" 7 "></span><span class="nv">$html</span> <span class="o">=</span> <span class="s1">&#39;</span>
<span class="linenos" data-linenos=" 8 "></span><span class="s1">    &lt;h1&gt;Informe de Productes&lt;/h1&gt;</span>
<span class="linenos" data-linenos=" 9 "></span><span class="s1">    &lt;table border=&quot;1&quot; cellpadding=&quot;10&quot;&gt;</span>
<span class="linenos" data-linenos="10 "></span><span class="s1">        &lt;thead&gt;</span>
<span class="linenos" data-linenos="11 "></span><span class="s1">            &lt;tr&gt;</span>
<span class="linenos" data-linenos="12 "></span><span class="s1">                &lt;th&gt;Producte&lt;/th&gt;</span>
<span class="linenos" data-linenos="13 "></span><span class="s1">                &lt;th&gt;Preu&lt;/th&gt;</span>
<span class="linenos" data-linenos="14 "></span><span class="s1">            &lt;/tr&gt;</span>
<span class="linenos" data-linenos="15 "></span><span class="s1">        &lt;/thead&gt;</span>
<span class="linenos" data-linenos="16 "></span><span class="s1">        &lt;tbody&gt;</span>
<span class="linenos" data-linenos="17 "></span><span class="s1">            &lt;tr&gt;</span>
<span class="linenos" data-linenos="18 "></span><span class="s1">                &lt;td&gt;Ordinador&lt;/td&gt;</span>
<span class="linenos" data-linenos="19 "></span><span class="s1">                &lt;td&gt;500€&lt;/td&gt;</span>
<span class="linenos" data-linenos="20 "></span><span class="s1">            &lt;/tr&gt;</span>
<span class="linenos" data-linenos="21 "></span><span class="s1">            &lt;tr&gt;</span>
<span class="linenos" data-linenos="22 "></span><span class="s1">                &lt;td&gt;Teclat&lt;/td&gt;</span>
<span class="linenos" data-linenos="23 "></span><span class="s1">                &lt;td&gt;20€&lt;/td&gt;</span>
<span class="linenos" data-linenos="24 "></span><span class="s1">            &lt;/tr&gt;</span>
<span class="linenos" data-linenos="25 "></span><span class="s1">        &lt;/tbody&gt;</span>
<span class="linenos" data-linenos="26 "></span><span class="s1">    &lt;/table&gt;</span>
<span class="linenos" data-linenos="27 "></span><span class="s1">    &lt;img src=&quot;https://example.com/imatge.png&quot; alt=&quot;Imatge de Producte&quot; /&gt;</span>
<span class="linenos" data-linenos="28 "></span><span class="s1">&#39;</span><span class="p">;</span>
<span class="linenos" data-linenos="29 "></span>
<span class="linenos" data-linenos="30 "></span><span class="nv">$dompdf</span><span class="o">-&gt;</span><span class="na">loadHtml</span><span class="p">(</span><span class="nv">$html</span><span class="p">);</span>
<span class="linenos" data-linenos="31 "></span><span class="nv">$dompdf</span><span class="o">-&gt;</span><span class="na">setPaper</span><span class="p">(</span><span class="s1">&#39;A4&#39;</span><span class="p">,</span> <span class="s1">&#39;portrait&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos="32 "></span><span class="nv">$dompdf</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">();</span>
<span class="linenos" data-linenos="33 "></span><span class="nv">$dompdf</span><span class="o">-&gt;</span><span class="na">stream</span><span class="p">(</span><span class="s2">&quot;informe_productes.pdf&quot;</span><span class="p">);</span>
</code></pre></div>

</details>

<h2 id="exercicis-proposats">Exercicis proposats<a class="headerlink" href="#exercicis-proposats" title="Permanent link">&para;</a></h2>
<h4 id="exercici-1-creacio-de-la-classe-basica-i-gestio-de-propietats">Exercici 1. Creació de la Classe Bàsica i Gestió de Propietats<a class="headerlink" href="#exercici-1-creacio-de-la-classe-basica-i-gestio-de-propietats" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>Crea una classe <code>Persona</code> amb les propietats privades <code>nom</code>, <code>cognoms</code>, i <code>edat</code>. Encapsula aquestes propietats mitjançant getters i setters. Afig els següents mètodes:</p>
<ul>
<li><code>getNomComplet(): string</code> – Retorna el nom complet de la persona.</li>
<li><code>estaJubilat(): bool</code> – Retorna <code>true</code> si l'edat és major o igual a 65, <code>false</code> en cas contrari.</li>
</ul>
</li>
<li>
<p>Modifica la classe <code>Persona</code> afegint un constructor que assigna nom i cognoms. Si es proporciona un tercer paràmetre, assigna l'edat; en cas contrari, assigna una edat per defecte de 25 anys.</p>
</li>
<li>
<p>Modifica la classe <code>Persona</code> per utilitzar una constant <code>LIMITE_EDAT</code> amb el valor de 66 anys i utilitza-la en el mètode <code>estaJubilat</code>.</p>
</li>
</ul>
<h4 id="exercici-2-herencia-i-polimorfisme">Exercici 2. Herència i Polimorfisme<a class="headerlink" href="#exercici-2-herencia-i-polimorfisme" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>Crea una classe <code>Empleado</code> que herete de <code>Persona</code>. Afig les següents propietats i mètodes:</p>
<ul>
<li><code>private float $sou</code></li>
<li><code>private array $telefons</code></li>
<li><code>anyadirTelefono(int $telefon): void</code> – Afig un número de telèfon a l'array.</li>
<li><code>listarTelefonos(): string</code> – Retorna els números de telèfon separats per comes.</li>
<li><code>vaciarTelefonos(): void</code> – Buida l'array de telèfons.</li>
<li><code>debePagarImpuestos(): bool</code> – Retorna <code>true</code> si el sou és superior a 3333€, <code>false</code> en cas contrari.</li>
</ul>
</li>
<li>
<p>Afig un mètode estàtic <code>toHtml(Empleado $emp): string</code> que genere un codi HTML que mostre el nom complet de l'empleat dins d'un paràgraf i els seus telèfons dins d'una llista ordenada.</p>
</li>
<li>Afig un mètode estàtic <code>toHtml(Persona $p)</code> a la classe Persona que mostre el nom complet de la persona dins d'un paràgraf. Modifica el mètode <code>toHtml</code> de <code>Empleado</code> per rebre una <code>Persona</code> com a paràmetre i comprovar si es tracta d'un <code>Empleado</code> amb <code>instanceof</code>.</li>
<li>Transforma <code>Persona</code> en una classe abstracta. Redefineix el mètode estàtic <code>toHtml(Persona $p)</code> en totes les seues subclasses. </li>
</ul>
<h4 id="exercici-3-integracio-despais-de-noms-autoloading-i-composer">Exercici 3. Integració d'Espais de Noms, Autoloading, i Composer<a class="headerlink" href="#exercici-3-integracio-despais-de-noms-autoloading-i-composer" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>Crea una classe <code>Empresa</code> que incloga una propietat amb un array de <code>Empleados</code> . Implementa:</p>
<ul>
<li><code>public function addWorker(Empleado $t)</code></li>
<li><code>public function listWorkersHtml(): string</code> – Genera la llista de treballadors en format HTML.</li>
<li><code>public function getCosteNominas(): float</code> – Calcula el cost total de les nòmines.</li>
</ul>
</li>
<li>
<p>Configura el projecte PHP amb Composer que utilitze l'autoloading PSR-4.  </p>
</li>
</ul>
<h4 id="exercici-4-logger-i-documentacio">Exercici 4. Logger i Documentació<a class="headerlink" href="#exercici-4-logger-i-documentacio" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>Utilitza la llibreria <code>Monolog</code> per configurar un logger que escriga missatges a un fitxer <code>app.log</code>. Afig funcionalitat perquè el logger registre missatges d'informació i d'error en diferents arxius segons la gravetat.</p>
</li>
<li>
<p>Configura un logger que escriga missatges de registre tant a un fitxer com a la consola. Prova el logger registrant missatges d'error i advertència.</p>
</li>
<li>
<p>Documenta la classe <code>Empleado</code> creada en exercicis anteriors utilitzant comentaris PHPDoc. Inclou la descripció de la classe, les propietats, i els mètodes. Utilitza una eina com <code>phpDocumentor</code> per generar documentació automàtica.</p>
</li>
<li>
<p>Escriu proves unitàries per als mètodes de les classes <code>Persona</code>, <code>Empleado</code>, i <code>Empresa</code> utilitzant PHPUnit. Prova els mètodes <code>getNomComplet</code>, <code>estaJubilat</code>, <code>addWorker</code>, i <code>getCosteNominas</code>. Assegura't que les proves cobreixen diferents escenaris, incloent errors potencials.</p>
</li>
<li>
<p>Escriu una prova unitària que comprove que el logger està registrant correctament els missatges d'error a l'arxiu corresponent. Utilitza un mock per assegurar-te que el logger funciona sense necessitat d'escriure en un fitxer real durant la prova.</p>
</li>
</ul>
<h4 id="exercici-5-generacio-de-pdfs-amb-dompdf">Exercici 5. Generació de PDFs amb DomPDF<a class="headerlink" href="#exercici-5-generacio-de-pdfs-amb-dompdf" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>Instal·la la llibreria <code>dompdf/dompdf</code> amb Composer. Crea un script PHP que genere un PDF senzill amb un títol i un paràgraf de text.</p>
</li>
<li>
<p>Crea un PDF utilitzant DomPDF que incloga una taula amb dades i una imatge. Assegura't que el PDF es renderitze correctament i que la imatge s'incloga en el document.</p>
</li>
<li>
<p>Utilitzant la classe <code>Empresa</code> i <code>Empleado</code>, genera un informe en PDF amb la llista de treballadors i el seu sou. Utilitza DomPDF per generar aquest informe.</p>
</li>
</ul>
<h4 id="exercici-6-serialitzacio-i-json">Exercici 6. Serialització i JSON<a class="headerlink" href="#exercici-6-serialitzacio-i-json" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>Crea una interfície <code>JSerializable</code> que incloga els mètodes:</p>
<ul>
<li><code>toJSON(): string</code> – Converteix l'objecte a un JSON utilitzant <code>json_encode()</code>.</li>
<li><code>toSerialize(): string</code> – Serialitza l'objecte utilitzant <code>serialize()</code>.</li>
</ul>
</li>
<li>
<p>Modifica les classes <code>Persona</code>, <code>Empleado</code>, i <code>Empresa</code> per implementar aquesta interfície. Assegura't que les propietats privades es puguen serialitzar correctament.</p>
</li>
<li>
<p>Escriu mètodes per deserialitzar un objecte a partir d'una cadena JSON o d'una cadena serialitzada. Prova aquests mètodes amb PHPUnit per assegurar-te que la deserialització funciona correctament.</p>
</li>
</ul>
<h4 id="exercici-7-separacio-del-model-de-negoci-i-la-presentacio-mvc">Exercici 7. Separació del Model de Negoci i la Presentació (MVC)<a class="headerlink" href="#exercici-7-separacio-del-model-de-negoci-i-la-presentacio-mvc" title="Permanent link">&para;</a></h4>
<p>Fins ara, has creat diverses classes que gestionen la lògica del joc i les dades (models), com <code>Persona</code>, <code>Empleado</code>, i <code>Empresa</code>, i has generat sortides HTML i PDFs amb DomPDF. Ara és el moment de refactoritzar la teua aplicació per assegurar una separació clara entre la lògica del negoci i la presentació, seguint el patró Model-Vista-Controlador (MVC).</p>
<ul>
<li>
<p><strong>Crear el Model</strong>:</p>
<ul>
<li>Refactoritza les classes <code>Persona</code>, <code>Empleado</code>, i <code>Empresa</code> per assegurar que només gestionen la lògica de negoci (per exemple, càlcul de nòmines, gestió d'empleats, etc.).</li>
<li>Assegura't que aquestes classes no contenen codi relacionat amb la presentació (HTML o PDF).</li>
</ul>
</li>
<li>
<p><strong>Crear les Vistes</strong>:</p>
<ul>
<li>Crea vistes separades per presentar la informació als usuaris:<ul>
<li>Una vista HTML per mostrar la informació de <code>Empleado</code> i <code>Empresa</code> com a llistats.</li>
<li>Una vista PDF per generar informes amb DomPDF, basant-se en les dades proporcionades pel model.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Crear el Controlador</strong>:</p>
<ul>
<li>Implementa un controlador que reba les sol·licituds dels usuaris, interactue amb el model (<code>Persona</code>, <code>Empleado</code>, <code>Empresa</code>), i tria la vista adequada per mostrar els resultats (HTML o PDF).</li>
<li>El controlador ha d'encapsular tota la lògica necessària per a gestionar la interacció entre la vista i el model, assegurant que el model no estiga lligat a la capa de presentació.</li>
</ul>
</li>
</ul>
<h4 id="exercici-8-creacio-de-proves-unitaries-per-al-patro-mvc">Exercici 8. Creació de Proves Unitàries per al Patró MVC<a class="headerlink" href="#exercici-8-creacio-de-proves-unitaries-per-al-patro-mvc" title="Permanent link">&para;</a></h4>
<p>Després de refactoritzar l'aplicació per separar la lògica del negoci de la presentació seguint el patró Model-Vista-Controlador (MVC), és fonamental assegurar-se que tots els components funcionen correctament i que la interacció entre ells es realitza tal com s'espera. Per això, has de crear una sèrie de proves unitàries utilitzant PHPUnit per verificar el funcionament del model, les vistes i els controladors.</p>
<ul>
<li>
<p><strong>Proves del Model</strong>:</p>
<ul>
<li>Escriu proves unitàries per verificar el funcionament dels mètodes de les classes <code>Persona</code>, <code>Empleado</code>, i <code>Empresa</code>.</li>
<li>Assegura't que els mètodes funcionen correctament, com ara:<ul>
<li><code>getNomComplet()</code></li>
<li><code>debePagarImpuestos()</code></li>
<li><code>addWorker()</code> i <code>getCosteNominas()</code></li>
</ul>
</li>
<li>Prova que els càlculs es realitzen correctament i que les dades es gestionen segons el que s'espera.</li>
</ul>
</li>
<li>
<p><strong>Proves del Controlador</strong>:</p>
<ul>
<li>Escriu proves unitàries per assegurar-te que els controladors interactuen correctament amb els models i que seleccionen la vista adequada per a cada situació.</li>
<li>Prova que les dades es passen correctament del model a la vista a través del controlador.</li>
<li>Implementa proves per verificar que el controlador respon correctament a diferents sol·licituds de l'usuari, per exemple:<ul>
<li>Mostrar una llista d'empleats en HTML.</li>
<li>Generar un informe en PDF utilitzant DomPDF.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Proves de les Vistes</strong>:</p>
<ul>
<li>Escriu proves unitàries per comprovar que les vistes reben i mostren correctament la informació proporcionada pel controlador.</li>
<li>Prova que la generació de contingut HTML o PDF es realitza correctament a partir de les dades proporcionades pel model.</li>
</ul>
</li>
</ul>
<h2 id="14-enunciat-dels-projectes">14. Enunciat dels projectes<a class="headerlink" href="#14-enunciat-dels-projectes" title="Permanent link">&para;</a></h2>
<h3 id="projecte-4-en-ratlla">Projecte "4 en Ratlla"<a class="headerlink" href="#projecte-4-en-ratlla" title="Permanent link">&para;</a></h3>
<h4 id="1-crear-lentorn-del-4-en-ratlla">1. Crear l'entorn del 4 en ratlla<a class="headerlink" href="#1-crear-lentorn-del-4-en-ratlla" title="Permanent link">&para;</a></h4>
<ul>
<li>Dins de php crear les carpetes App,Views i Helpers.</li>
<li>Dins de la carpeta App crea les carpetes Models, Controllers , Services i Exceptions. </li>
<li>Dins de la carpeta src tindrem el index.php i el css.</li>
</ul>
<h4 id="2-integracio-de-composer-i-autoloading">2. Integració de Composer i Autoloading<a class="headerlink" href="#2-integracio-de-composer-i-autoloading" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>Configuració de Composer</strong>: Defineix un <code>composer.json</code> per al projecte, configurant l'autoloading PSR-4 per carregar automàticament les classes de <code>Joc4enRatlla</code>.</li>
<li><strong>Estructura del Projecte</strong>:<ul>
<li>Organitza el codi en directoris com <code>App/Models</code> per a les classes del joc i <code>App/Controllers</code> per a la gestió del flux del joc.</li>
<li>Configura Composer per gestionar les dependències del projecte.</li>
</ul>
</li>
</ul>
<h4 id="3-refactoritzacio-amb-programacio-orientada-a-objectes-poo-i-amb-mvc">3. Refactorització amb Programació Orientada a Objectes (POO) i amb MVC<a class="headerlink" href="#3-refactoritzacio-amb-programacio-orientada-a-objectes-poo-i-amb-mvc" title="Permanent link">&para;</a></h4>
<h5 id="models">Models<a class="headerlink" href="#models" title="Permanent link">&para;</a></h5>
<ul>
<li>
<p>Dins de la carpeta Models:</p>
</li>
<li>
<p><strong>Classe <code>Board</code></strong>: Crea una classe <code>Board</code> per representar la graella del joc. Aquesta classe ha de gestionar la configuració inicial de la graella, els moviments dels jugadors, i la comprovació de si hi ha un guanyador.</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="x">namespace Joc4enRatlla\Models;</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="x">class Board</span>
<span class="linenos" data-linenos=" 4 "></span><span class="x">{</span>
<span class="linenos" data-linenos=" 5 "></span><span class="x">    public const FILES = 6;</span>
<span class="linenos" data-linenos=" 6 "></span><span class="x">    public const COLUMNS = 7;</span>
<span class="linenos" data-linenos=" 7 "></span><span class="x">    public const DIRECTIONS = [</span>
<span class="linenos" data-linenos=" 8 "></span><span class="x">        [0, 1],   // Horizontal derecha</span>
<span class="linenos" data-linenos=" 9 "></span><span class="x">        [1, 0],   // Vertical abajo</span>
<span class="linenos" data-linenos="10 "></span><span class="x">        [1, 1],   // Diagonal abajo-derecha</span>
<span class="linenos" data-linenos="11 "></span><span class="x">        [1, -1]   // Diagonal abajo-izquierda</span>
<span class="linenos" data-linenos="12 "></span><span class="x">    ];</span>
<span class="linenos" data-linenos="13 "></span>
<span class="linenos" data-linenos="14 "></span><span class="x">    private array $slots; // graella</span>
<span class="linenos" data-linenos="15 "></span>
<span class="linenos" data-linenos="16 "></span><span class="x">    public function __construct(){</span>
<span class="linenos" data-linenos="17 "></span><span class="x">      // TODO: Ha d&#39;inicializar $slots</span>
<span class="linenos" data-linenos="18 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="19 "></span>
<span class="linenos" data-linenos="20 "></span><span class="x">    // TODO: Getters i Setters </span>
<span class="linenos" data-linenos="21 "></span>
<span class="linenos" data-linenos="22 "></span><span class="x">    private static function initializeBoard(): array{</span>
<span class="linenos" data-linenos="23 "></span><span class="x">        // TODO: Inicialitza la graella amb valors buits</span>
<span class="linenos" data-linenos="24 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="25 "></span><span class="x">    public function setMovementOnBoard(int $column, int $player): array {</span>
<span class="linenos" data-linenos="26 "></span><span class="x">        // TODO: Realitza un moviment en la graella</span>
<span class="linenos" data-linenos="27 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="28 "></span><span class="x">    public function checkWin(array $coord): bool {</span>
<span class="linenos" data-linenos="29 "></span><span class="x">        // TODO: Comprova si hi ha un guanyador</span>
<span class="linenos" data-linenos="30 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="31 "></span><span class="x">    public function isValidMove(int $column): bool {</span>
<span class="linenos" data-linenos="32 "></span><span class="x">        // TODO: Comprova si el moviment és vàlid</span>
<span class="linenos" data-linenos="33 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="34 "></span>
<span class="linenos" data-linenos="35 "></span><span class="x">    public function isFull(): bool {</span>
<span class="linenos" data-linenos="36 "></span><span class="x">        // TODO: El tauler està ple?</span>
<span class="linenos" data-linenos="37 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="38 "></span>
<span class="linenos" data-linenos="39 "></span>
<span class="linenos" data-linenos="40 "></span>
<span class="linenos" data-linenos="41 "></span><span class="x">}</span>
</code></pre></div>
<ul>
<li><strong>Classe  <code>Jugador</code></strong>: Crea una classe <code>Player</code> per representar els jugadors del joc, amb propietats com el <code>name</code>, el <code>color</code> de les fitxes, forma de jugar <code>isAutomatic</code>.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="x">namespace Joc4enRatlla\Models;</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span>
<span class="linenos" data-linenos=" 4 "></span><span class="x">class Player {</span>
<span class="linenos" data-linenos=" 5 "></span><span class="x">    private $name;      // Nom del jugador</span>
<span class="linenos" data-linenos=" 6 "></span><span class="x">    private $color;     // Color de les fitxes</span>
<span class="linenos" data-linenos=" 7 "></span><span class="x">    private $isAutomatic; // Forma de jugar (automàtica/manual)</span>
<span class="linenos" data-linenos=" 8 "></span>
<span class="linenos" data-linenos=" 9 "></span><span class="x">    public function __construct( $name, $color, $isAutomatic = false) {</span>
<span class="linenos" data-linenos="10 "></span><span class="x">        // TODO: Inicialitzar variables </span>
<span class="linenos" data-linenos="11 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="12 "></span>
<span class="linenos" data-linenos="13 "></span><span class="x">    // TODO: Getters i Setters </span>
<span class="linenos" data-linenos="14 "></span>
<span class="linenos" data-linenos="15 "></span><span class="x">}</span>
</code></pre></div>
<ul>
<li><strong>Classe <code>Game</code></strong>: Refactoritza la lògica del joc en una classe <code>Game</code> que gestione la graella, el torn del jugador, i la lògica per determinar el guanyador, la puntuació.</li>
</ul>
<p><div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="x">namespace Joc4enRatlla\Models;</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="x">use Joc4enRatlla\Models\Board;</span>
<span class="linenos" data-linenos=" 4 "></span><span class="x">use Joc4enRatlla\Models\Player;</span>
<span class="linenos" data-linenos=" 5 "></span>
<span class="linenos" data-linenos=" 6 "></span><span class="x">class Game</span>
<span class="linenos" data-linenos=" 7 "></span><span class="x">{</span>
<span class="linenos" data-linenos=" 8 "></span><span class="x">    private Board $board;</span>
<span class="linenos" data-linenos=" 9 "></span><span class="x">    private int $nextPlayer;</span>
<span class="linenos" data-linenos="10 "></span><span class="x">    private array $players;</span>
<span class="linenos" data-linenos="11 "></span><span class="x">    private ?Player $winner;</span>
<span class="linenos" data-linenos="12 "></span><span class="x">    private array $scores = [1 =&gt; 0, 2 =&gt; 0];</span>
<span class="linenos" data-linenos="13 "></span>
<span class="linenos" data-linenos="14 "></span><span class="x">    public function __construct( Player $jugador1, Player $jugador2){</span>
<span class="linenos" data-linenos="15 "></span><span class="x">        // TODO: S&#39;han d&#39;inicialitzar les variables tenint en compte que el array de jugador ha de començar amb l&#39;index 1 </span>
<span class="linenos" data-linenos="16 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="17 "></span>
<span class="linenos" data-linenos="18 "></span><span class="x">    // TODO: getters i setters</span>
<span class="linenos" data-linenos="19 "></span>
<span class="linenos" data-linenos="20 "></span><span class="x">    public function reset(): void{</span>
<span class="linenos" data-linenos="21 "></span><span class="x">        // TODO: Reinicia el joc</span>
<span class="linenos" data-linenos="22 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="23 "></span><span class="x">    public function play($columna){</span>
<span class="linenos" data-linenos="24 "></span><span class="x">        // TODO: Realitza un moviment</span>
<span class="linenos" data-linenos="25 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="26 "></span><span class="x">    /**</span>
<span class="linenos" data-linenos="27 "></span><span class="x">    * Realitza moviment automàtic</span>
<span class="linenos" data-linenos="28 "></span><span class="x">    * @return void</span>
<span class="linenos" data-linenos="29 "></span><span class="x">    */                                          </span>
<span class="linenos" data-linenos="30 "></span><span class="x">    public function playAutomatic(){</span>
<span class="linenos" data-linenos="31 "></span><span class="x">        $opponent = $this-&gt;nextPlayer === 1 ? 2 : 1;</span>
<span class="linenos" data-linenos="32 "></span>
<span class="linenos" data-linenos="33 "></span><span class="x">        for ($col = 1; $col &lt;= Board::COLUMNS; $col++) {</span>
<span class="linenos" data-linenos="34 "></span><span class="x">            if ($this-&gt;board-&gt;isValidMove($col)) {</span>
<span class="linenos" data-linenos="35 "></span><span class="x">                $tempBoard = clone($this-&gt;board);</span>
<span class="linenos" data-linenos="36 "></span><span class="x">                $coord = $tempBoard-&gt;setMovementOnBoard($col, $this-&gt;nextPlayer);</span>
<span class="linenos" data-linenos="37 "></span>
<span class="linenos" data-linenos="38 "></span><span class="x">                if ($tempBoard-&gt;checkWin($coord)) {</span>
<span class="linenos" data-linenos="39 "></span><span class="x">                    $this-&gt;play($col);</span>
<span class="linenos" data-linenos="40 "></span><span class="x">                    return;</span>
<span class="linenos" data-linenos="41 "></span><span class="x">                }</span>
<span class="linenos" data-linenos="42 "></span><span class="x">            }</span>
<span class="linenos" data-linenos="43 "></span><span class="x">        }</span>
<span class="linenos" data-linenos="44 "></span>
<span class="linenos" data-linenos="45 "></span><span class="x">        for ($col = 1; $col &lt;= Board::COLUMNS; $col++) {</span>
<span class="linenos" data-linenos="46 "></span><span class="x">            if ($this-&gt;board-&gt;isValidMove($col)) {</span>
<span class="linenos" data-linenos="47 "></span><span class="x">                $tempBoard = clone($this-&gt;board);</span>
<span class="linenos" data-linenos="48 "></span><span class="x">                $coord = $tempBoard-&gt;setMovementOnBoard($col, $opponent);</span>
<span class="linenos" data-linenos="49 "></span><span class="x">                if ($tempBoard-&gt;checkWin($coord )) {</span>
<span class="linenos" data-linenos="50 "></span><span class="x">                    $this-&gt;play($col);</span>
<span class="linenos" data-linenos="51 "></span><span class="x">                    return;</span>
<span class="linenos" data-linenos="52 "></span><span class="x">                }</span>
<span class="linenos" data-linenos="53 "></span><span class="x">            }</span>
<span class="linenos" data-linenos="54 "></span><span class="x">        }</span>
<span class="linenos" data-linenos="55 "></span>
<span class="linenos" data-linenos="56 "></span><span class="x">        $possibles = array();</span>
<span class="linenos" data-linenos="57 "></span><span class="x">        for ($col = 1; $col &lt;= Board::COLUMNS; $col++) {</span>
<span class="linenos" data-linenos="58 "></span><span class="x">            if ($this-&gt;board-&gt;isValidMove($col)) {</span>
<span class="linenos" data-linenos="59 "></span><span class="x">                $possibles[] = $col;</span>
<span class="linenos" data-linenos="60 "></span><span class="x">            }</span>
<span class="linenos" data-linenos="61 "></span><span class="x">        }</span>
<span class="linenos" data-linenos="62 "></span><span class="x">        if (count($possibles)&gt;2) {</span>
<span class="linenos" data-linenos="63 "></span><span class="x">            $random = rand(-1,1);</span>
<span class="linenos" data-linenos="64 "></span><span class="x">        }</span>
<span class="linenos" data-linenos="65 "></span><span class="x">        $middle = (int) (count($possibles) / 2)+$random;</span>
<span class="linenos" data-linenos="66 "></span><span class="x">        $inthemiddle = $possibles[$middle];</span>
<span class="linenos" data-linenos="67 "></span><span class="x">        $this-&gt;play($inthemiddle);</span>
<span class="linenos" data-linenos="68 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="69 "></span><span class="x">    public function save(){</span>
<span class="linenos" data-linenos="70 "></span><span class="x">        // TODO: Guarda l&#39;estat del joc a les sessions</span>
<span class="linenos" data-linenos="71 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="72 "></span><span class="x">    public static function restore(){</span>
<span class="linenos" data-linenos="73 "></span><span class="x">        // TODO: Restaura l&#39;estat del joc de les sessions</span>
<span class="linenos" data-linenos="74 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="75 "></span>
<span class="linenos" data-linenos="76 "></span><span class="x">}</span>
</code></pre></div>
  - <strong>Documentació</strong>:
    - Totes les classes i mètodes han d'estar documentats amb comentaris PHPDoc.</p>
<h5 id="controladors">Controladors<a class="headerlink" href="#controladors" title="Permanent link">&para;</a></h5>
<ul>
<li>
<p>Dins de la carpeta Controllers:</p>
<ul>
<li><strong>Classe <code>JocController</code></strong>: Crea un controlador <code>JocController</code> que gestione el  joc. Aquest controlador ha de permetre als jugadors realitzar moviments, comprovar l'estat del joc, i gestionar les vistes.</li>
</ul>
</li>
</ul>
<p>```php
  namespace Joc4enRatlla\Controllers;</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span>use Joc4enRatlla\Models\Player;
<span class="linenos" data-linenos=" 2 "></span>use Joc4enRatlla\Models\Game;
<span class="linenos" data-linenos=" 3 "></span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span>class GameController
<span class="linenos" data-linenos=" 6 "></span>{
<span class="linenos" data-linenos=" 7 "></span>private Game $game;
<span class="linenos" data-linenos=" 8 "></span>
<span class="linenos" data-linenos=" 9 "></span>// Request és l&#39;array $_POST
<span class="linenos" data-linenos="10 "></span>
<span class="linenos" data-linenos="11 "></span>public function __construct($request=null)
<span class="linenos" data-linenos="12 "></span>{
<span class="linenos" data-linenos="13 "></span>    // TODO: Inicialització del joc.Ha d&#39;inicializar el Game si és la primera vegada o agafar les dades de la sessió si ja ha estat inicialitzada
<span class="linenos" data-linenos="14 "></span>
<span class="linenos" data-linenos="15 "></span>    $this-&gt;play($request);
<span class="linenos" data-linenos="16 "></span>
<span class="linenos" data-linenos="17 "></span>}
<span class="linenos" data-linenos="18 "></span>
<span class="linenos" data-linenos="19 "></span>public function play(Array $request)  
<span class="linenos" data-linenos="20 "></span>{
<span class="linenos" data-linenos="21 "></span>    // TODO : Gestió del joc. Ací es on s&#39;ha de vore si hi ha guanyador, si el que juga es automàtic  o manual, s&#39;ha polsat reiniciar...
<span class="linenos" data-linenos="22 "></span>
<span class="linenos" data-linenos="23 "></span>
<span class="linenos" data-linenos="24 "></span>
<span class="linenos" data-linenos="25 "></span>    $board = $this-&gt;game-&gt;getBoard();
<span class="linenos" data-linenos="26 "></span>    $players = $this-&gt;game-&gt;getPlayers();
<span class="linenos" data-linenos="27 "></span>    $winner = $this-&gt;game-&gt;getWinner();
<span class="linenos" data-linenos="28 "></span>    $scores = $this-&gt;game-&gt;getScores();
<span class="linenos" data-linenos="29 "></span>
<span class="linenos" data-linenos="30 "></span>    loadView(&#39;index&#39;,compact(&#39;board&#39;,&#39;players&#39;,&#39;winner&#39;,&#39;scores&#39;));
<span class="linenos" data-linenos="31 "></span> }
</code></pre></div>
<p>}
```
</p>
<h5 id="serveis-i-funcions">Serveis i funcions<a class="headerlink" href="#serveis-i-funcions" title="Permanent link">&para;</a></h5>
<ul>
<li>Dins de la carpeta Services:
<ul>
<li><strong>Funció <code>loadView</code></strong>: Crea una funció <code>loadView</code> que carregue les vistes del joc. Aquesta funció ha de rebre el nom de la vista i les dades a passar a la vista, i ha de mostrar la vista amb les dades proporcionades.

<code>php
&lt;?php

namespace Joc4enRatlla\Services;

class Service
{
public static function loadView($view, $data = [])
{
    $viewPath = str_replace('.', '/', $view);
    extract($data);

    include  $_SERVER['DOCUMENT_ROOT'] . "/../Views/$viewPath.view.php";

}
}</code></li>
</ul>
</li>
</ul>
<p>i la funció <code>loadView</code> en un fitxer de funcions</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="x">  function loadView($view, $data = [])</span>
<span class="linenos" data-linenos=" 2 "></span><span class="x">    {</span>
<span class="linenos" data-linenos=" 3 "></span><span class="x">       Joc4enRatlla\Services\Service::loadView($view, $data);</span>
<span class="linenos" data-linenos=" 4 "></span><span class="x">    }</span>
<span class="linenos" data-linenos=" 5 "></span>
<span class="linenos" data-linenos=" 6 "></span><span class="x">    function dd(...$data )</span>
<span class="linenos" data-linenos=" 7 "></span><span class="x">    {</span>
<span class="linenos" data-linenos=" 8 "></span><span class="x">        echo &quot;&lt;pre&gt;&quot;;</span>
<span class="linenos" data-linenos=" 9 "></span><span class="x">        foreach ($data as $d) {</span>
<span class="linenos" data-linenos="10 "></span><span class="x">            var_dump($d);</span>
<span class="linenos" data-linenos="11 "></span><span class="x">        }</span>
<span class="linenos" data-linenos="12 "></span>
<span class="linenos" data-linenos="13 "></span><span class="x">        echo &quot;&lt;/pre&gt;&quot;;</span>
<span class="linenos" data-linenos="14 "></span><span class="x">        die();</span>
<span class="linenos" data-linenos="15 "></span><span class="x">    }</span>
</code></pre></div>
<h5 id="vistes">Vistes<a class="headerlink" href="#vistes" title="Permanent link">&para;</a></h5>
<ul>
<li>
<p>Dins de la carpeta Views:</p>
<ul>
<li><strong>Vista <code>index.php</code></strong>: Crea una vista <code>index.php</code> que mostre la graella del joc, el torn actual del jugador, i els resultats finals (guanyador o empat). Aquesta vista ha de permetre als jugadors realitzar moviments en la graella.</li>
</ul>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="x">&lt;html&gt;</span>
<span class="linenos" data-linenos=" 2 "></span><span class="x">&lt;head&gt;</span>
<span class="linenos" data-linenos=" 3 "></span><span class="x">    &lt;link rel=&quot;stylesheet&quot; href=&quot;4ratlla.css?v=</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">time</span><span class="p">();</span> <span class="cp">?&gt;</span><span class="x">&quot;&gt;</span>
<span class="linenos" data-linenos=" 4 "></span><span class="x">    &lt;title&gt;4 en ratlla&lt;/title&gt;</span>
<span class="linenos" data-linenos=" 5 "></span><span class="x">    &lt;style&gt;</span>
<span class="linenos" data-linenos=" 6 "></span><span class="x">        .player1 {</span>
<span class="linenos" data-linenos=" 7 "></span><span class="x">            background-color: </span><span class="cp">&lt;?</span><span class="o">=</span> <span class="nv">$players</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">getColor</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="x"> ; /* Color   per un dels jugadors */</span>
<span class="linenos" data-linenos=" 8 "></span><span class="x">        }</span>
<span class="linenos" data-linenos=" 9 "></span>
<span class="linenos" data-linenos="10 "></span><span class="x">        .player2 {</span>
<span class="linenos" data-linenos="11 "></span><span class="x">            background-color:  </span><span class="cp">&lt;?</span><span class="o">=</span> <span class="nv">$players</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">getColor</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="x">; /* Color   per l&#39;altre jugador */</span>
<span class="linenos" data-linenos="12 "></span><span class="x">        }</span>
<span class="linenos" data-linenos="13 "></span>
<span class="linenos" data-linenos="14 "></span><span class="x">    &lt;/style&gt;</span>
<span class="linenos" data-linenos="15 "></span><span class="x">&lt;/head&gt;</span>
<span class="linenos" data-linenos="16 "></span><span class="x">&lt;body&gt;</span>
<span class="linenos" data-linenos="17 "></span><span class="cp">&lt;?php</span> <span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;DOCUMENT_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/../Views/partials/error.view.php&#39;</span>  <span class="cp">?&gt;</span>
<span class="linenos" data-linenos="18 "></span><span class="x"> &lt;form action=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">htmlspecialchars</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s2">&quot;PHP_SELF&quot;</span><span class="p">]);</span> <span class="cp">?&gt;</span><span class="x">&quot; method=&quot;post&quot;&gt;</span>
<span class="linenos" data-linenos="19 "></span><span class="x">    </span><span class="cp">&lt;?php</span> <span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;DOCUMENT_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/../Views/partials/board.view.php&#39;</span>  <span class="cp">?&gt;</span>
<span class="linenos" data-linenos="20 "></span><span class="x">     &lt;input type=&quot;submit&quot; name=&quot;reset&quot; value=&quot;Reiniciar joc&quot;&gt;</span>
<span class="linenos" data-linenos="21 "></span><span class="x">     &lt;input type=&quot;submit&quot; name=&quot;exit&quot; value=&quot;Acabar joc&quot;&gt;</span>
<span class="linenos" data-linenos="22 "></span><span class="x">&lt;/form&gt;</span>
<span class="linenos" data-linenos="23 "></span><span class="x"> </span><span class="cp">&lt;?php</span> <span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;DOCUMENT_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/../Views/partials/panel.view.php&#39;</span>  <span class="cp">?&gt;</span>
<span class="linenos" data-linenos="24 "></span><span class="x">&lt;/body&gt;</span>
<span class="linenos" data-linenos="25 "></span><span class="x">&lt;/html&gt;</span>
</code></pre></div>
<p>board.view.php</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="x">&lt;div class=&quot;board&quot;&gt;</span>
<span class="linenos" data-linenos=" 2 "></span><span class="x">    &lt;table&gt;</span>
<span class="linenos" data-linenos=" 3 "></span><span class="x">     &lt;tr&gt;</span>
<span class="linenos" data-linenos=" 4 "></span><span class="x">       </span><span class="cp">&lt;?php</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$winner</span> <span class="p">)</span><span class="o">:</span>
<span class="linenos" data-linenos=" 5 "></span>        <span class="k">for</span> <span class="p">(</span><span class="nv">$j</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="nv">$j</span><span class="o">&lt;=</span> <span class="nv">$board</span><span class="o">::</span><span class="na">COLUMNS</span> <span class="p">;</span><span class="nv">$j</span><span class="o">++</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
<span class="linenos" data-linenos=" 6 "></span><span class="x">         &lt;td&gt;&lt;input type=&#39;submit&#39; name=&#39;columna&#39; value=&#39;</span><span class="cp">&lt;?</span><span class="o">=</span><span class="nv">$j</span> <span class="cp">?&gt;</span><span class="x">&#39; /&gt;&lt;/td&gt;&quot;;</span>
<span class="linenos" data-linenos=" 7 "></span><span class="x">      </span><span class="cp">&lt;?php</span> <span class="k">endfor</span> <span class="p">;</span> <span class="k">else</span><span class="o">:</span> <span class="cp">?&gt;</span>
<span class="linenos" data-linenos=" 8 "></span><span class="x">        &lt;h1&gt;El guanyador es el jugador </span><span class="cp">&lt;?</span><span class="o">=</span>  <span class="nv">$winner</span> <span class="o">-&gt;</span><span class="na">getName</span><span class="p">()</span> <span class="cp">?&gt;</span><span class="x">&lt;/h1&gt;</span>
<span class="linenos" data-linenos=" 9 "></span><span class="x">      </span><span class="cp">&lt;?php</span> <span class="k">endif</span> <span class="cp">?&gt;</span>
<span class="linenos" data-linenos="10 "></span><span class="x">     &lt;/tr&gt;</span>
<span class="linenos" data-linenos="11 "></span><span class="x">      </span><span class="cp">&lt;?php</span> <span class="k">for</span> <span class="p">(</span><span class="nv">$i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="nv">$i</span><span class="o">&lt;=</span> <span class="nv">$board</span><span class="o">::</span><span class="na">FILES</span> <span class="p">;</span><span class="nv">$i</span><span class="o">++</span><span class="p">)</span><span class="o">:</span>  <span class="cp">?&gt;</span>
<span class="linenos" data-linenos="12 "></span><span class="x">          &lt;tr&gt;</span>
<span class="linenos" data-linenos="13 "></span><span class="x">         </span><span class="cp">&lt;?php</span> <span class="k">for</span> <span class="p">(</span><span class="nv">$j</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="nv">$j</span><span class="o">&lt;=</span> <span class="nv">$board</span><span class="o">::</span><span class="na">COLUMNS</span> <span class="p">;</span><span class="nv">$j</span><span class="o">++</span><span class="p">)</span><span class="o">:</span>  <span class="cp">?&gt;</span>
<span class="linenos" data-linenos="14 "></span><span class="x">             </span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="k">match</span> <span class="p">(</span><span class="nv">$board</span><span class="o">-&gt;</span><span class="na">getSlots</span><span class="p">()[</span><span class="nv">$i</span><span class="p">][</span><span class="nv">$j</span><span class="p">]){</span>
<span class="linenos" data-linenos="15 "></span>                <span class="mi">0</span> <span class="o">=&gt;</span> <span class="s1">&#39;&lt;td class=&quot;buid&quot;&gt;&lt;/td&gt;&#39;</span><span class="p">,</span>
<span class="linenos" data-linenos="16 "></span>                <span class="mi">1</span> <span class="o">=&gt;</span> <span class="s1">&#39;&lt;td class=&quot;player1&quot;&gt;&lt;/td&gt;&#39;</span><span class="p">,</span>
<span class="linenos" data-linenos="17 "></span>                <span class="mi">2</span> <span class="o">=&gt;</span> <span class="s1">&#39;&lt;td class=&quot;player2&quot;&gt;&lt;/td&gt;&#39;</span><span class="p">};</span>
<span class="linenos" data-linenos="18 "></span>                <span class="k">endfor</span> <span class="p">;</span>
<span class="linenos" data-linenos="19 "></span>            <span class="k">endfor</span>   <span class="cp">?&gt;</span>
<span class="linenos" data-linenos="20 "></span><span class="x">         &lt;/tr&gt;</span>
<span class="linenos" data-linenos="21 "></span><span class="x">    &lt;/table&gt;</span>
<span class="linenos" data-linenos="22 "></span><span class="x">&lt;/div&gt;</span>
</code></pre></div>
<h5 id="spa">SPA<a class="headerlink" href="#spa" title="Permanent link">&para;</a></h5>
<p>Creen la pàgina index.php que carregarà el joc 4 en ratlla.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="nb">session_start</span><span class="p">();</span>
<span class="linenos" data-linenos=" 3 "></span><span class="k">require_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;DOCUMENT_ROOT&#39;</span><span class="p">]</span> <span class="o">.</span> <span class="s1">&#39;/../vendor/autoload.php&#39;</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span><span class="k">require_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;DOCUMENT_ROOT&#39;</span><span class="p">]</span> <span class="o">.</span> <span class="s1">&#39;/../Helpers/functions.php&#39;</span><span class="p">;</span>
<span class="linenos" data-linenos=" 5 "></span><span class="k">use</span> <span class="nx">Joc4enRatlla\Controllers\GameController</span><span class="p">;</span>
<span class="linenos" data-linenos=" 6 "></span>
<span class="linenos" data-linenos=" 7 "></span><span class="k">if</span> <span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;REQUEST_METHOD&#39;</span><span class="p">]</span> <span class="o">===</span> <span class="s1">&#39;POST&#39;</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 8 "></span>    <span class="nv">$gameController</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GameController</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">);</span> 
<span class="linenos" data-linenos=" 9 "></span><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="linenos" data-linenos="10 "></span>    <span class="nx">loadView</span><span class="p">(</span><span class="s1">&#39;jugador&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos="11 "></span><span class="p">}</span>
</code></pre></div>
<h4 id="4-proves-amb-phpunit">4. Proves amb PHPUnit<a class="headerlink" href="#4-proves-amb-phpunit" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>Escriu Proves Unitàries</strong>: Crea proves unitàries per a la classe <code>Joc4enRatlla</code> utilitzant PHPUnit. Les proves poden incloure:<ul>
<li>Verificació de la configuració inicial de la graella.</li>
<li>Proves per assegurar que un moviment s'aplica correctament a la graella.</li>
<li>Proves per assegurar que el joc detecta correctament un guanyador o un empat.</li>
</ul>
</li>
<li><strong>Proves de Gestió de Sessions</strong>: Afig proves per assegurar que l'estat del joc i el torn del jugador es mantenen correctament a través de les sessions.</li>
</ul>
<h4 id="5-logger-amb-monolog_1">5. Logger amb Monolog<a class="headerlink" href="#5-logger-amb-monolog_1" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>Configuració de Logger</strong>: Utilitza <code>Monolog</code> per registrar esdeveniments importants del joc, com quan un jugador fa un moviment, quan s'inicia una nova partida, o quan es produeixen errors.</li>
<li><strong>Diversos Handlers</strong>:<ul>
<li>Registra els moviments dels jugadors i els resultats del joc en un fitxer <code>game.log</code>.</li>
<li>Registra errors greus o problemes amb les sessions en un fitxer d'errors separat.</li>
</ul>
</li>
</ul>
<h3 id="consideracions-addicionals-pel-projecte">Consideracions Addicionals pel  Projecte<a class="headerlink" href="#consideracions-addicionals-pel-projecte" title="Permanent link">&para;</a></h3>
<h4 id="1-documentacio-amb-phpdoc">1. Documentació amb PHPDoc<a class="headerlink" href="#1-documentacio-amb-phpdoc" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>Documentació Completa</strong>: Documenta totes les classes i mètodes amb comentaris PHPDoc. Això inclou les descripcions dels paràmetres i els valors de retorn per a cada mètode.</li>
<li><strong>Generació Automàtica</strong>: Utilitza <code>phpDocumentor</code> o una eina similar per generar la documentació automàticament. Afig la documentació generada al projecte per facilitar el manteniment i la comprensió del codi.</li>
</ul>
<h4 id="2-implementacio-dinterficies">2. Implementació d'Interfícies<a class="headerlink" href="#2-implementacio-dinterficies" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>Interfície <code>JocInterface</code></strong>: Crea una interfície que definisca els mètodes bàsics que qualsevol joc  ha de tindre (<code>iniciarJoc</code>, <code>ferMoviment</code>, <code>comprovaGuanyador</code>, etc.). Assegura't que la  <code>Joc4enRatlla</code> implemente  aquesta interfície.</li>
</ul>
<h4 id="3-serialitzacio-i-persistencia">3. Serialització i Persistència<a class="headerlink" href="#3-serialitzacio-i-persistencia" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>Serialització de l'Estat del Joc</strong>: Implementa funcionalitats per serialitzar l'estat del joc (usant JSON o <code>serialize()</code>) i deserialitzar-lo per mantenir la persistència entre sessions o guardar l'estat per a reprendre la partida posteriorment.</li>
</ul>
<h4 id="4-exempcions">4. Exempcions<a class="headerlink" href="#4-exempcions" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>Gestió d'Excepcions</strong>: Utilitza excepcions per gestionar el que un jugador jugue una columna que ja estiga plena. Afig el missatge  d'error al jocs.</li>
</ul>
<h4 id="5-fes-que-el-jugador-puga-triar-nom-i-color">5. Fes que el jugador puga triar nom i color<a class="headerlink" href="#5-fes-que-el-jugador-puga-triar-nom-i-color" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>Triar Nom i Color</strong>: Permet als jugadors triar el seu nom i el color de les fitxes al començar una partida. Aquesta informació ha de ser guardada en les sessions i mostrada en la vista del joc.</li>
</ul>
<h4 id="rubrica-de-lavaluacio">Rúbrica de l'Avaluació<a class="headerlink" href="#rubrica-de-lavaluacio" title="Permanent link">&para;</a></h4>
<h5 id="funcionalitat-del-joc">Funcionalitat del Joc<a class="headerlink" href="#funcionalitat-del-joc" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Punts</th>
<th>Descripció</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>El joc no és funcional o està incomplet.</td>
</tr>
<tr>
<td>1</td>
<td>El joc és funcional, però conté errors significatius.</td>
</tr>
<tr>
<td>2</td>
<td>El joc està majoritàriament funcional amb errors mínims.</td>
</tr>
<tr>
<td>3</td>
<td>El joc està completament funcional i sense errors.</td>
</tr>
</tbody>
</table>
<h5 id="implementacio-de-programacio-orientada-a-objectes-poo">Implementació de Programació Orientada a Objectes (POO)<a class="headerlink" href="#implementacio-de-programacio-orientada-a-objectes-poo" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Punts</th>
<th>Descripció</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>No s'han utilitzat classes o s'ha fet de forma poc coherent.</td>
</tr>
<tr>
<td>1</td>
<td>Tots els models tenen la seua classe i és operativa.</td>
</tr>
<tr>
<td>2</td>
<td>L'aplicatiu funciona amb classes.</td>
</tr>
</tbody>
</table>
<h5 id="separacio-del-model-de-negoci-de-la-presentacio-mvc">Separació del Model de Negoci de la Presentació (MVC)<a class="headerlink" href="#separacio-del-model-de-negoci-de-la-presentacio-mvc" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Punts</th>
<th>Descripció</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>No s'ha implementat la separació de model i presentació; el codi de lògica i presentació està mesclat.</td>
</tr>
<tr>
<td>1</td>
<td>Hi ha una separació parcial, però algunes parts de la lògica del negoci es barregen amb la presentació o a l'inrevés.</td>
</tr>
<tr>
<td>2</td>
<td>La separació entre model, vista i controlador està ben implementada, però podria millorar en alguns aspectes.</td>
</tr>
<tr>
<td>3</td>
<td>Excel·lent separació entre el model, vista i controlador, seguint els principis del patró MVC i mantenint un codi net.</td>
</tr>
</tbody>
</table>
<h5 id="integracio-de-composer-i-autoloading">Integració de Composer i Autoloading<a class="headerlink" href="#integracio-de-composer-i-autoloading" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Punts</th>
<th>Descripció</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>No.</td>
</tr>
<tr>
<td>1</td>
<td>Sí.</td>
</tr>
</tbody>
</table>
<h5 id="implementacio-de-proves-amb-phpunit">Implementació de Proves amb PHPUnit<a class="headerlink" href="#implementacio-de-proves-amb-phpunit" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Punts</th>
<th>Descripció</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>No s'han creat proves, o les proves creades són mínimes i no adequades per a verificar la funcionalitat.</td>
</tr>
<tr>
<td>1</td>
<td>Es presenten proves bàsiques amb PHPUnit, però cobreixen parcialment les funcionalitats requerides.</td>
</tr>
<tr>
<td>2</td>
<td>Proves unitàries completes que cobreixen la majoria dels casos, incloent proves de gestió de sessions i lògica de joc.</td>
</tr>
<tr>
<td>3</td>
<td>Proves exhaustives que cobreixen totes les funcionalitats i consideren casos límit, amb ús de mocks quan necessari.</td>
</tr>
</tbody>
</table>
<h5 id="us-de-logger-amb-monolog">Ús de Logger amb Monolog<a class="headerlink" href="#us-de-logger-amb-monolog" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Punts</th>
<th>Descripció</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>No s'ha implementat el logger o no s'utilitza de manera efectiva per registrar esdeveniments importants.</td>
</tr>
<tr>
<td>1</td>
<td>Logger implementat, però amb ús limitat o incorrecte en la registració d'esdeveniments i errors.</td>
</tr>
<tr>
<td>2</td>
<td>Logger ben implementat, amb esdeveniments i errors registrats adequadament en diferents fitxers o canals.</td>
</tr>
</tbody>
</table>
<h5 id="documentacio-amb-phpdoc">Documentació amb PHPDoc<a class="headerlink" href="#documentacio-amb-phpdoc" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Punts</th>
<th>Descripció</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Falta documentació o és insuficient per comprendre les classes i mètodes del projecte.</td>
</tr>
<tr>
<td>1</td>
<td>Documentació bàsica amb PHPDoc, però amb omisions o descripcions poc clares.</td>
</tr>
<tr>
<td>2</td>
<td>Documentació completa amb PHPDoc per a totes les classes i mètodes, amb descripcions clares i detallades.</td>
</tr>
</tbody>
</table>
<h5 id="exempcions">Exempcions<a class="headerlink" href="#exempcions" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Punts</th>
<th>Descripció</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>No hi ha.</td>
</tr>
<tr>
<td>1</td>
<td>Si hi ha però no es mostra missatge d'error.</td>
</tr>
<tr>
<td>2</td>
<td>Es tracta perfectament i hi ha missatge d'error.</td>
</tr>
</tbody>
</table>
<h5 id="interficie">Interfície<a class="headerlink" href="#interficie" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Punts</th>
<th>Descripció</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>No hi ha.</td>
</tr>
<tr>
<td>1</td>
<td>Implementada.</td>
</tr>
</tbody>
</table>
<h5 id="eleccio-color-jugador-i-panell-de-resultats">Elecció color Jugador i panell de resultats<a class="headerlink" href="#eleccio-color-jugador-i-panell-de-resultats" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Punts</th>
<th>Descripció</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>No.</td>
</tr>
<tr>
<td>1</td>
<td>Un dels dos.</td>
</tr>
<tr>
<td>2</td>
<td>Els dos.</td>
</tr>
</tbody>
</table>
<h5 id="qualitat-del-codi-i-bones-practiques">Qualitat del Codi i Bones Pràctiques<a class="headerlink" href="#qualitat-del-codi-i-bones-practiques" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Punts</th>
<th>Descripció</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Codi desordenat i sense comentaris.</td>
</tr>
<tr>
<td>1</td>
<td>Codi desorganitzat, amb molts errors de sintaxi, mala nomenclatura, o sense bones pràctiques de codi.</td>
</tr>
<tr>
<td>2</td>
<td>Codi ben escrit, seguint les convencions de nomenclatura i bones pràctiques de desenvolupament.</td>
</tr>
</tbody>
</table>
<h5 id="innovacio-i-creativitat">Innovació i Creativitat<a class="headerlink" href="#innovacio-i-creativitat" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Punts</th>
<th>Descripció</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Cap creativitat o innovació en el projecte.</td>
</tr>
<tr>
<td>1</td>
<td>Algunes idees creatives han estat implementades.</td>
</tr>
<tr>
<td>2</td>
<td>El projecte mostra innovació significativa.</td>
</tr>
</tbody>
</table>
<h2 id="15-autoavaluacio-programacio-orientada-a-objectes-en-php">15. Autoavaluació: Programació Orientada a Objectes en PHP<a class="headerlink" href="#15-autoavaluacio-programacio-orientada-a-objectes-en-php" title="Permanent link">&para;</a></h2>
<h4 id="exercici-1-constructors-en-php">Exercici 1: Constructors en PHP<a class="headerlink" href="#exercici-1-constructors-en-php" title="Permanent link">&para;</a></h4>
<h5 id="pregunta">Pregunta:<a class="headerlink" href="#pregunta" title="Permanent link">&para;</a></h5>
<p>Quina és la funció principal d'un constructor en una classe PHP?</p>
<h5 id="opcions">Opcions:<a class="headerlink" href="#opcions" title="Permanent link">&para;</a></h5>
<form>
  <input type="radio" id="q1a" name="question1" value="a">
  <label for="q1a">a) Destruir els objectes de la classe quan ja no són necessaris.</label><br>
  <input type="radio" id="q1b" name="question1" value="b">
  <label for="q1b">b) Inicialitzar les propietats de l'objecte quan es crea.</label><br>
  <input type="radio" id="q1c" name="question1" value="c">
  <label for="q1c">c) Executar una funció arbitrària abans de cada mètode.</label><br>
  <input type="radio" id="q1d" name="question1" value="d">
  <label for="q1d">d) Crear mètodes màgics automàticament.</label><br><br>
  <input type="button" value="Comprovar" onclick="checkAnswer1()">
</form>

<p id="result1"></p>

<script>
function checkAnswer1() {
    var correctAnswer = "b";
    var radios = document.getElementsByName('question1');
    var userAnswer;
    for (var i = 0; i < radios.length; i++) {
        if (radios[i].checked) {
            userAnswer = radios[i].value;
            break;
        }
    }
    var resultText = userAnswer === correctAnswer ? "Correcte!" : "Incorrecte. La resposta correcta és b) Inicialitzar les propietats de l'objecte quan es crea.";
    document.getElementById('result1').innerText = resultText;
}
</script>

<h4 id="exercici-2-herencia-en-php">Exercici 2: Herència en PHP<a class="headerlink" href="#exercici-2-herencia-en-php" title="Permanent link">&para;</a></h4>
<h5 id="pregunta_1">Pregunta:<a class="headerlink" href="#pregunta_1" title="Permanent link">&para;</a></h5>
<p>Quina és l'avantatge principal de l'herència en la programació orientada a objectes?</p>
<h5 id="opcions_1">Opcions:<a class="headerlink" href="#opcions_1" title="Permanent link">&para;</a></h5>
<form>
  <input type="radio" id="q2a" name="question2" value="a">
  <label for="q2a">a) Permet reutilitzar codi definint classes noves basades en classes existents.</label><br>
  <input type="radio" id="q2b" name="question2" value="b">
  <label for="q2b">b) Permet ocultar totes les propietats i mètodes de la classe.</label><br>
  <input type="radio" id="q2c" name="question2" value="c">
  <label for="q2c">c) Permet definir funcions globals sense necessitat de classes.</label><br>
  <input type="radio" id="q2d" name="question2" value="d">
  <label for="q2d">d) Permet cridar a funcions de JavaScript des de PHP.</label><br><br>
  <input type="button" value="Comprovar" onclick="checkAnswer2()">
</form>

<p id="result2"></p>

<script>
function checkAnswer2() {
    var correctAnswer = "a";
    var radios = document.getElementsByName('question2');
    var userAnswer;
    for (var i = 0; i < radios.length; i++) {
        if (radios[i].checked) {
            userAnswer = radios[i].value;
            break;
        }
    }
    var resultText = userAnswer === correctAnswer ? "Correcte!" : "Incorrecte. La resposta correcta és a) Permet reutilitzar codi definint classes noves basades en classes existents.";
    document.getElementById('result2').innerText = resultText;
}
</script>

<h4 id="exercici-3-polimorfisme">Exercici 3: Polimorfisme<a class="headerlink" href="#exercici-3-polimorfisme" title="Permanent link">&para;</a></h4>
<h5 id="pregunta_2">Pregunta:<a class="headerlink" href="#pregunta_2" title="Permanent link">&para;</a></h5>
<p>Què permet el polimorfisme en el context de la POO?</p>
<h5 id="opcions_2">Opcions:<a class="headerlink" href="#opcions_2" title="Permanent link">&para;</a></h5>
<form>
  <input type="radio" id="q3a" name="question3" value="a">
  <label for="q3a">a) Permet que una funció tinga múltiples implementacions depenent de l'objecte que la cride.</label><br>
  <input type="radio" id="q3b" name="question3" value="b">
  <label for="q3b">b) Permet la creació d'objectes a partir de funcions anònimes.</label><br>
  <input type="radio" id="q3c" name="question3" value="c">
  <label for="q3c">c) Permet la connexió entre PHP i bases de dades relacionals.</label><br>
  <input type="radio" id="q3d" name="question3" value="d">
  <label for="q3d">d) Permet executar múltiples scripts PHP alhora.</label><br><br>
  <input type="button" value="Comprovar" onclick="checkAnswer3()">
</form>

<p id="result3"></p>

<script>
function checkAnswer3() {
    var correctAnswer = "a";
    var radios = document.getElementsByName('question3');
    var userAnswer;
    for (var i = 0; i < radios.length; i++) {
        if (radios[i].checked) {
            userAnswer = radios[i].value;
            break;
        }
    }
    var resultText = userAnswer === correctAnswer ? "Correcte!" : "Incorrecte. La resposta correcta és a) Permet que una funció tinga múltiples implementacions depenent de l'objecte que la cride.";
    document.getElementById('result3').innerText = resultText;
}
</script>

<h4 id="exercici-4-espais-de-noms">Exercici 4: Espais de Noms<a class="headerlink" href="#exercici-4-espais-de-noms" title="Permanent link">&para;</a></h4>
<h5 id="pregunta_3">Pregunta:<a class="headerlink" href="#pregunta_3" title="Permanent link">&para;</a></h5>
<p>Per a què s'utilitzen els espais de noms (namespaces) en PHP?</p>
<h5 id="opcions_3">Opcions:<a class="headerlink" href="#opcions_3" title="Permanent link">&para;</a></h5>
<form>
  <input type="radio" id="q4a" name="question4" value="a">
  <label for="q4a">a) Per executar codi PHP de forma asincrònica.</label><br>
  <input type="radio" id="q4b" name="question4" value="b">
  <label for="q4b">b) Per evitar conflictes entre noms de classes, funcions o constants en diferents parts del codi.</label><br>
  <input type="radio" id="q4c" name="question4" value="c">
  <label for="q4c">c) Per definir variables globals accessibles des de qualsevol punt del codi.</label><br>
  <input type="radio" id="q4d" name="question4" value="d">
  <label for="q4d">d) Per importar codi d'altres llenguatges de programació com JavaScript.</label><br><br>
  <input type="button" value="Comprovar" onclick="checkAnswer4()">
</form>

<p id="result4"></p>

<script>
function checkAnswer4() {
    var correctAnswer = "b";
    var radios = document.getElementsByName('question4');
    var userAnswer;
    for (var i = 0; i < radios.length; i++) {
        if (radios[i].checked) {
            userAnswer = radios[i].value;
            break;
        }
    }
    var resultText = userAnswer === correctAnswer ? "Correcte!" : "Incorrecte. La resposta correcta és b) Per evitar conflictes entre noms de classes, funcions o constants en diferents parts del codi.";
    document.getElementById('result4').innerText = resultText;
}
</script>

<h4 id="exercici-5-traits-en-php">Exercici 5: Traits en PHP<a class="headerlink" href="#exercici-5-traits-en-php" title="Permanent link">&para;</a></h4>
<h5 id="pregunta_4">Pregunta:<a class="headerlink" href="#pregunta_4" title="Permanent link">&para;</a></h5>
<p>Quin avantatge ofereixen els traits en PHP?</p>
<h5 id="opcions_4">Opcions:<a class="headerlink" href="#opcions_4" title="Permanent link">&para;</a></h5>
<form>
  <input type="radio" id="q5a" name="question5" value="a">
  <label for="q5a">a) Permet escriure codi reutilitzable que es pot incloure en múltiples classes, independentment de la jerarquia d'herència.</label><br>
  <input type="radio" id="q5b" name="question5" value="b">
  <label for="q5b">b) Permet la creació de funcions globals en PHP.</label><br>
  <input type="radio" id="q5c" name="question5" value="c">
  <label for="q5c">c) Permet la comunicació entre diferents servidors web.</label><br>
  <input type="radio" id="q5d" name="question5" value="d">
  <label for="q5d">d) Permet executar codi PHP dins de plantilles HTML.</label><br><br>
  <input type="button" value="Comprovar" onclick="checkAnswer5()">
</form>

<p id="result5"></p>

<script>
function checkAnswer5() {
    var correctAnswer = "a";
    var radios = document.getElementsByName('question5');
    var userAnswer;
    for (var i = 0; i < radios.length; i++) {
        if (radios[i].checked) {
            userAnswer = radios[i].value;
            break;
        }
    }
    var resultText = userAnswer === correctAnswer ? "Correcte!" : "Incorrecte. La resposta correcta és a) Permet escriure codi reutilitzable que es pot incloure en múltiples classes, independentment de la jerarquia d'herència.";
    document.getElementById('result5').innerText = resultText;
}
</script>

<h4 id="exercici-6-excepcions-en-php">Exercici 6: Excepcions en PHP<a class="headerlink" href="#exercici-6-excepcions-en-php" title="Permanent link">&para;</a></h4>
<h5 id="pregunta_5">Pregunta:<a class="headerlink" href="#pregunta_5" title="Permanent link">&para;</a></h5>
<p>Quina és la finalitat d'utilitzar excepcions en PHP?</p>
<h5 id="opcions_5">Opcions:<a class="headerlink" href="#opcions_5" title="Permanent link">&para;</a></h5>
<form>
  <input type="radio" id="q6a" name="question6" value="a">
  <label for="q6a">a) Evitar l'execució de codi mal format.</label><br>
  <input type="radio" id="q6b" name="question6" value="b">
  <label for="q6b">b) Gestionar errors i condicions excepcionals de manera controlada dins d'una aplicació.</label><br>
  <input type="radio" id="q6c" name="question6" value="c">
  <label for="q6c">c) Declarar funcions dins d'una classe.</label><br>
  <input type="radio" id="q6d" name="question6" value="d">
  <label for="q6d">d) Garantir que totes les variables estiguen inicialitzades abans del seu ús.</label><br><br>
  <input type="button" value="Comprovar" onclick="checkAnswer6()">
</form>

<p id="result6"></p>

<script>
function checkAnswer6() {
    var correctAnswer = "b";
    var radios = document.getElementsByName('question6');
    var userAnswer;
    for (var i = 0; i < radios.length; i++) {
        if (radios[i].checked) {
            userAnswer = radios[i].value;
            break;
        }
    }
    var resultText = userAnswer === correctAnswer ? "Correcte!" : "Incorrecte. La resposta correcta és b) Gestionar errors i condicions excepcionals de manera controlada dins d'una aplicació.";
    document.getElementById('result6').innerText = resultText;
}
</script>

<h4 id="exercici-7-autoloading-en-php">Exercici 7: Autoloading en PHP<a class="headerlink" href="#exercici-7-autoloading-en-php" title="Permanent link">&para;</a></h4>
<h5 id="pregunta_6">Pregunta:<a class="headerlink" href="#pregunta_6" title="Permanent link">&para;</a></h5>
<p>Quin avantatge ofereix l'autoloading en PHP?</p>
<h5 id="opcions_6">Opcions:<a class="headerlink" href="#opcions_6" title="Permanent link">&para;</a></h5>
<form>
  <input type="radio" id="q7a" name="question7" value="a">
  <label for="q7a">a) Permet que les classes es carreguen automàticament quan s'utilitzen, sense necessitat de fer incloure manualment cada fitxer.</label><br>
  <input type="radio" id="q7b" name="question7" value="b">
  <label for="q7b">b) Permet l'execució de múltiples scripts alhora.</label><br>
  <input type="radio" id="q7c" name="question7" value="c">
  <label for="q7c">c) Permet la manipulació de fitxers en el servidor.</label><br>
  <input type="radio" id="q7d" name="question7" value="d">
  <label for="q7d">d) Permet la connexió amb bases de dades.</label><br><br>
  <input type="button" value="Comprovar" onclick="checkAnswer7()">
</form>

<p id="result7"></p>

<script>
function checkAnswer7() {
    var correctAnswer = "a";
    var radios = document.getElementsByName('question7');
    var userAnswer;
    for (var i = 0; i < radios.length; i++) {
        if (radios[i].checked) {
            userAnswer = radios[i].value;
            break;
        }
    }
    var resultText = userAnswer === correctAnswer ? "Correcte!" : "Incorrecte. La resposta correcta és a) Permet que les classes es carreguen automàticament quan s'utilitzen, sense necessitat de fer incloure manualment cada fitxer.";
    document.getElementById('result7').innerText = resultText;
}
</script>









  




                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      2021-2026 Aitor Medrano, Luis Alemañ, Ignasi Gomis - Licencia CC BY-NC-SA
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/aitormedrano" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.2 4.2 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.52 8.52 0 0 1-5.33 1.84q-.51 0-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:<a.medrano@edu.gva.es>" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 12.13c-.15.01-.29.06-.39.17l-1 1 2.05 2 1-1c.22-.21.22-.56 0-.77l-1.24-1.23a.56.56 0 0 0-.38-.17m-2 1.75L13 19.94V22h2.06l6.06-6.07M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h7v-.89l8.24-8.22c.47-.49 1.12-.76 1.8-.76.34 0 .68.06 1 .19V6c0-1.12-.92-2-2.04-2m0 4-8 5-8-5V6l8 5 8-5"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": ".", "features": ["header.autohide", "toc.integrate", "content.tabs.link"], "search": "assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copiat al porta-retalls", "clipboard.copy": "C\u00f2pia al porta-retalls", "search.result.more.one": "1 m\u00e9s en aquesta p\u00e0gina", "search.result.more.other": "# m\u00e9s en aquesta p\u00e0gina", "search.result.none": "Cap document coincideix", "search.result.one": "1 document coincident", "search.result.other": "# documents coincidents", "search.result.placeholder": "Escriu per a comen\u00e7ar a cercar", "search.result.term.missing": "Desaparegut", "select.version": "Selecciona la versi\u00f3"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>