
<!doctype html>
<html lang="ca" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://cipfpbatoi.github.io/dwes2526/09mailLaravel.html">
      
      
      
      
      <link rel="icon" href="imagenes/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Introducció - Desenvolupament web en entorn de Servidor</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-X6D0LR7TC8"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-X6D0LR7TC8",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-X6D0LR7TC8",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="Teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduccio" class="md-skip">
          Salta el contingut
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Capçalera">
    <a href="index.html" title="Desenvolupament web en entorn de Servidor" class="md-header__button md-logo" aria-label="Desenvolupament web en entorn de Servidor" data-md-component="logo">
      
  <img src="imagenes/logofp.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Desenvolupament web en entorn de Servidor
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Introducció
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="Teal"  aria-label="Canviar a mode nit"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Canviar a mode nit" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="light-blue" data-md-color-accent="Teal"  aria-label="Canviar a mode dia"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Canviar a mode dia" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Cerca" placeholder="Cerca" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Cerca">
        
        <button type="reset" class="md-search__icon md-icon" title="Neteja" aria-label="Neteja" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicialitzant cerca
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navegació" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="Desenvolupament web en entorn de Servidor" class="md-nav__button md-logo" aria-label="Desenvolupament web en entorn de Servidor" data-md-component="logo">
      
  <img src="imagenes/logofp.png" alt="logo">

    </a>
    Desenvolupament web en entorn de Servidor
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Inicio
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="01arquitecturas.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.- Arquitectures Web
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="02php.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.- Programació web amb PHP
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="03MVC_Laravel.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.- Arquitectura MVC amb Laravel
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="04dades_Laravel.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.- Accés segur i estructurat a bases de dades amb Laravel
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="05seguretat_Laravel.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5.- Aplicacions segures i reactives en Laravel
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="06Nodejs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6.- Desenvolupament d'APIs REST amb Node.js
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="introduccio">Introducció<a class="headerlink" href="#introduccio" title="Permanent link">&para;</a></h1>
<p>No cal complicar enviar correus electrònics. Laravel proporciona una API de correu electrònic neta i senzilla alimentada pel popular component Symfony Mailer.
El Laravel i el Symfony Mailer proporcionen controladors per enviar correus electrònics via SMTP, Mailgun, Postmark, Amazon SES i sendmail, permetent-vos començar ràpidament a enviar correus a través d'un servei local o basat en el núvol de la vostra elecció.</p>
<h2 id="configuracio">Configuració<a class="headerlink" href="#configuracio" title="Permanent link">&para;</a></h2>
<p>Els serveis de correu electrònic de Laravel es poden configurar a través del fitxer de configuració config/mail.php de la vostra aplicació. 
Cada mailer configurat dins d'aquest fitxer pot tenir la seva pròpia configuració única i fins i tot el seu propi "transport", permetent a la vostra aplicació utilitzar diferents serveis de correu electrònic per enviar certs missatges de correu electrònic. 
Per exemple, la vostra aplicació pot utilitzar Postmark per enviar correus electrònics transaccionals mentre s'utilitza Amazon SES per enviar correus electrònics massius.</p>
<p>Dins del fitxer de configuració de correu, trobareu una matriu de configuració de mailers. Aquesta matriu conté una entrada de configuració d'exemple per a cadascun dels principals controladors de correu / transports admesos per Laravel, mentre que el valor de configuració predeterminat determina quin gestor de correu s'utilitzarà per defecte quan la vostra aplicació hagi d'enviar un missatge de correu electrònic.</p>
<h2 id="generant-els-mailables">Generant els mailables<a class="headerlink" href="#generant-els-mailables" title="Permanent link">&para;</a></h2>
<p>Quan es construeixen aplicacions Laravel, cada tipus de correu electrònic enviat per la vostra aplicació es representa com una classe "mailable".
Aquestes classes s'emmagatzemen al directori app/mail. No us preocupeu si no veieu aquest directori a la vostra aplicació, ja que es generarà quan creeu la primera classe de mailable utilitzant l'ordre make:mail d'Artisan</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>php artisan make:mail OrdreShipped
</code></pre></div>
<h2 id="escriure-mailables">Escriure Mailables<a class="headerlink" href="#escriure-mailables" title="Permanent link">&para;</a></h2>
<p>Un cop heu generat una classe de correu, obriu-la perquè poder explorar el seu contingut. La configuració de la classe mailable es fa en diversos mètodes, incloent-hi els mètodes de envelope, content i attachments.</p>
<p>El mètode de <strong>envelope</strong> retorna un objecte <strong>Illuminate\Mail\Mailables\Envelope</strong> que defineix l'assumpte i, de vegades, els destinataris del missatge. 
El mètode de <strong>content</strong> retorna un objecte Illuminate\Mail\Mailables\Content que defineix la plantilla Blade que s'utilitzarà per generar el contingut del missatge.</p>
<h3 id="configurar-el-remitent">Configurar el remitent<a class="headerlink" href="#configurar-el-remitent" title="Permanent link">&para;</a></h3>
<h4 id="us-metode-envelope">Ús mètode envelope<a class="headerlink" href="#us-metode-envelope" title="Permanent link">&para;</a></h4>
<p>Primer, explorem la configuració del remitent del correu electrònic. O, en altres paraules, de qui serà el correu electrònic. Hi ha dues maneres de configurar el remitent. Primer, podeu especificar l'adreça «de» en el from del missatge:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="x">use Illuminate\Mail\Mailables\Address;</span>
<span class="linenos" data-linenos=" 2 "></span><span class="x">use Illuminate\Mail\Mailables\Envelope;</span>
<span class="linenos" data-linenos=" 3 "></span>
<span class="linenos" data-linenos=" 4 "></span><span class="x">/**</span>
<span class="linenos" data-linenos=" 5 "></span><span class="x">* Get the message envelope.</span>
<span class="linenos" data-linenos=" 6 "></span><span class="x">*</span>
<span class="linenos" data-linenos=" 7 "></span><span class="x">* @return \Illuminate\Mail\Mailables\Envelope</span>
<span class="linenos" data-linenos=" 8 "></span><span class="x">  */</span>
<span class="linenos" data-linenos=" 9 "></span><span class="x">  public function envelope()</span>
<span class="linenos" data-linenos="10 "></span><span class="x">  {</span>
<span class="linenos" data-linenos="11 "></span><span class="x">      return new Envelope(</span>
<span class="linenos" data-linenos="12 "></span><span class="x">          from: new Address(&#39;jeffrey@example.com&#39;, &#39;Jeffrey Way&#39;),</span>
<span class="linenos" data-linenos="13 "></span><span class="x">          subject: &#39;Order Shipped&#39;,</span>
<span class="linenos" data-linenos="14 "></span><span class="x">      );</span>
<span class="linenos" data-linenos="15 "></span><span class="x">  }</span>
</code></pre></div>
<p>Si ho desitgeu, també podeu especificar una adreça «replyTo»:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="x">return new Envelope(</span>
<span class="linenos" data-linenos="2 "></span><span class="x">    from: new Address(&#39;jeffrey@example.com&#39;, &#39;Jeffrey Way&#39;),</span>
<span class="linenos" data-linenos="3 "></span><span class="x">    replyTo: [</span>
<span class="linenos" data-linenos="4 "></span><span class="x">        new Address(&#39;taylor@example.com&#39;, &#39;Taylor Otwell&#39;),</span>
<span class="linenos" data-linenos="5 "></span><span class="x">    ],</span>
<span class="linenos" data-linenos="6 "></span><span class="x">    subject: &#39;Order Shipped&#39;,</span>
<span class="linenos" data-linenos="7 "></span><span class="x">);</span>
</code></pre></div>
<h4 id="us-duna-adreca-global-des-de">Ús d'una adreça global des de<a class="headerlink" href="#us-duna-adreca-global-des-de" title="Permanent link">&para;</a></h4>
<p>No obstant això, si la vostra aplicació utilitza la mateixa adreça «des de» per a tots els seus correus electrònics, pot resultar difícil trucar al mètode «des de» en cada classe de correu que genereu. En lloc d'això, podeu especificar una adreça global «from» al fitxer de configuració config/mail.php. Aquesta adreça s'utilitzarà si no s'especifica cap altra adreça "de" dins de la classe de correu:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="x">&#39;from&#39; =&gt; [&#39;address&#39; =&gt; &#39;example@example.com&#39;, &#39;name&#39; =&gt; &#39;App Name&#39;],</span>
</code></pre></div>
<p>A més, podeu definir una adreça global «reply"to» dins del fitxer de configuració config/mail.php:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="x">&#39;reply_to&#39; =&gt; [&#39;adreça&#39; = = &#39;exemple@exemple.com&#39;, &#39;nom&#39; =  &#39;nom d&#39;aplicació&#39;],</span>
</code></pre></div>
<h3 id="configurar-la-vista">Configurar la vista<a class="headerlink" href="#configurar-la-vista" title="Permanent link">&para;</a></h3>
<p>Dins del mètode content d'una classe de correu, podeu definir la vista, o quina plantilla s'ha d'utilitzar quan es renderitza el contingut del correu electrònic. 
Atès que cada correu electrònic normalment utilitza una plantilla de Blade per representar el seu contingut, teniu tota la potència i conveniència del motor de templating Blade en construir l'HTML del vostre correu electrònic:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="x">/**</span>
<span class="linenos" data-linenos=" 2 "></span><span class="x">* Get the message content definition.</span>
<span class="linenos" data-linenos=" 3 "></span><span class="x">*</span>
<span class="linenos" data-linenos=" 4 "></span><span class="x">* @return \Illuminate\Mail\Mailables\Content</span>
<span class="linenos" data-linenos=" 5 "></span><span class="x">  */</span>
<span class="linenos" data-linenos=" 6 "></span><span class="x">  public function content()</span>
<span class="linenos" data-linenos=" 7 "></span><span class="x">  {</span>
<span class="linenos" data-linenos=" 8 "></span><span class="x">      return new Content(</span>
<span class="linenos" data-linenos=" 9 "></span><span class="x">        view: &#39;emails.orders.shipped&#39;,</span>
<span class="linenos" data-linenos="10 "></span><span class="x">      );</span>
<span class="linenos" data-linenos="11 "></span><span class="x">  }</span>
</code></pre></div>
<h3 id="mostra-les-dades">Mostra les dades<a class="headerlink" href="#mostra-les-dades" title="Permanent link">&para;</a></h3>
<h4 id="via-propietats-publiques">Via Propietats públiques<a class="headerlink" href="#via-propietats-publiques" title="Permanent link">&para;</a></h4>
<p>Normalment, voldreu passar algunes dades a la vostra vista que podeu utilitzar en renderitzar l'HTML del correu electrònic. 
Hi ha dues maneres de posar les dades a disposició de la vostra vista. Primer, qualsevol propietat pública definida a la vostra classe de correu es posarà automàticament a disposició de la vista. 
Així, per exemple, podeu passar dades al constructor de la classe de correu i establir aquestes dades a les propietats públiques definides a la classe:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">namespace</span> <span class="nx">App\Mail</span><span class="p">;</span>
<span class="linenos" data-linenos=" 3 "></span>
<span class="linenos" data-linenos=" 4 "></span><span class="k">use</span> <span class="nx">App\Models\Order</span><span class="p">;</span>
<span class="linenos" data-linenos=" 5 "></span><span class="k">use</span> <span class="nx">Illuminate\Bus\Queueable</span><span class="p">;</span>
<span class="linenos" data-linenos=" 6 "></span><span class="k">use</span> <span class="nx">Illuminate\Mail\Mailable</span><span class="p">;</span>
<span class="linenos" data-linenos=" 7 "></span><span class="k">use</span> <span class="nx">Illuminate\Mail\Mailables\Content</span><span class="p">;</span>
<span class="linenos" data-linenos=" 8 "></span><span class="k">use</span> <span class="nx">Illuminate\Queue\SerializesModels</span><span class="p">;</span>
<span class="linenos" data-linenos=" 9 "></span>
<span class="linenos" data-linenos="10 "></span><span class="k">class</span> <span class="nc">OrderShipped</span> <span class="k">extends</span> <span class="nx">Mailable</span>
<span class="linenos" data-linenos="11 "></span><span class="p">{</span>
<span class="linenos" data-linenos="12 "></span><span class="k">use</span> <span class="nx">Queueable</span><span class="p">,</span> <span class="nx">SerializesModels</span><span class="p">;</span>
<span class="linenos" data-linenos="13 "></span>
<span class="linenos" data-linenos="14 "></span>    <span class="sd">/**</span>
<span class="linenos" data-linenos="15 "></span><span class="sd">     * The order instance.</span>
<span class="linenos" data-linenos="16 "></span><span class="sd">     *</span>
<span class="linenos" data-linenos="17 "></span><span class="sd">     * @var \App\Models\Order</span>
<span class="linenos" data-linenos="18 "></span><span class="sd">     */</span>
<span class="linenos" data-linenos="19 "></span>    <span class="k">public</span> <span class="nv">$order</span><span class="p">;</span>
<span class="linenos" data-linenos="20 "></span>
<span class="linenos" data-linenos="21 "></span>    <span class="sd">/**</span>
<span class="linenos" data-linenos="22 "></span><span class="sd">     * Create a new message instance.</span>
<span class="linenos" data-linenos="23 "></span><span class="sd">     *</span>
<span class="linenos" data-linenos="24 "></span><span class="sd">     * @param  \App\Models\Order  $order</span>
<span class="linenos" data-linenos="25 "></span><span class="sd">     * @return void</span>
<span class="linenos" data-linenos="26 "></span><span class="sd">     */</span>
<span class="linenos" data-linenos="27 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">Order</span> <span class="nv">$order</span><span class="p">)</span>
<span class="linenos" data-linenos="28 "></span>    <span class="p">{</span>
<span class="linenos" data-linenos="29 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">order</span> <span class="o">=</span> <span class="nv">$order</span><span class="p">;</span>
<span class="linenos" data-linenos="30 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="31 "></span>
<span class="linenos" data-linenos="32 "></span>    <span class="sd">/**</span>
<span class="linenos" data-linenos="33 "></span><span class="sd">     * Get the message content definition.</span>
<span class="linenos" data-linenos="34 "></span><span class="sd">     *</span>
<span class="linenos" data-linenos="35 "></span><span class="sd">     * @return \Illuminate\Mail\Mailables\Content</span>
<span class="linenos" data-linenos="36 "></span><span class="sd">     */</span>
<span class="linenos" data-linenos="37 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">content</span><span class="p">()</span>
<span class="linenos" data-linenos="38 "></span>    <span class="p">{</span>
<span class="linenos" data-linenos="39 "></span>        <span class="k">return</span> <span class="k">new</span> <span class="nx">Content</span><span class="p">(</span>
<span class="linenos" data-linenos="40 "></span>            <span class="nx">view</span><span class="o">:</span> <span class="s1">&#39;emails.orders.shipped&#39;</span><span class="p">,</span>
<span class="linenos" data-linenos="41 "></span>        <span class="p">);</span>
<span class="linenos" data-linenos="42 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="43 "></span><span class="p">}</span>
</code></pre></div>
<p>Una vegada que les dades s'hagin establert en una propietat pública, estaran disponibles automàticament a la vostra vista, de manera que podreu accedir-hi com ho faríeu amb qualsevol altra dada a les vostres plantilles de Blade:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="2 "></span>    Price: {{ $order-&gt;price }}
<span class="linenos" data-linenos="3 "></span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
<h4 id="via-parametre">Via paràmetre<a class="headerlink" href="#via-parametre" title="Permanent link">&para;</a></h4>
<p>Si voleu personalitzar el format de les dades del vostre correu electrònic abans d'enviar-les a la plantilla, podeu passar manualment les vostres dades a la vista mitjançant la definició de contingut amb el paràmetre.
Normalment, encara passareu dades a través del constructor de la classe de correu; no obstant això, haureu d'establir aquestes dades a propietats protegides o privades, de manera que les dades no estiguin disponibles automàticament a la plantilla:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="k">namespace</span> <span class="nx">App\Mail</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="k">use</span> <span class="nx">App\Models\Order</span><span class="p">;</span>
<span class="linenos" data-linenos=" 6 "></span><span class="k">use</span> <span class="nx">Illuminate\Bus\Queueable</span><span class="p">;</span>
<span class="linenos" data-linenos=" 7 "></span><span class="k">use</span> <span class="nx">Illuminate\Mail\Mailable</span><span class="p">;</span>
<span class="linenos" data-linenos=" 8 "></span><span class="k">use</span> <span class="nx">Illuminate\Mail\Mailables\Content</span><span class="p">;</span>
<span class="linenos" data-linenos=" 9 "></span><span class="k">use</span> <span class="nx">Illuminate\Queue\SerializesModels</span><span class="p">;</span>
<span class="linenos" data-linenos="10 "></span>
<span class="linenos" data-linenos="11 "></span><span class="k">class</span> <span class="nc">OrderShipped</span> <span class="k">extends</span> <span class="nx">Mailable</span>
<span class="linenos" data-linenos="12 "></span><span class="p">{</span>
<span class="linenos" data-linenos="13 "></span>    <span class="k">use</span> <span class="nx">Queueable</span><span class="p">,</span> <span class="nx">SerializesModels</span><span class="p">;</span>
<span class="linenos" data-linenos="14 "></span>
<span class="linenos" data-linenos="15 "></span>    <span class="sd">/**</span>
<span class="linenos" data-linenos="16 "></span><span class="sd">     * The order instance.</span>
<span class="linenos" data-linenos="17 "></span><span class="sd">     *</span>
<span class="linenos" data-linenos="18 "></span><span class="sd">     * @var \App\Models\Order</span>
<span class="linenos" data-linenos="19 "></span><span class="sd">     */</span>
<span class="linenos" data-linenos="20 "></span>    <span class="k">protected</span> <span class="nv">$order</span><span class="p">;</span>
<span class="linenos" data-linenos="21 "></span>
<span class="linenos" data-linenos="22 "></span>    <span class="sd">/**</span>
<span class="linenos" data-linenos="23 "></span><span class="sd">     * Create a new message instance.</span>
<span class="linenos" data-linenos="24 "></span><span class="sd">     *</span>
<span class="linenos" data-linenos="25 "></span><span class="sd">     * @param  \App\Models\Order  $order</span>
<span class="linenos" data-linenos="26 "></span><span class="sd">     * @return void</span>
<span class="linenos" data-linenos="27 "></span><span class="sd">     */</span>
<span class="linenos" data-linenos="28 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">Order</span> <span class="nv">$order</span><span class="p">)</span>
<span class="linenos" data-linenos="29 "></span>    <span class="p">{</span>
<span class="linenos" data-linenos="30 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">order</span> <span class="o">=</span> <span class="nv">$order</span><span class="p">;</span>
<span class="linenos" data-linenos="31 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="32 "></span>
<span class="linenos" data-linenos="33 "></span>    <span class="sd">/**</span>
<span class="linenos" data-linenos="34 "></span><span class="sd">     * Get the message content definition.</span>
<span class="linenos" data-linenos="35 "></span><span class="sd">     *</span>
<span class="linenos" data-linenos="36 "></span><span class="sd">     * @return \Illuminate\Mail\Mailables\Content</span>
<span class="linenos" data-linenos="37 "></span><span class="sd">     */</span>
<span class="linenos" data-linenos="38 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">content</span><span class="p">()</span>
<span class="linenos" data-linenos="39 "></span>    <span class="p">{</span>
<span class="linenos" data-linenos="40 "></span>        <span class="k">return</span> <span class="k">new</span> <span class="nx">Content</span><span class="p">(</span>
<span class="linenos" data-linenos="41 "></span>            <span class="nx">view</span><span class="o">:</span> <span class="s1">&#39;emails.orders.shipped&#39;</span><span class="p">,</span>
<span class="linenos" data-linenos="42 "></span>            <span class="nx">with</span><span class="o">:</span> <span class="p">[</span>
<span class="linenos" data-linenos="43 "></span>                <span class="s1">&#39;orderName&#39;</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">order</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">,</span>
<span class="linenos" data-linenos="44 "></span>                <span class="s1">&#39;orderPrice&#39;</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">order</span><span class="o">-&gt;</span><span class="na">price</span><span class="p">,</span>
<span class="linenos" data-linenos="45 "></span>            <span class="p">],</span>
<span class="linenos" data-linenos="46 "></span>        <span class="p">);</span>
<span class="linenos" data-linenos="47 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="48 "></span><span class="p">}</span>
</code></pre></div>
<h2 id="attachments">Attachments<a class="headerlink" href="#attachments" title="Permanent link">&para;</a></h2>
<p>Per a afegir adjunts a un correu electrònic, afegireu adjunts a la matriu retornada pel mètode d'adjunts del missatge.
En primer lloc, podeu afegir un adjunt proporcionant un camí de fitxer al mètode fromPath proporcionat per la classe attachment:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="x">use Illuminate\Mail\Mailables\Attachment;</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="x">/**</span>
<span class="linenos" data-linenos=" 4 "></span><span class="x">* Get the attachments for the message.</span>
<span class="linenos" data-linenos=" 5 "></span><span class="x">*</span>
<span class="linenos" data-linenos=" 6 "></span><span class="x">* @return \Illuminate\Mail\Mailables\Attachment[]</span>
<span class="linenos" data-linenos=" 7 "></span><span class="x">  */</span>
<span class="linenos" data-linenos=" 8 "></span><span class="x">  public function attachments()</span>
<span class="linenos" data-linenos=" 9 "></span><span class="x">  {</span>
<span class="linenos" data-linenos="10 "></span><span class="x">    return [</span>
<span class="linenos" data-linenos="11 "></span><span class="x">        Attachment::fromPath(&#39;/path/to/file&#39;),</span>
<span class="linenos" data-linenos="12 "></span><span class="x">    ];</span>
<span class="linenos" data-linenos="13 "></span><span class="x">  }</span>
</code></pre></div>
<p>En adjuntar fitxers a un missatge, també podeu especificar el nom a mostrar i / o tipus MIME per a l'adjunt usant els mètodes as i withMime:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="x">/**</span>
<span class="linenos" data-linenos=" 2 "></span><span class="x">* Get the attachments for the message.</span>
<span class="linenos" data-linenos=" 3 "></span><span class="x">*</span>
<span class="linenos" data-linenos=" 4 "></span><span class="x">* @return \Illuminate\Mail\Mailables\Attachment[]</span>
<span class="linenos" data-linenos=" 5 "></span><span class="x">  */</span>
<span class="linenos" data-linenos=" 6 "></span><span class="x">  public function attachments()</span>
<span class="linenos" data-linenos=" 7 "></span><span class="x">  {</span>
<span class="linenos" data-linenos=" 8 "></span><span class="x">  return [</span>
<span class="linenos" data-linenos=" 9 "></span><span class="x">        Attachment::fromPath(&#39;/path/to/file&#39;)</span>
<span class="linenos" data-linenos="10 "></span><span class="x">        -&gt;as(&#39;name.pdf&#39;)</span>
<span class="linenos" data-linenos="11 "></span><span class="x">        -&gt;withMime(&#39;application/pdf&#39;),</span>
<span class="linenos" data-linenos="12 "></span><span class="x">    ];</span>
<span class="linenos" data-linenos="13 "></span><span class="x">  }</span>
</code></pre></div>
<h1 id="enviant-correu">Enviant correu<a class="headerlink" href="#enviant-correu" title="Permanent link">&para;</a></h1>
<p>Per enviar un missatge, utilitzeu el mètode to a la façana del Correu.
El mètode to accepta una adreça de correu electrònic, una instància d'usuari o una col·lecció d'usuaris.
Si passeu un objecte o una col·lecció d'objectes, el mailer utilitzarà automàticament les seves propietats de correu electrònic i de nom quan determini els destinataris del correu, així que assegureu-vos que aquests atributs estiguin disponibles en els vostres objectes.
Un cop hàgiu especificat els destinataris, podeu passar una instància de la vostra classe de correu al mètode d'enviament:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;?php</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="k">namespace</span> <span class="nx">App\Http\Controllers</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="k">use</span> <span class="nx">App\Http\Controllers\Controller</span><span class="p">;</span>
<span class="linenos" data-linenos=" 6 "></span><span class="k">use</span> <span class="nx">App\Mail\OrderShipped</span><span class="p">;</span>
<span class="linenos" data-linenos=" 7 "></span><span class="k">use</span> <span class="nx">App\Models\Order</span><span class="p">;</span>
<span class="linenos" data-linenos=" 8 "></span><span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>
<span class="linenos" data-linenos=" 9 "></span><span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Mail</span><span class="p">;</span>
<span class="linenos" data-linenos="10 "></span>
<span class="linenos" data-linenos="11 "></span><span class="k">class</span> <span class="nc">OrderShipmentController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="linenos" data-linenos="12 "></span><span class="p">{</span>
<span class="linenos" data-linenos="13 "></span>    <span class="sd">/**</span>
<span class="linenos" data-linenos="14 "></span><span class="sd">     * Ship the given order.</span>
<span class="linenos" data-linenos="15 "></span><span class="sd">     *</span>
<span class="linenos" data-linenos="16 "></span><span class="sd">     * @param  \Illuminate\Http\Request  $request</span>
<span class="linenos" data-linenos="17 "></span><span class="sd">     * @return \Illuminate\Http\Response</span>
<span class="linenos" data-linenos="18 "></span><span class="sd">     */</span>
<span class="linenos" data-linenos="19 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">store</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span>
<span class="linenos" data-linenos="20 "></span>    <span class="p">{</span>
<span class="linenos" data-linenos="21 "></span>        <span class="nv">$order</span> <span class="o">=</span> <span class="nx">Order</span><span class="o">::</span><span class="na">findOrFail</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">order_id</span><span class="p">);</span>
<span class="linenos" data-linenos="22 "></span>
<span class="linenos" data-linenos="23 "></span>        <span class="c1">// Ship the order...</span>
<span class="linenos" data-linenos="24 "></span>
<span class="linenos" data-linenos="25 "></span>        <span class="nx">Mail</span><span class="o">::</span><span class="na">to</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">())</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">(</span><span class="k">new</span> <span class="nx">OrderShipped</span><span class="p">(</span><span class="nv">$order</span><span class="p">));</span>
<span class="linenos" data-linenos="26 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="27 "></span><span class="p">}</span>
</code></pre></div>
<p>No esteu limitat a especificar els destinataris «a» quan envieu un missatge. Sou lliure d'establir els destinataris "a", "cc" i "bcc" encadenant els seus respectius mètodes junts:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="x">Mail::to($request-&gt;user())</span>
<span class="linenos" data-linenos="2 "></span><span class="x">-&gt;cc($moreUsers)</span>
<span class="linenos" data-linenos="3 "></span><span class="x">-&gt;bcc($evenMoreUsers)</span>
<span class="linenos" data-linenos="4 "></span><span class="x">-&gt;send(new OrderShipped($order));</span>
</code></pre></div>









  




                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      2021-2026 Aitor Medrano, Luis Alemañ, Ignasi Gomis - Licencia CC BY-NC-SA
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/aitormedrano" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.2 4.2 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.52 8.52 0 0 1-5.33 1.84q-.51 0-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:<a.medrano@edu.gva.es>" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 12.13c-.15.01-.29.06-.39.17l-1 1 2.05 2 1-1c.22-.21.22-.56 0-.77l-1.24-1.23a.56.56 0 0 0-.38-.17m-2 1.75L13 19.94V22h2.06l6.06-6.07M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h7v-.89l8.24-8.22c.47-.49 1.12-.76 1.8-.76.34 0 .68.06 1 .19V6c0-1.12-.92-2-2.04-2m0 4-8 5-8-5V6l8 5 8-5"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": ".", "features": ["header.autohide", "toc.integrate", "content.tabs.link"], "search": "assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copiat al porta-retalls", "clipboard.copy": "C\u00f2pia al porta-retalls", "search.result.more.one": "1 m\u00e9s en aquesta p\u00e0gina", "search.result.more.other": "# m\u00e9s en aquesta p\u00e0gina", "search.result.none": "Cap document coincideix", "search.result.one": "1 document coincident", "search.result.other": "# documents coincidents", "search.result.placeholder": "Escriu per a comen\u00e7ar a cercar", "search.result.term.missing": "Desaparegut", "select.version": "Selecciona la versi\u00f3"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>