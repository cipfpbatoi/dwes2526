
<!doctype html>
<html lang="ca" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://cipfpbatoi.github.io/dwes2526/10recuperacio.html">
      
      
      
      
      <link rel="icon" href="imagenes/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Exercicis de recuperació de PHP - Desenvolupament web en entorn de Servidor</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-X6D0LR7TC8"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-X6D0LR7TC8",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-X6D0LR7TC8",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="Teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#exercicis-de-recuperacio-de-php" class="md-skip">
          Salta el contingut
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Capçalera">
    <a href="index.html" title="Desenvolupament web en entorn de Servidor" class="md-header__button md-logo" aria-label="Desenvolupament web en entorn de Servidor" data-md-component="logo">
      
  <img src="imagenes/logofp.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Desenvolupament web en entorn de Servidor
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Exercicis de recuperació de PHP
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="Teal"  aria-label="Canviar a mode nit"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Canviar a mode nit" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="light-blue" data-md-color-accent="Teal"  aria-label="Canviar a mode dia"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Canviar a mode dia" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Cerca" placeholder="Cerca" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Cerca">
        
        <button type="reset" class="md-search__icon md-icon" title="Neteja" aria-label="Neteja" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicialitzant cerca
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navegació" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="Desenvolupament web en entorn de Servidor" class="md-nav__button md-logo" aria-label="Desenvolupament web en entorn de Servidor" data-md-component="logo">
      
  <img src="imagenes/logofp.png" alt="logo">

    </a>
    Desenvolupament web en entorn de Servidor
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Inicio
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="01arquitecturas.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1.- Arquitectures Web
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="02php.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2.- Programació web amb PHP
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="03MVC_Laravel.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3.- Arquitectura MVC amb Laravel
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="04dades_Laravel.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4.- Accés segur i estructurat a bases de dades amb Laravel
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="05seguretat_Laravel.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5.- Aplicacions segures i reactives en Laravel
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="06Nodejs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6.- Desenvolupament d'APIs REST amb Node.js
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="exercicis-de-recuperacio-de-php">Exercicis de recuperació de PHP<a class="headerlink" href="#exercicis-de-recuperacio-de-php" title="Permanent link">&para;</a></h1>
<h2 id="damero">DAMERO<a class="headerlink" href="#damero" title="Permanent link">&para;</a></h2>
<h3 id="part-1-pintar-tauler">Part 1. Pintar Tauler<a class="headerlink" href="#part-1-pintar-tauler" title="Permanent link">&para;</a></h3>
<h4 id="exercici-11-pintar-tauler">Exercici 1.1 Pintar Tauler<a class="headerlink" href="#exercici-11-pintar-tauler" title="Permanent link">&para;</a></h4>
<p>Fes un programa que pinte un tauler de damas. El tauler ha de ser de 8x8 i ha de ser de colors. Pots utilitzar la següent taula de colors:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="nt">body</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 2 "></span><span class="w">    </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">flex</span><span class="p">;</span>
<span class="linenos" data-linenos=" 3 "></span><span class="w">    </span><span class="k">justify-content</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span><span class="w">    </span><span class="k">align-items</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span>
<span class="linenos" data-linenos=" 5 "></span><span class="w">    </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="kt">vh</span><span class="p">;</span>
<span class="linenos" data-linenos=" 6 "></span><span class="w">    </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#f0f0f0</span><span class="p">;</span>
<span class="linenos" data-linenos=" 7 "></span><span class="p">}</span>
<span class="linenos" data-linenos=" 8 "></span>
<span class="linenos" data-linenos=" 9 "></span><span class="p">.</span><span class="nc">taula-de-dames</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="10 "></span><span class="w">    </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="k">grid</span><span class="p">;</span>
<span class="linenos" data-linenos="11 "></span><span class="w">    </span><span class="k">grid-template-columns</span><span class="p">:</span><span class="w"> </span><span class="nf">repeat</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">50</span><span class="kt">px</span><span class="p">);</span>
<span class="linenos" data-linenos="12 "></span><span class="w">    </span><span class="k">grid-template-rows</span><span class="p">:</span><span class="w"> </span><span class="nf">repeat</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">50</span><span class="kt">px</span><span class="p">);</span>
<span class="linenos" data-linenos="13 "></span><span class="w">    </span><span class="k">gap</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="kt">px</span><span class="p">;</span>
<span class="linenos" data-linenos="14 "></span><span class="p">}</span>
<span class="linenos" data-linenos="15 "></span>
<span class="linenos" data-linenos="16 "></span><span class="p">.</span><span class="nc">taula-de-dames</span><span class="w"> </span><span class="nt">div</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="17 "></span><span class="w">    </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="kt">px</span><span class="p">;</span>
<span class="linenos" data-linenos="18 "></span><span class="w">    </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="kt">px</span><span class="p">;</span>
<span class="linenos" data-linenos="19 "></span><span class="w">    </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">flex</span><span class="p">;</span>
<span class="linenos" data-linenos="20 "></span><span class="w">    </span><span class="k">justify-content</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span>
<span class="linenos" data-linenos="21 "></span><span class="w">    </span><span class="k">align-items</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span>
<span class="linenos" data-linenos="22 "></span><span class="p">}</span>
<span class="linenos" data-linenos="23 "></span>
<span class="linenos" data-linenos="24 "></span><span class="p">.</span><span class="nc">negre</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="25 "></span><span class="w">    </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#444</span><span class="p">;</span>
<span class="linenos" data-linenos="26 "></span><span class="p">}</span>
<span class="linenos" data-linenos="27 "></span>
<span class="linenos" data-linenos="28 "></span><span class="p">.</span><span class="nc">blanc</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="29 "></span><span class="w">    </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#fff</span><span class="p">;</span>
<span class="linenos" data-linenos="30 "></span><span class="p">}</span>
</code></pre></div>
<p>Partim del següent fitxer
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="linenos" data-linenos=" 2 "></span><span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;ca&quot;</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 3 "></span><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 4 "></span>    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 6 "></span>    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Taula de Dames<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;../css/damero.css&quot;</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 8 "></span><span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 9 "></span><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="10 "></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container&quot;</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="11 "></span>    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;taula-de-dames&quot;</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="12 "></span>        <span class="cp">&lt;?= $partida-&gt;getTauler() ?&gt;</span>
<span class="linenos" data-linenos="13 "></span>    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="14 "></span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="15 "></span><span class="p">&lt;</span><span class="nt">form</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;movimentForm&quot;</span> <span class="na">action</span><span class="o">=</span><span class="s">&quot;index.php&quot;</span> <span class="na">method</span><span class="o">=</span><span class="s">&quot;POST&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;display:none;&quot;</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="16 "></span>    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;origenFila&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;origenFila&quot;</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="17 "></span>    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;origenColumna&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;origenColumna&quot;</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="18 "></span>    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;destinoFila&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;destinoFila&quot;</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="19 "></span>    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;destinoColumna&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;destinoColumna&quot;</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="20 "></span><span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="21 "></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;../javascript/moviment.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="22 "></span><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="23 "></span><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></p>
<p>Guarda el fitxer com a <code>tauler.view.php</code> referència-lo des de <code>index.php</code>.</p>
<h4 id="exercici-12-classe-tauler">Exercici 1.2 Classe Tauler<a class="headerlink" href="#exercici-12-classe-tauler" title="Permanent link">&para;</a></h4>
<p>Crea una classe <code>Tauler</code> que siga capaç de pintar el tauler de la forma que s'ha indicat en l'exercici anterior. La classe ha de tindre un mètode <code>__toString</code> que pinte el tauler.</p>
<p>A més la classe tauler acceptarà el paràmetre <code>tamany</code> que per defecte serà 8. La classe anirà dins d'un  directori <code>classes</code>.</p>
<p>Utilitza esta classe des de la vista tauler per a pintar el tauler.</p>
<h4 id="exercici-13-classe-casella">Exercici 1.3 Classe casella<a class="headerlink" href="#exercici-13-classe-casella" title="Permanent link">&para;</a></h4>
<p>Crea una classe <code>Casella</code> que represente una casella del tauler. La classe tindrà un atribut <code>color</code> que serà <code>blanc</code> o <code>negre</code> i un mètode <code>__toString</code> que pintarà la casella.
A més tindrà un atribut  <code>ocupant</code> que serà <code>null</code> si està buida, o <code>jugador1</code>, <code>jugador2</code>.
Tam bé tindrà un atribut <code>fila</code> i <code>columna</code> que indicarà la posició de la casella.</p>
<h4 id="exercici-13-posicio-inicial">Exercici 1.3 Posició inicial<a class="headerlink" href="#exercici-13-posicio-inicial" title="Permanent link">&para;</a></h4>
<p>En la classe <code>Tauler</code>, crea un mètode <code>taulerInicial</code> per inicialitzar el tauler amb fitxes per als dos jugadors en les posicions correctes. </p>
<p>Hauras de crear un array en el constructor de la classe <code>Tauler</code> per a guardar les caselles.</p>
<p><div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="x">class Tauler {</span>
<span class="linenos" data-linenos="2 "></span><span class="x">    private $tamany; // Tamany del tauler, típicament 8 per a dames</span>
<span class="linenos" data-linenos="3 "></span><span class="x">    private $caselles;</span>
<span class="linenos" data-linenos="4 "></span>
<span class="linenos" data-linenos="5 "></span><span class="x">    public function __construct($tamany = 8) {</span>
<span class="linenos" data-linenos="6 "></span><span class="x">        $this-&gt;tamany = $tamany;</span>
<span class="linenos" data-linenos="7 "></span><span class="x">        $this-&gt;inicialitzarCaselles();</span>
<span class="linenos" data-linenos="8 "></span><span class="x">    }</span>
</code></pre></div>
Crea un mètode per obtenir les caselles del tauler.</p>
<p>Utilitza aquest .css actualitzat.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="nt">body</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">flex</span><span class="p">;</span>
<span class="linenos" data-linenos=" 3 "></span><span class="k">justify-content</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span><span class="k">align-items</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span>
<span class="linenos" data-linenos=" 5 "></span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="kt">vh</span><span class="p">;</span>
<span class="linenos" data-linenos=" 6 "></span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#f0f0f0</span><span class="p">;</span>
<span class="linenos" data-linenos=" 7 "></span><span class="p">}</span>
<span class="linenos" data-linenos=" 8 "></span>
<span class="linenos" data-linenos=" 9 "></span><span class="p">.</span><span class="nc">taula-de-dames</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="10 "></span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="k">grid</span><span class="p">;</span>
<span class="linenos" data-linenos="11 "></span><span class="k">grid-template-columns</span><span class="p">:</span><span class="w"> </span><span class="nf">repeat</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="kt">px</span><span class="p">);</span><span class="w"> </span><span class="c">/* Ajusta la mida de les caselles */</span>
<span class="linenos" data-linenos="12 "></span><span class="k">grid-template-rows</span><span class="p">:</span><span class="w"> </span><span class="nf">repeat</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="kt">px</span><span class="p">);</span>
<span class="linenos" data-linenos="13 "></span><span class="k">gap</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="kt">px</span><span class="p">;</span>
<span class="linenos" data-linenos="14 "></span><span class="p">}</span>
<span class="linenos" data-linenos="15 "></span>
<span class="linenos" data-linenos="16 "></span><span class="p">.</span><span class="nc">negre</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="17 "></span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#769656</span><span class="p">;</span><span class="w"> </span><span class="c">/* Color verd fosc per a les caselles jugables */</span>
<span class="linenos" data-linenos="18 "></span><span class="p">}</span>
<span class="linenos" data-linenos="19 "></span>
<span class="linenos" data-linenos="20 "></span><span class="p">.</span><span class="nc">blanc</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="21 "></span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#eeeed2</span><span class="p">;</span><span class="w"> </span><span class="c">/* Color clar per a les caselles no jugables */</span>
<span class="linenos" data-linenos="22 "></span><span class="p">}</span>
<span class="linenos" data-linenos="23 "></span>
<span class="linenos" data-linenos="24 "></span><span class="p">.</span><span class="nc">taula-de-dames</span><span class="w"> </span><span class="nt">div</span><span class="p">.</span><span class="nc">negre</span><span class="o">,</span><span class="w"> </span><span class="p">.</span><span class="nc">taula-de-dames</span><span class="w"> </span><span class="nt">div</span><span class="p">.</span><span class="nc">blanc</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="25 "></span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="kt">px</span><span class="p">;</span><span class="w"> </span><span class="c">/* Ajusta la mida de les caselles */</span>
<span class="linenos" data-linenos="26 "></span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="kt">px</span><span class="p">;</span>
<span class="linenos" data-linenos="27 "></span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">flex</span><span class="p">;</span>
<span class="linenos" data-linenos="28 "></span><span class="k">justify-content</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span>
<span class="linenos" data-linenos="29 "></span><span class="k">align-items</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span>
<span class="linenos" data-linenos="30 "></span><span class="k">position</span><span class="p">:</span><span class="w"> </span><span class="kc">relative</span><span class="p">;</span><span class="w"> </span><span class="c">/* Permet posicionament absolut dins */</span>
<span class="linenos" data-linenos="31 "></span><span class="p">}</span>
<span class="linenos" data-linenos="32 "></span>
<span class="linenos" data-linenos="33 "></span><span class="p">.</span><span class="nc">taula-de-dames</span><span class="w"> </span><span class="nt">div</span><span class="p">.</span><span class="nc">negre</span><span class="p">::</span><span class="nd">before</span><span class="o">,</span><span class="w"> </span><span class="p">.</span><span class="nc">taula-de-dames</span><span class="w"> </span><span class="nt">div</span><span class="p">.</span><span class="nc">blanc</span><span class="p">::</span><span class="nd">before</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="34 "></span><span class="k">content</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="linenos" data-linenos="35 "></span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">80</span><span class="kt">%</span><span class="p">;</span><span class="w"> </span><span class="c">/* Ajusta la mida del marcador de la fitxa */</span>
<span class="linenos" data-linenos="36 "></span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">80</span><span class="kt">%</span><span class="p">;</span><span class="w"> </span><span class="c">/* Ajusta la mida del marcador de la fitxa */</span>
<span class="linenos" data-linenos="37 "></span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="kt">%</span><span class="p">;</span>
<span class="linenos" data-linenos="38 "></span><span class="k">position</span><span class="p">:</span><span class="w"> </span><span class="kc">absolute</span><span class="p">;</span>
<span class="linenos" data-linenos="39 "></span><span class="p">}</span>
<span class="linenos" data-linenos="40 "></span>
<span class="linenos" data-linenos="41 "></span><span class="p">.</span><span class="nc">taula-de-dames</span><span class="w"> </span><span class="nt">div</span><span class="p">.</span><span class="nc">negre</span><span class="p">.</span><span class="nc">fitxa-jugador1</span><span class="p">::</span><span class="nd">before</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="42 "></span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#fff</span><span class="p">;</span><span class="w"> </span><span class="c">/* Color de les fitxes del jugador 1 */</span>
<span class="linenos" data-linenos="43 "></span><span class="k">box-shadow</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">2</span><span class="kt">px</span><span class="w"> </span><span class="mi">4</span><span class="kt">px</span><span class="w"> </span><span class="nb">rgba</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.3</span><span class="p">);</span>
<span class="linenos" data-linenos="44 "></span><span class="p">}</span>
<span class="linenos" data-linenos="45 "></span>
<span class="linenos" data-linenos="46 "></span><span class="p">.</span><span class="nc">taula-de-dames</span><span class="w"> </span><span class="nt">div</span><span class="p">.</span><span class="nc">negre</span><span class="p">.</span><span class="nc">fitxa-jugador2</span><span class="p">::</span><span class="nd">before</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="47 "></span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#000</span><span class="p">;</span><span class="w"> </span><span class="c">/* Color de les fitxes del jugador 2 */</span>
<span class="linenos" data-linenos="48 "></span><span class="k">box-shadow</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">2</span><span class="kt">px</span><span class="w"> </span><span class="mi">4</span><span class="kt">px</span><span class="w"> </span><span class="nb">rgba</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mf">0.3</span><span class="p">);</span>
<span class="linenos" data-linenos="49 "></span><span class="p">}</span>
</code></pre></div>
<h4 id="exercici-14-moviment-de-fitxes">Exercici 1.4 Moviment de fitxes<a class="headerlink" href="#exercici-14-moviment-de-fitxes" title="Permanent link">&para;</a></h4>
<p>Crea un mètode <code>moureFitxa</code> en la classe <code>Tauler</code> que reba la posició inicial i la posició final de la fitxa a moure. El mètode comprovarà si el moviment és vàlid i si ho és, mourà la fitxa.
S'ha de comprovar que les coordenades estiguen dins del tauler, que la casella de destí estiga lliure i que el moviment és cap a davant.
Podrem comprovar que funciona modificant el fitxer <code>index.php</code> de la següent manera:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="x">$tauler = new Tauler();</span>
<span class="linenos" data-linenos="2 "></span><span class="x">if ($tauler-&gt;moureFitxa(2, 1, 3, 0)) {</span>
<span class="linenos" data-linenos="3 "></span><span class="x">    echo &quot;Moviment realitzat amb èxit!&quot;;</span>
<span class="linenos" data-linenos="4 "></span><span class="x">} else {</span>
<span class="linenos" data-linenos="5 "></span><span class="x">    echo &quot;Moviment invàlid.&quot;;</span>
<span class="linenos" data-linenos="6 "></span><span class="x">}</span>
<span class="linenos" data-linenos="7 "></span><span class="x">include_once &#39;./views/tauler.view.php&#39;;</span>
</code></pre></div>
<h4 id="exercici-15-pintar-coordenades">Exercici 1.5 Pintar Coordenades<a class="headerlink" href="#exercici-15-pintar-coordenades" title="Permanent link">&para;</a></h4>
<p>Pinta les coordenades del tauler. Pots utilitzar la següent taula de colors:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="p">.</span><span class="nc">capcalera-coordenades</span><span class="o">,</span><span class="w"> </span><span class="p">.</span><span class="nc">buit</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 2 "></span><span class="w">    </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="kt">px</span><span class="p">;</span>
<span class="linenos" data-linenos=" 3 "></span><span class="w">    </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="kt">px</span><span class="p">;</span><span class="w"> </span><span class="c">/* Ajusta segons necessitat */</span>
<span class="linenos" data-linenos=" 4 "></span><span class="p">}</span>
<span class="linenos" data-linenos=" 5 "></span><span class="p">.</span><span class="nc">coordenada</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 6 "></span><span class="w">    </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">flex</span><span class="p">;</span>
<span class="linenos" data-linenos=" 7 "></span><span class="w">    </span><span class="k">justify-content</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span>
<span class="linenos" data-linenos=" 8 "></span><span class="w">    </span><span class="k">align-items</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span>
<span class="linenos" data-linenos=" 9 "></span><span class="w">    </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="kt">px</span><span class="p">;</span>
<span class="linenos" data-linenos="10 "></span><span class="w">    </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="kt">px</span><span class="p">;</span><span class="w"> </span><span class="c">/* Ajusta segons necessitat */</span>
<span class="linenos" data-linenos="11 "></span><span class="w">    </span><span class="k">font-family</span><span class="p">:</span><span class="w"> </span><span class="n">Arial</span><span class="p">,</span><span class="w"> </span><span class="kc">sans-serif</span><span class="p">;</span>
<span class="linenos" data-linenos="12 "></span><span class="w">    </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mi">14</span><span class="kt">px</span><span class="p">;</span>
<span class="linenos" data-linenos="13 "></span><span class="p">}</span>
</code></pre></div>
<p>Cal pintar-les baix i dalt, a la dreta i a l'esquerra.</p>
<h4 id="exercici-16-javascript">Exercici 1.6 Javascript<a class="headerlink" href="#exercici-16-javascript" title="Permanent link">&para;</a></h4>
<p>Afegix el següent javascript i enllaça-lo a tauler.view.php</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;DOMContentLoaded&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 2 "></span><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">fitxes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;.fitxa[draggable=&quot;true&quot;]&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos=" 3 "></span><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">fitxaArrossegada</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="w">    </span><span class="nx">fitxes</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">fitxa</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 6 "></span><span class="w">        </span><span class="nx">fitxa</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;dragstart&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos=" 7 "></span><span class="w">            </span><span class="nx">fitxaArrossegada</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fitxa</span><span class="p">;</span>
<span class="linenos" data-linenos=" 8 "></span><span class="w">            </span><span class="nx">e</span><span class="p">.</span><span class="nx">dataTransfer</span><span class="p">.</span><span class="nx">setData</span><span class="p">(</span><span class="s1">&#39;text/plain&#39;</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">);</span><span class="w"> </span><span class="c1">// Necessari per a alguns navegadors</span>
<span class="linenos" data-linenos=" 9 "></span><span class="w">        </span><span class="p">});</span>
<span class="linenos" data-linenos="10 "></span><span class="w">    </span><span class="p">});</span>
<span class="linenos" data-linenos="11 "></span>
<span class="linenos" data-linenos="12 "></span><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">caselles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;.casella&#39;</span><span class="p">);</span>
<span class="linenos" data-linenos="13 "></span><span class="w">    </span><span class="nx">caselles</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">casella</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// Corregit per utilitzar forEach amb &#39;casella&#39;</span>
<span class="linenos" data-linenos="14 "></span><span class="w">        </span><span class="nx">casella</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;dragover&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">());</span><span class="w"> </span><span class="c1">// Permetre drop</span>
<span class="linenos" data-linenos="15 "></span><span class="w">        </span><span class="nx">casella</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;drop&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="16 "></span><span class="w">            </span><span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
<span class="linenos" data-linenos="17 "></span><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">fitxaArrossegada</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="p">;</span><span class="w"> </span><span class="c1">// Comprova si hi ha una fitxa arrossegada</span>
<span class="linenos" data-linenos="18 "></span>
<span class="linenos" data-linenos="19 "></span><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">origen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fitxaArrossegada</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">dataset</span><span class="p">;</span>
<span class="linenos" data-linenos="20 "></span><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">destino</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">dataset</span><span class="p">;</span><span class="w"> </span><span class="c1">// Utilitza &#39;this&#39; per referir-se a la casella sobre la qual es fa el drop</span>
<span class="linenos" data-linenos="21 "></span>
<span class="linenos" data-linenos="22 "></span><span class="w">            </span><span class="c1">// Suposem que tens els inputs en el teu formulari per aquests valors</span>
<span class="linenos" data-linenos="23 "></span><span class="w">            </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;origenFila&#39;</span><span class="p">).</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">origen</span><span class="p">.</span><span class="nx">fila</span><span class="p">;</span>
<span class="linenos" data-linenos="24 "></span><span class="w">            </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;origenColumna&#39;</span><span class="p">).</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">origen</span><span class="p">.</span><span class="nx">columna</span><span class="p">;</span>
<span class="linenos" data-linenos="25 "></span><span class="w">            </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;destinoFila&#39;</span><span class="p">).</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">destino</span><span class="p">.</span><span class="nx">fila</span><span class="p">;</span>
<span class="linenos" data-linenos="26 "></span><span class="w">            </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;destinoColumna&#39;</span><span class="p">).</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">destino</span><span class="p">.</span><span class="nx">columna</span><span class="p">;</span>
<span class="linenos" data-linenos="27 "></span>
<span class="linenos" data-linenos="28 "></span><span class="w">            </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;movimentForm&#39;</span><span class="p">).</span><span class="nx">submit</span><span class="p">();</span><span class="w"> </span><span class="c1">// Envía el formulari</span>
<span class="linenos" data-linenos="29 "></span><span class="w">        </span><span class="p">});</span>
<span class="linenos" data-linenos="30 "></span><span class="w">    </span><span class="p">});</span>
<span class="linenos" data-linenos="31 "></span><span class="p">});</span>
</code></pre></div>
<p>Afegeix <code>draggable="true"</code> al dibuixar les caselles ocupades.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="x">public function __toString()</span>
<span class="linenos" data-linenos=" 2 "></span><span class="x">{</span>
<span class="linenos" data-linenos=" 3 "></span>
<span class="linenos" data-linenos=" 4 "></span><span class="x">        $string =  &quot;&lt;div class=&#39;casella {$this-&gt;color}&#39; data-fila=&#39;{$this-&gt;fila}&#39; data-columna=&#39;{$this-&gt;columna}&#39;&gt;&quot;;</span>
<span class="linenos" data-linenos=" 5 "></span><span class="x">        if ($this-&gt;ocupant){</span>
<span class="linenos" data-linenos=" 6 "></span><span class="x">            $classeOcupant = $this-&gt;ocupant ? &quot;fitxa-{$this-&gt;ocupant}&quot; : &quot;&quot;;</span>
<span class="linenos" data-linenos=" 7 "></span><span class="x">            $draggable = $this-&gt;ocupant ? &#39;draggable=&quot;true&quot;&#39; : &#39;&#39;;</span>
<span class="linenos" data-linenos=" 8 "></span><span class="x">            $string .= &quot;&lt;div class=&#39;fitxa {$this-&gt;color} {$classeOcupant}&#39; {$draggable}&gt;&lt;/div&gt;&quot;;</span>
<span class="linenos" data-linenos=" 9 "></span><span class="x">        }</span>
<span class="linenos" data-linenos="10 "></span><span class="x">        $string .= &quot;&lt;/div&gt;&quot;;</span>
<span class="linenos" data-linenos="11 "></span><span class="x">        return $string;</span>
<span class="linenos" data-linenos="12 "></span><span class="x">    }</span>
</code></pre></div>
<h3 id="part-2-pintar-tauler">Part 2. Pintar Tauler<a class="headerlink" href="#part-2-pintar-tauler" title="Permanent link">&para;</a></h3>
<h4 id="exercici-21-sessions-i-composer">Exercici 2.1 Sessions i composer<a class="headerlink" href="#exercici-21-sessions-i-composer" title="Permanent link">&para;</a></h4>
<p>Afegix en el autoload de composer la carpeta <code>classes</code> per a que pugues utilitzar les classes des de qualsevol lloc del teu projecte amb el namespace Damero</p>
<p><div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="x">&quot;autoload&quot;: {</span>
<span class="linenos" data-linenos="2 "></span><span class="x">        &quot;psr-4&quot;: {</span>
<span class="linenos" data-linenos="3 "></span><span class="x">            &quot;Damero\\&quot;: &quot;src/classes&quot;</span>
<span class="linenos" data-linenos="4 "></span><span class="x">        }</span>
<span class="linenos" data-linenos="5 "></span><span class="x">    },</span>
</code></pre></div>
Afegix en les classes el namespace <code>Damero</code> i utilitza <code>composer dump-autoload</code> per a que es carreguen les classes.</p>
<p>Crea un fitxer <code>load.php</code> que carregue el autoload i que carregue la variable de sessió $_SESSION['tauler'] o la cree si no existeix.</p>
<p>Fes que el fitxer <code>index.php</code> carregue el <code>load.php</code>. </p>
<h4 id="exercici-22-formulari-de-moviment">Exercici 2.2: Formulari de moviment<a class="headerlink" href="#exercici-22-formulari-de-moviment" title="Permanent link">&para;</a></h4>
<p>Crea un formulari que permeti moure les fitxes del tauler. El formulari tindrà dos camps de text per a les coordenades inicials i finals i un botó per a enviar el formulari.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="x">&lt;form id=&quot;movimentForm&quot; action=&quot;index.php&quot; method=&quot;POST&quot; style=&quot;display:none;&quot;&gt;</span>
<span class="linenos" data-linenos="2 "></span><span class="x">        &lt;input type=&quot;hidden&quot; name=&quot;origenFila&quot; id=&quot;origenFila&quot;&gt;</span>
<span class="linenos" data-linenos="3 "></span><span class="x">        &lt;input type=&quot;hidden&quot; name=&quot;origenColumna&quot; id=&quot;origenColumna&quot;&gt;</span>
<span class="linenos" data-linenos="4 "></span><span class="x">        &lt;input type=&quot;hidden&quot; name=&quot;destinoFila&quot; id=&quot;destinoFila&quot;&gt;</span>
<span class="linenos" data-linenos="5 "></span><span class="x">        &lt;input type=&quot;hidden&quot; name=&quot;destinoColumna&quot; id=&quot;destinoColumna&quot;&gt;</span>
<span class="linenos" data-linenos="6 "></span><span class="x">&lt;/form&gt;</span>
</code></pre></div>
<p>El formulari estarà ocult i el procesarà el javascript en moure una fitxa.</p>
<p>Modificat el fitxer <code>index.php</code> per a que processe el moviment i el guarde en la sessió.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="x">    require_once $_SERVER[&#39;DOCUMENT_ROOT&#39;].&#39;/load.php&#39;;</span>
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span><span class="x">    // TODO: Llegir el formulari</span>
<span class="linenos" data-linenos="4 "></span><span class="x">    // TODO : mourefitxa tauler</span>
</code></pre></div>
<h4 id="exercici-23-captura">Exercici 2.3: Captura<a class="headerlink" href="#exercici-23-captura" title="Permanent link">&para;</a></h4>
<p>Utilitza el codi següent per fer una captura i integra-lo dins del procediment per a moure la fitxa <code>moureFitxa</code>.
Primer </p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="x">    $diferenciaFila = abs($destiFila - $origenFila);</span>
<span class="linenos" data-linenos=" 2 "></span><span class="x">    $diferenciaColumna = abs($destiColumna - $origenColumna); </span>
<span class="linenos" data-linenos=" 3 "></span><span class="x">    if ($diferenciaFila === 2 &amp;&amp; $diferenciaColumna === 2) {</span>
<span class="linenos" data-linenos=" 4 "></span><span class="x">            // Calcular la posició de la fitxa a ser capturada</span>
<span class="linenos" data-linenos=" 5 "></span><span class="x">        $filaCaptura = ($origenFila + $destiFila) / 2;</span>
<span class="linenos" data-linenos=" 6 "></span><span class="x">        $columnaCaptura = ($origenColumna + $destiColumna) / 2;</span>
<span class="linenos" data-linenos=" 7 "></span><span class="x">        $casellaCaptura = $this-&gt;caselles[$filaCaptura][$columnaCaptura];</span>
<span class="linenos" data-linenos=" 8 "></span><span class="x">        $casellaOrigen = $this-&gt;caselles[$origenFila][$origenColumna];</span>
<span class="linenos" data-linenos=" 9 "></span>
<span class="linenos" data-linenos="10 "></span><span class="x">        // Comprovar si la casella conté una fitxa de l&#39;oponent</span>
<span class="linenos" data-linenos="11 "></span><span class="x">        if ($casellaCaptura-&gt;ocupant &amp;&amp; $casellaCaptura-&gt;ocupant !== $casellaOrigen-&gt;ocupant) {</span>
<span class="linenos" data-linenos="12 "></span><span class="x">            // Realitzar la captura</span>
<span class="linenos" data-linenos="13 "></span><span class="x">            $casellaCaptura-&gt;ocupant = null;</span>
<span class="linenos" data-linenos="14 "></span><span class="x">        }</span>
<span class="linenos" data-linenos="15 "></span><span class="x">    }</span>
</code></pre></div>
<p>Extrau el codi que fa moure la fitxa de posició fora d'este procediment a un metode mou que pot utilitzar també el procediment de moureFitxa.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="x">    $casellaDesti-&gt;ocupant = $casellaOrigen-&gt;ocupant;</span>
<span class="linenos" data-linenos="2 "></span><span class="x">    $casellaOrigen-&gt;ocupant = null;</span>
<span class="linenos" data-linenos="3 "></span><span class="x">    $_SESSION[&#39;tauler&#39;] = serialize($this);</span>
</code></pre></div>
<p>Crea un fitxer  per començar una partida nova <code>nouJoc.php</code> que carregue el tauler i el guarde en la sessió, i redirigixca a <code>index.php</code>.</p>
<h4 id="exercici-24-refactoritzar-codi">Exercici 2.4: Refactoritzar codi<a class="headerlink" href="#exercici-24-refactoritzar-codi" title="Permanent link">&para;</a></h4>
<p>Crea el següent mètodes en la classe <code>Tauler</code>:</p>
<ul>
<li><code>coordenades_correctes($origenFila, $origenColumna, $destiFila, $destiColumna)</code> que comprovarà si les coordenades estan dins del tauler.</li>
<li><code>moviment_correcte($casellaOrigen, $casellaDesti)</code> que comprovarà si el moviment és correcte.</li>
<li><code>captura_correcta($casellaOrigen, $casellaDesti)</code> que comprovarà si la captura és correcta.</li>
</ul>
<p>Estos mètodes llançaran una exempció amb el missatge d'error que serà capturada en  <code>moure_fitxa()</code> i es mostrarà en el tauler utilitzant el següent css</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="p">#</span><span class="nn">missatgeError</span><span class="w"> </span><span class="p">{</span>
<span class="linenos" data-linenos="2 "></span><span class="w">    </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="kc">red</span><span class="p">;</span>
<span class="linenos" data-linenos="3 "></span><span class="w">    </span><span class="k">text-align</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span>
<span class="linenos" data-linenos="4 "></span><span class="w">    </span><span class="k">margin-bottom</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
<span class="linenos" data-linenos="5 "></span><span class="w">    </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#fff3f3</span><span class="p">;</span>
<span class="linenos" data-linenos="6 "></span><span class="w">    </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="kc">red</span><span class="p">;</span>
<span class="linenos" data-linenos="7 "></span><span class="w">    </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
<span class="linenos" data-linenos="8 "></span><span class="p">}</span>
</code></pre></div>
<p>Crea un mètode per pintar les coordenades de l'esquerra i de la dreta del tauler.</p>
<h3 id="part-3-partida">Part 3. Partida<a class="headerlink" href="#part-3-partida" title="Permanent link">&para;</a></h3>
<h4 id="exercici-31-classe-partida">Exercici 3.1: Classe Partida<a class="headerlink" href="#exercici-31-classe-partida" title="Permanent link">&para;</a></h4>
<p>Crea una classe <code>Partida</code> que tinga un tauler i que siga capaç de guardar la partida en la sessió. La classe tindrà un mètode <code>nouJoc</code> que crearà un nou tauler i el guardarà en la sessió.</p>
<p>Haurà de tenir els següents attributs privats:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>* Tauler
<span class="linenos" data-linenos="2 "></span>* Torn Actual
<span class="linenos" data-linenos="3 "></span>* Estat de joc 
<span class="linenos" data-linenos="4 "></span>* Guanyador
</code></pre></div>
<p>I a banda dels getters, els següents mètodes:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>* canviarTorn()
<span class="linenos" data-linenos="2 "></span>* moureFitxa($origenFila, $origenColumna, $destiFila, $destiColumna) 
<span class="linenos" data-linenos="3 "></span>* comprovarEstatJoc()
</code></pre></div>
<p>Modifica el mètode de <code>Tauler</code> <code>moureFitxa</code> per tal que accepte un paràmetre més <code>$tornActual</code>.
El mètode ara haurà de comprovar que el torn actual siga el mateix que el de la fitxa a moure, per a lo que 
afegirem un mètode més que serà <code>tornCorrecte($casellaOrigen, $tornActual)</code>.</p>
<p>Ara la lògica del joc recau en el mètode moureFitxa de la classe Partidal, i hauràs de refactoritzar el fitxers <code>load.php</code>,<code>index.php</code> i <code>tauler.view.php</code>.</p>
<h4 id="exercici-32-refactoritzacio">Exercici 3.2: Refactorització<a class="headerlink" href="#exercici-32-refactoritzacio" title="Permanent link">&para;</a></h4>
<p>Crea un mètode en <code>partida</code> <code>finalitzada()</code> que comprove si l'estat del joc és <code>acabat</code>.</p>
<p>Fes que les exempcions de moviments incorrectes es capturen en el fitxer <code>index.php</code> en conte de en <code>moure_fitxa()</code>.</p>
<p>Fes que en la variable que es guarde en la sessió siga la partida en conte del taules.</p>
<p>Crea un procediment <code>getColumna()</code> en la classe <code>Casella</code> per mostrar la lletra de la columna, a partide la A.</p>
<h4 id="exercici-33-finalitzacio-del-joc">Exercici 3.3: Finalització del joc<a class="headerlink" href="#exercici-33-finalitzacio-del-joc" title="Permanent link">&para;</a></h4>
<p>Crea un mètode <code>comptarFitxes($jugador)</code> en la classe <code>Tauler</code> que compte el numero de fitxes del jugador que queden en el tauler</p>
<p>Afegix els següents mètodes a la clase <code>Tauler</code></p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="x">    public function potMoure($jugador) {</span>
<span class="linenos" data-linenos=" 2 "></span><span class="x">        for ($fila = 1; $fila &lt;= $this-&gt;tamany; $fila++) {</span>
<span class="linenos" data-linenos=" 3 "></span><span class="x">            for ($columna = 1; $columna &lt;= $this-&gt;tamany; $columna++) {</span>
<span class="linenos" data-linenos=" 4 "></span><span class="x">                $casellaActual = $this-&gt;caselles[$fila][$columna];</span>
<span class="linenos" data-linenos=" 5 "></span><span class="x">                if ($casellaActual-&gt;ocupant === $jugador) {</span>
<span class="linenos" data-linenos=" 6 "></span><span class="x">                    if ($this-&gt;comprovarMovimentsFitxa($casellaActual, $jugador)) {</span>
<span class="linenos" data-linenos=" 7 "></span><span class="x">                        return true; // Hi ha almenys un moviment vàlid.</span>
<span class="linenos" data-linenos=" 8 "></span><span class="x">                    }</span>
<span class="linenos" data-linenos=" 9 "></span><span class="x">                }</span>
<span class="linenos" data-linenos="10 "></span><span class="x">            }</span>
<span class="linenos" data-linenos="11 "></span><span class="x">        }</span>
<span class="linenos" data-linenos="12 "></span><span class="x">        return false; // No s&#39;ha trobat cap moviment vàlid.</span>
<span class="linenos" data-linenos="13 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="14 "></span>
<span class="linenos" data-linenos="15 "></span><span class="x">    private function comprovarMovimentsFitxa($casella, $jugador) {</span>
<span class="linenos" data-linenos="16 "></span><span class="x">        $direccions = $jugador === &#39;jugador1&#39; ? [[1, -1], [1, 1]] : [[-1, -1], [-1, 1]]; // Direccions de moviment per a cada jugador</span>
<span class="linenos" data-linenos="17 "></span>
<span class="linenos" data-linenos="18 "></span><span class="x">        foreach ($direccions as $direccio) {</span>
<span class="linenos" data-linenos="19 "></span><span class="x">            $destiFila = $casella-&gt;fila + $direccio[0];</span>
<span class="linenos" data-linenos="20 "></span><span class="x">            $destiColumna = $casella-&gt;columna + $direccio[1];</span>
<span class="linenos" data-linenos="21 "></span><span class="x">            $desti = $this-&gt;caselles[$destiFila][$destiColumna]??null;</span>
<span class="linenos" data-linenos="22 "></span>
<span class="linenos" data-linenos="23 "></span><span class="x">            // Comprovar moviment simple</span>
<span class="linenos" data-linenos="24 "></span><span class="x">            if ($this-&gt;esMovimentValid($casella, $desti)) {</span>
<span class="linenos" data-linenos="25 "></span>
<span class="linenos" data-linenos="26 "></span><span class="x">                return true;</span>
<span class="linenos" data-linenos="27 "></span><span class="x">            }</span>
<span class="linenos" data-linenos="28 "></span>
<span class="linenos" data-linenos="29 "></span><span class="x">            // Comprovar captura</span>
<span class="linenos" data-linenos="30 "></span><span class="x">            $destiFilaCaptura = $casella-&gt;fila + 2 * $direccio[0];</span>
<span class="linenos" data-linenos="31 "></span><span class="x">            $destiColumnaCaptura = $casella-&gt;columna + 2 * $direccio[1];</span>
<span class="linenos" data-linenos="32 "></span><span class="x">            $desti = $this-&gt;caselles[$destiFilaCaptura][$destiColumnaCaptura]??null;</span>
<span class="linenos" data-linenos="33 "></span><span class="x">            if ($this-&gt;esCapturaValida($casella, $desti)) {</span>
<span class="linenos" data-linenos="34 "></span><span class="x">                return true;</span>
<span class="linenos" data-linenos="35 "></span><span class="x">            }</span>
<span class="linenos" data-linenos="36 "></span><span class="x">        }</span>
<span class="linenos" data-linenos="37 "></span>
<span class="linenos" data-linenos="38 "></span><span class="x">        return false;</span>
<span class="linenos" data-linenos="39 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="40 "></span>
<span class="linenos" data-linenos="41 "></span><span class="x">    private function esMovimentValid($origen,$desti) {</span>
<span class="linenos" data-linenos="42 "></span><span class="x">        try {</span>
<span class="linenos" data-linenos="43 "></span><span class="x">            $this-&gt;movimentCorrecte($origen,$desti);</span>
<span class="linenos" data-linenos="44 "></span><span class="x">            return true;</span>
<span class="linenos" data-linenos="45 "></span><span class="x">        } catch (\Exception $e){</span>
<span class="linenos" data-linenos="46 "></span><span class="x">            return false;</span>
<span class="linenos" data-linenos="47 "></span><span class="x">        }</span>
<span class="linenos" data-linenos="48 "></span>
<span class="linenos" data-linenos="49 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="50 "></span>
<span class="linenos" data-linenos="51 "></span><span class="x">    private function esCapturaValida($origen,$desti) {</span>
<span class="linenos" data-linenos="52 "></span><span class="x">        try {</span>
<span class="linenos" data-linenos="53 "></span><span class="x">            return $this-&gt;capturaCorrecta($origen,$desti,false);</span>
<span class="linenos" data-linenos="54 "></span><span class="x">        } catch (\Exception $e){</span>
<span class="linenos" data-linenos="55 "></span><span class="x">            return false;</span>
<span class="linenos" data-linenos="56 "></span><span class="x">        }</span>
<span class="linenos" data-linenos="57 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="58 "></span><span class="x">}</span>
</code></pre></div>
<p>Modifica el màtode <code>capturaCorrecta()</code> per a que accepte un paràmetre boolean <code>$captura</code> per a que efectue la captura realment o simplement comprove si és possible.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="x">private function capturaCorrecta($casellaOrigen,$casellaDesti,$captura = true): bool {</span>
<span class="linenos" data-linenos=" 2 "></span><span class="x">    if ($casellaOrigen &amp;&amp; $casellaDesti) {</span>
<span class="linenos" data-linenos=" 3 "></span><span class="x">        $diferenciaFila = abs($casellaDesti-&gt;fila - $casellaOrigen-&gt;fila);</span>
<span class="linenos" data-linenos=" 4 "></span><span class="x">        $diferenciaColumna = abs($casellaDesti-&gt;columna - $casellaOrigen-&gt;columna);</span>
<span class="linenos" data-linenos=" 5 "></span><span class="x">        if ($diferenciaFila === 2 &amp;&amp; $diferenciaColumna === 2) {</span>
<span class="linenos" data-linenos=" 6 "></span><span class="x">            // Calcular la posició de la fitxa a ser capturada</span>
<span class="linenos" data-linenos=" 7 "></span><span class="x">            $filaCaptura = ($casellaOrigen-&gt;fila + $casellaDesti-&gt;fila) / 2;</span>
<span class="linenos" data-linenos=" 8 "></span><span class="x">            $columnaCaptura = ($casellaOrigen-&gt;columna + $casellaDesti-&gt;columna) / 2;</span>
<span class="linenos" data-linenos=" 9 "></span><span class="x">            $casellaCaptura = $this-&gt;caselles[$filaCaptura][$columnaCaptura];</span>
<span class="linenos" data-linenos="10 "></span>
<span class="linenos" data-linenos="11 "></span><span class="x">            // Comprovar si la casella conté una fitxa de l&#39;oponent</span>
<span class="linenos" data-linenos="12 "></span><span class="x">            if ($casellaCaptura-&gt;ocupant &amp;&amp; $casellaCaptura-&gt;ocupant !== $casellaOrigen-&gt;ocupant) {</span>
<span class="linenos" data-linenos="13 "></span><span class="x">                // Realitzar la captura</span>
<span class="linenos" data-linenos="14 "></span><span class="x">                if ($captura) {</span>
<span class="linenos" data-linenos="15 "></span><span class="x">                    $casellaCaptura-&gt;ocupant = null;</span>
<span class="linenos" data-linenos="16 "></span><span class="x">                } else {</span>
<span class="linenos" data-linenos="17 "></span><span class="x">                    return true;</span>
<span class="linenos" data-linenos="18 "></span><span class="x">                }</span>
<span class="linenos" data-linenos="19 "></span><span class="x">            }</span>
<span class="linenos" data-linenos="20 "></span><span class="x">        }</span>
<span class="linenos" data-linenos="21 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="22 "></span><span class="x">    return false;</span>
<span class="linenos" data-linenos="23 "></span><span class="x">}</span>
</code></pre></div>
<p>En <code>partida.php</code> modificar el mètode <code>comprovarEstatJoc()</code> per a que comprove si hi ha un jugador sense fitxes o el jugador actual pot moure fitxes, i si no pot, finalitzar el joc. </p>
<h4 id="exercici-34-arreplegar-el-moviment-del-formulari">Exercici 3.4: Arreplegar el moviment del formulari<a class="headerlink" href="#exercici-34-arreplegar-el-moviment-del-formulari" title="Permanent link">&para;</a></h4>
<p>En el fitxer <code>index.php</code> fes que si arriba un mètode post, arreplegue les dades del formulari i efectue el moviment.
Si arriba un esdeveniment, carrega una variable d'error amb el missatge corresponent i mostra-lo al tauler.
Crea una classe <code>Exempcions\MovimentException.php</code> i substituix totes les exempcions de moviments per esta.</p>
<h4 id="exercici-35-captura-obligada">Exercici 3.5: Captura Obligada<a class="headerlink" href="#exercici-35-captura-obligada" title="Permanent link">&para;</a></h4>
<p>En el procediment <code>moureFitxa</code> de la classe <code>Partida</code> afegix una variable que indique si el jugador ha de capturar una fitxa que haurà de retornar el mètode<code>comprovarEstatJoc</code> de la classe <code>Tauler</code>.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="x">    $obligat = $this-&gt;comprovarEstatJoc();</span>
</code></pre></div>
<p>Ara el procediment <code>captura</code> haurà d'acceptar un camp més per obligar-lo a capturar.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="x">$captura = $this-&gt;tauler-&gt;moureFitxa($origenFila, $origenColumna, $destiFila, $destiColumna, $this-&gt;tornActual,$obligat);</span>
</code></pre></div>
<p>I el mètode <code>moureFitxa</code> de la classe <code>Tauler</code> haurà de comprovar també si el jugador ha de capturar fitxes.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="x">    public function moureFitxa($origenFila, $origenColumna, $destiFila, $destiColumna, $tornActual,$obligat =false,$doblecaptura = null) {</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="x">        $this-&gt;coordenadesCorrectes($origenFila, $origenColumna, $destiFila, $destiColumna);</span>
<span class="linenos" data-linenos=" 4 "></span><span class="x">        $casellaOrigen = $this-&gt;caselles[$origenFila][$origenColumna];</span>
<span class="linenos" data-linenos=" 5 "></span><span class="x">        $this-&gt;tornCorrecte($casellaOrigen, $tornActual,$doblecaptura);</span>
<span class="linenos" data-linenos=" 6 "></span><span class="x">        $casellaDesti = $this-&gt;caselles[$destiFila][$destiColumna];</span>
<span class="linenos" data-linenos=" 7 "></span>
<span class="linenos" data-linenos=" 8 "></span><span class="x">        // Verificar que la casella d&#39;origen té una fitxa i la de destinació està buida</span>
<span class="linenos" data-linenos=" 9 "></span><span class="x">        if (!$this-&gt;capturaCorrecta($casellaOrigen, $casellaDesti)){</span>
<span class="linenos" data-linenos="10 "></span><span class="x">            if (!$obligat) {</span>
<span class="linenos" data-linenos="11 "></span><span class="x">                $this-&gt;movimentCorrecte($casellaOrigen, $casellaDesti);</span>
<span class="linenos" data-linenos="12 "></span><span class="x">                $this-&gt;mou($casellaOrigen, $casellaDesti);</span>
<span class="linenos" data-linenos="13 "></span><span class="x">                return null;</span>
<span class="linenos" data-linenos="14 "></span><span class="x">            } else {</span>
<span class="linenos" data-linenos="15 "></span><span class="x">                throw new MovementException(&#39;Has de capturar&#39;);</span>
<span class="linenos" data-linenos="16 "></span><span class="x">            }</span>
<span class="linenos" data-linenos="17 "></span><span class="x">        } else {</span>
<span class="linenos" data-linenos="18 "></span><span class="x">            $this-&gt;mou($casellaOrigen, $casellaDesti);</span>
<span class="linenos" data-linenos="19 "></span><span class="x">            return $casellaDesti;</span>
<span class="linenos" data-linenos="20 "></span><span class="x">        }</span>
<span class="linenos" data-linenos="21 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="22 "></span>
<span class="linenos" data-linenos="23 "></span><span class="x">    public function potMoure($jugador) {</span>
<span class="linenos" data-linenos="24 "></span><span class="x">        $teCaptures = false;</span>
<span class="linenos" data-linenos="25 "></span>
<span class="linenos" data-linenos="26 "></span><span class="x">        for ($fila = 1; $fila &lt;= $this-&gt;tamany; $fila++) {</span>
<span class="linenos" data-linenos="27 "></span><span class="x">            for ($columna = 1; $columna &lt;= $this-&gt;tamany; $columna++) {</span>
<span class="linenos" data-linenos="28 "></span><span class="x">                $casellaActual = $this-&gt;caselles[$fila][$columna];</span>
<span class="linenos" data-linenos="29 "></span><span class="x">                if ($casellaActual-&gt;ocupant === $jugador) {</span>
<span class="linenos" data-linenos="30 "></span><span class="x">                    // Primer, comprova si hi ha captures disponibles per aquesta fitxa</span>
<span class="linenos" data-linenos="31 "></span><span class="x">                    if ($this-&gt;teCapturesDisponibles($casellaActual)) {</span>
<span class="linenos" data-linenos="32 "></span><span class="x">                        $teCaptures = true;</span>
<span class="linenos" data-linenos="33 "></span><span class="x">                    }</span>
<span class="linenos" data-linenos="34 "></span><span class="x">                }</span>
<span class="linenos" data-linenos="35 "></span><span class="x">            }</span>
<span class="linenos" data-linenos="36 "></span><span class="x">        }</span>
<span class="linenos" data-linenos="37 "></span><span class="x">        if ($teCaptures) {</span>
<span class="linenos" data-linenos="38 "></span><span class="x">            // Si hi ha captures disponibles, el jugador ha de capturar</span>
<span class="linenos" data-linenos="39 "></span><span class="x">            return 1;</span>
<span class="linenos" data-linenos="40 "></span><span class="x">        }</span>
<span class="linenos" data-linenos="41 "></span><span class="x">        for ($fila = 1; $fila &lt;= $this-&gt;tamany; $fila++) {</span>
<span class="linenos" data-linenos="42 "></span><span class="x">            for ($columna = 1; $columna &lt;= $this-&gt;tamany; $columna++) {</span>
<span class="linenos" data-linenos="43 "></span><span class="x">                $casellaActual = $this-&gt;caselles[$fila][$columna];</span>
<span class="linenos" data-linenos="44 "></span><span class="x">                if ($casellaActual-&gt;ocupant === $jugador) {</span>
<span class="linenos" data-linenos="45 "></span><span class="x">                    if ($this-&gt;comprovarMovimentsFitxa($casellaActual)) {</span>
<span class="linenos" data-linenos="46 "></span><span class="x">                        return 2; // Hi ha almenys un moviment vàlid.</span>
<span class="linenos" data-linenos="47 "></span><span class="x">                    }</span>
<span class="linenos" data-linenos="48 "></span><span class="x">                }</span>
<span class="linenos" data-linenos="49 "></span><span class="x">            }</span>
<span class="linenos" data-linenos="50 "></span><span class="x">        }</span>
<span class="linenos" data-linenos="51 "></span><span class="x">        return 0; // No s&#39;ha trobat cap moviment vàlid.</span>
<span class="linenos" data-linenos="52 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="53 "></span>
<span class="linenos" data-linenos="54 "></span><span class="x">    public function teCapturesDisponibles($casella) {</span>
<span class="linenos" data-linenos="55 "></span><span class="x">        $direccions = $this-&gt;obtenirMovimentsPosibles($casella-&gt;ocupant);</span>
<span class="linenos" data-linenos="56 "></span><span class="x">        foreach ($direccions as $direccio) {</span>
<span class="linenos" data-linenos="57 "></span><span class="x">            $destiFilaCaptura = $casella-&gt;fila + 2 * $direccio[0];</span>
<span class="linenos" data-linenos="58 "></span><span class="x">            $destiColumnaCaptura = $casella-&gt;columna + 2 * $direccio[1];</span>
<span class="linenos" data-linenos="59 "></span><span class="x">            $desti = $this-&gt;caselles[$destiFilaCaptura][$destiColumnaCaptura]??null;</span>
<span class="linenos" data-linenos="60 "></span><span class="x">            if ( $this-&gt;capturaCorrecta($casella,$desti,false)) {</span>
<span class="linenos" data-linenos="61 "></span><span class="x">                return true;</span>
<span class="linenos" data-linenos="62 "></span><span class="x">            }</span>
<span class="linenos" data-linenos="63 "></span><span class="x">        }</span>
<span class="linenos" data-linenos="64 "></span><span class="x">        return false;</span>
<span class="linenos" data-linenos="65 "></span><span class="x">    }</span>
<span class="linenos" data-linenos="66 "></span>
<span class="linenos" data-linenos="67 "></span><span class="x">    private function obtenirMovimentsPosibles($jugador) {</span>
<span class="linenos" data-linenos="68 "></span><span class="x">        // Retorna les direccions de captura basades en el jugador</span>
<span class="linenos" data-linenos="69 "></span><span class="x">        // Això pot variar si estàs implementant dames que poden moure&#39;s/capturar en qualsevol direcció</span>
<span class="linenos" data-linenos="70 "></span><span class="x">        return $jugador === &#39;jugador2&#39; ? [[1, -1], [1, 1]] : [[-1, -1], [-1, 1]];</span>
<span class="linenos" data-linenos="71 "></span><span class="x">    }</span>
</code></pre></div>









  




                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      2021-2026 Aitor Medrano, Luis Alemañ, Ignasi Gomis - Licencia CC BY-NC-SA
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/aitormedrano" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.2 4.2 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.52 8.52 0 0 1-5.33 1.84q-.51 0-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:<a.medrano@edu.gva.es>" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 12.13c-.15.01-.29.06-.39.17l-1 1 2.05 2 1-1c.22-.21.22-.56 0-.77l-1.24-1.23a.56.56 0 0 0-.38-.17m-2 1.75L13 19.94V22h2.06l6.06-6.07M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h7v-.89l8.24-8.22c.47-.49 1.12-.76 1.8-.76.34 0 .68.06 1 .19V6c0-1.12-.92-2-2.04-2m0 4-8 5-8-5V6l8 5 8-5"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": ".", "features": ["header.autohide", "toc.integrate", "content.tabs.link"], "search": "assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copiat al porta-retalls", "clipboard.copy": "C\u00f2pia al porta-retalls", "search.result.more.one": "1 m\u00e9s en aquesta p\u00e0gina", "search.result.more.other": "# m\u00e9s en aquesta p\u00e0gina", "search.result.none": "Cap document coincideix", "search.result.one": "1 document coincident", "search.result.other": "# documents coincidents", "search.result.placeholder": "Escriu per a comen\u00e7ar a cercar", "search.result.term.missing": "Desaparegut", "select.version": "Selecciona la versi\u00f3"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>